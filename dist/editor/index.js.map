{"version":3,"file":"index.js","sources":["../../src/components/config/i18n.ts","../../src/components/editorTools/paymentLine.ts","../../src/components/editorTools.ts","../../src/components/editor.tsx"],"sourcesContent":["import type { I18nConfig } from '@editorjs/editorjs'\n\nexport const i18n: I18nConfig = {\n  messages: {\n    ui: {\n      blockTunes: {\n        toggler: {\n          'Click to tune': 'ブロックの操作',\n        },\n      },\n      inlineToolbar: {\n        converter: {\n          'Convert to': '変更',\n        },\n      },\n      toolbar: {\n        toolbox: {\n          Add: '追加',\n        },\n      },\n    },\n    toolNames: {\n      Text: '文章',\n      Heading: '子見出し',\n      List: 'リスト',\n      Quote: '引用',\n      Link: 'リンク',\n      Image: '画像',\n      Payment: '有料ライン',\n      Embed: '埋め込み',\n    },\n    tools: {\n      link: {\n        'Add a link': 'リンクを追加',\n        Link: 'リンク',\n        \"Couldn't get this link data, try the other one\": 'リンク先の情報を取得できませんでした。',\n      },\n      image: {\n        'Select an Image': '画像を選択',\n        Caption: 'キャプション',\n        'With border': '枠を追加',\n        'Stretch image': '画像を拡大',\n        'With background': '背景を追加',\n      },\n      header: {\n        'Heading 2': 'H2',\n        'Heading 3': 'H3',\n      },\n      list: {\n        Unordered: '番号なし',\n        Ordered: '番号あり',\n      },\n      embed: {\n        Link: 'リンク',\n      },\n    },\n    blockTunes: {\n      delete: {\n        Delete: '削除',\n        'Click to delete': 'クリックで削除',\n      },\n      moveUp: {\n        'Move up': '上に移動',\n      },\n      moveDown: {\n        'Move down': '下に移動',\n      },\n    },\n  },\n}\n","import type { BlockTool, BlockToolData, ToolboxConfig } from '@editorjs/editorjs'\nimport type { CSSProperties } from 'react'\n\nconst styles: CSSProperties = {\n  fontWeight: 'bold',\n  backgroundColor: '#FFDA00',\n  width: '100%',\n  textAlign: 'center',\n  paddingTop: '0.3em',\n  paddingBottom: '0.3em',\n  border: '1px solid white',\n}\nconst text = 'このラインより先を有料にする'\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type PaymentLineData = {}\n\nclass PaymentLine implements BlockTool {\n  constructor() {}\n\n  static get toolbox(): ToolboxConfig {\n    return {\n      title: 'Payment',\n      icon: '<svg style=\"transform:scale(0.7)\" width=\"19\" height=\"19\" viewBox=\"0 0 19 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.0097 11.2778H14.218V12.7222H10.2863V14.1667H14.218V15.6111H10.2863V18.5H8.71365V15.6111H4.78198V14.1667H8.71365V12.7222H4.78198V11.2778H7.99022L3.99564 5.5H5.85926L9.49998 10.765L13.1407 5.5H15.0043L11.0097 11.2778Z\" fill=\"#000000\"/><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M3 5H6.16354L9.5 9.82499L12.8365 5H16L12.0054 10.7778H14.7684V13.2222H10.8368V13.6667H14.7684V16.1111H10.8368V19H8.16323V16.1111H4.23156V13.6667H8.16323V13.2222H4.23156V10.7778H6.99457L3 5ZM4.99133 6L8.9859 11.7778H5.33243V12.2222H9.2641V14.6667H5.33243V15.1111H9.2641V18H9.7359V15.1111H13.6676V14.6667H9.7359V12.2222H13.6676V11.7778H10.0141L14.0087 6H13.445L9.5 11.705L5.55501 6H4.99133Z\" fill=\"#000000\"/><rect width=\"4\" height=\"3\" fill=\"#000000\"/><rect x=\"5\" width=\"4\" height=\"3\" fill=\"#000000\"/><rect x=\"10\" width=\"4\" height=\"3\" fill=\"#000000\"/><rect x=\"15\" width=\"4\" height=\"3\" fill=\"#000000\"/></svg>',\n    }\n  }\n\n  render(): HTMLElement {\n    const div = document.createElement('div')\n\n    div.innerText = text\n    div.style.fontWeight = styles.fontWeight?.toString() ?? ''\n    div.style.backgroundColor = styles.backgroundColor?.toString() ?? ''\n    div.style.paddingTop = styles.paddingTop?.toString() ?? ''\n    div.style.paddingBottom = styles.paddingBottom?.toString() ?? ''\n    div.style.width = styles.width?.toString() ?? ''\n    div.style.textAlign = styles.textAlign?.toString() ?? ''\n\n    return div\n  }\n\n  save(): BlockToolData {\n    return {}\n  }\n}\n\nexport default PaymentLine\n","import { ToolConstructable, ToolSettings, BlockToolConstructable } from '@editorjs/editorjs'\nimport Header, { HeaderConfig } from '@editorjs/header'\nimport LinkTool, { LinkToolConfig } from '@editorjs/link'\nimport List, { ListConfig } from '@editorjs/nested-list'\nimport Embed, { EmbedConfig } from 'editorjs-embed'\nimport ImageTool, { ImageToolConfig } from 'editorjs-image'\nimport Quote, { QuoteConfig } from 'editorjs-quote'\n\nimport PaymentLine from './editorTools/paymentLine'\n\nconst header: ToolSettings<HeaderConfig> = {\n  class: Header,\n  shortcut: 'CMD+SHIFT+H',\n  config: {\n    placeholder: 'へッダー',\n    levels: [2, 3],\n    defaultLevel: 2,\n  },\n}\n\nconst list: ToolSettings<ListConfig> = {\n  class: List as unknown as BlockToolConstructable,\n  inlineToolbar: true,\n  config: {\n    defaultStyle: 'unordered',\n  },\n}\n\nconst embed: ToolSettings<EmbedConfig> = {\n  class: Embed as unknown as BlockToolConstructable,\n  inlineToolbar: true,\n  config: {\n    services: {\n      youtube: true,\n      vimeo: true,\n      twitter: true,\n      instagram: true,\n    },\n  },\n}\n\nconst quote: ToolSettings<QuoteConfig> = {\n  class: Quote as unknown as BlockToolConstructable,\n  config: {\n    quotePlaceholder: '引用を追加',\n    captionPlaceholder: 'キャプションを追加',\n  },\n}\n\nconst link = (config?: LinkToolConfig): ToolSettings<LinkToolConfig> => ({\n  class: LinkTool,\n  config,\n})\n\nconst image = (config?: ImageToolConfig): ToolSettings<ImageToolConfig> => ({\n  class: ImageTool as unknown as BlockToolConstructable,\n  config: config,\n})\n\nconst payment: ToolSettings = {\n  class: PaymentLine as unknown as BlockToolConstructable,\n}\n\nexport type ToolConfigs = {\n  link?: LinkToolConfig\n  image: ImageToolConfig\n}\n\nexport const generateTool = (\n  config?: ToolConfigs,\n): {\n  [toolName: string]: ToolConstructable | ToolSettings\n} => ({\n  header,\n  link: link(config?.link),\n  list,\n  embed,\n  image: image(config?.image),\n  quote,\n  payment,\n})\n","import EditorJs, { OutputData } from '@editorjs/editorjs'\nimport { useEffect, useRef, forwardRef, useImperativeHandle } from 'react'\n\nimport { i18n } from '../components/config/i18n'\nimport { generateTool, ToolConfigs } from '../components/editorTools'\n\ntype Props = {\n  id: string\n  data?: OutputData\n  onChange?: (data: OutputData) => void\n  config?: ToolConfigs\n}\ninterface Editor {\n  save: () => Promise<OutputData>\n}\n\nconst Editor = forwardRef<Editor, Props>(({ id, data, onChange, config }: Props, ref) => {\n  const editorJs = useRef<EditorJs | null>(null)\n\n  useEffect(() => {\n    if (!editorJs.current && typeof window !== 'undefined') {\n      const editor = new EditorJs({\n        holder: id,\n        tools: generateTool(config),\n        autofocus: false,\n        data: data,\n        placeholder: '文字を入力',\n        async onChange() {\n          if (onChange) {\n            const res = await save()\n            res && onChange(res)\n          }\n        },\n        i18n,\n      })\n      editorJs.current = editor\n    }\n    return () => {\n      // 型定義にはdestroyが存在するが、実際の動きでは存在しない場合があるので、destroyの存在チェック\n      if (editorJs.current && editorJs.current.destroy) {\n        editorJs.current.destroy()\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  const save = (): Promise<OutputData> => {\n    return editorJs.current?.save() || Promise.reject('Editor not initialized')\n  }\n\n  useImperativeHandle(ref, () => ({\n    save,\n  }))\n\n  return <div id={id} className=\"w-full\" />\n})\n\nexport default Editor\n"],"names":[],"mappings":"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"}