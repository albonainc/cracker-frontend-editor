(function(Se,ke){typeof exports=="object"&&typeof module<"u"?ke(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],ke):(Se=typeof globalThis<"u"?globalThis:Se||self,ke(Se["<パッケージ名>"]={},Se.React))})(this,function(Se,ke){"use strict";function oo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vt={exports:{}},Xe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var no;function pn(){if(no)return Xe;no=1;var r=ke,e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,n=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function s(a,c,l){var u,d={},p=null,k=null;l!==void 0&&(p=""+l),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(k=c.ref);for(u in c)o.call(c,u)&&!i.hasOwnProperty(u)&&(d[u]=c[u]);if(a&&a.defaultProps)for(u in c=a.defaultProps,c)d[u]===void 0&&(d[u]=c[u]);return{$$typeof:e,type:a,key:p,ref:k,props:d,_owner:n.current}}return Xe.Fragment=t,Xe.jsx=s,Xe.jsxs=s,Xe}var Ge={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var io;function fn(){return io||(io=1,process.env.NODE_ENV!=="production"&&function(){var r=ke,e=Symbol.for("react.element"),t=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),k=Symbol.for("react.offscreen"),h=Symbol.iterator,g="@@iterator";function f(m){if(m===null||typeof m!="object")return null;var S=h&&m[h]||m[g];return typeof S=="function"?S:null}var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(m){{for(var S=arguments.length,L=new Array(S>1?S-1:0),P=1;P<S;P++)L[P-1]=arguments[P];w("error",m,L)}}function w(m,S,L){{var P=v.ReactDebugCurrentFrame,X=P.getStackAddendum();X!==""&&(S+="%s",L=L.concat([X]));var J=L.map(function(W){return String(W)});J.unshift("Warning: "+S),Function.prototype.apply.call(console[m],console,J)}}var E=!1,x=!1,I=!1,V=!1,_=!1,T;T=Symbol.for("react.module.reference");function O(m){return!!(typeof m=="string"||typeof m=="function"||m===o||m===i||_||m===n||m===l||m===u||V||m===k||E||x||I||typeof m=="object"&&m!==null&&(m.$$typeof===p||m.$$typeof===d||m.$$typeof===s||m.$$typeof===a||m.$$typeof===c||m.$$typeof===T||m.getModuleId!==void 0))}function H(m,S,L){var P=m.displayName;if(P)return P;var X=S.displayName||S.name||"";return X!==""?L+"("+X+")":L}function K(m){return m.displayName||"Context"}function D(m){if(m==null)return null;if(typeof m.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case o:return"Fragment";case t:return"Portal";case i:return"Profiler";case n:return"StrictMode";case l:return"Suspense";case u:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case a:var S=m;return K(S)+".Consumer";case s:var L=m;return K(L._context)+".Provider";case c:return H(m,m.render,"ForwardRef");case d:var P=m.displayName||null;return P!==null?P:D(m.type)||"Memo";case p:{var X=m,J=X._payload,W=X._init;try{return D(W(J))}catch{return null}}}return null}var Z=Object.assign,C=0,B,M,A,$,F,ee,G;function ve(){}ve.__reactDisabledLog=!0;function hs(){{if(C===0){B=console.log,M=console.info,A=console.warn,$=console.error,F=console.group,ee=console.groupCollapsed,G=console.groupEnd;var m={configurable:!0,enumerable:!0,value:ve,writable:!0};Object.defineProperties(console,{info:m,log:m,warn:m,error:m,group:m,groupCollapsed:m,groupEnd:m})}C++}}function us(){{if(C--,C===0){var m={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:Z({},m,{value:B}),info:Z({},m,{value:M}),warn:Z({},m,{value:A}),error:Z({},m,{value:$}),group:Z({},m,{value:F}),groupCollapsed:Z({},m,{value:ee}),groupEnd:Z({},m,{value:G})})}C<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Vt=v.ReactCurrentDispatcher,Yt;function pt(m,S,L){{if(Yt===void 0)try{throw Error()}catch(X){var P=X.stack.trim().match(/\n( *(at )?)/);Yt=P&&P[1]||""}return`
`+Yt+m}}var Kt=!1,ft;{var ps=typeof WeakMap=="function"?WeakMap:Map;ft=new ps}function Zo(m,S){if(!m||Kt)return"";{var L=ft.get(m);if(L!==void 0)return L}var P;Kt=!0;var X=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var J;J=Vt.current,Vt.current=null,hs();try{if(S){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Ce){P=Ce}Reflect.construct(m,[],W)}else{try{W.call()}catch(Ce){P=Ce}m.call(W.prototype)}}else{try{throw Error()}catch(Ce){P=Ce}m()}}catch(Ce){if(Ce&&P&&typeof Ce.stack=="string"){for(var U=Ce.stack.split(`
`),se=P.stack.split(`
`),te=U.length-1,oe=se.length-1;te>=1&&oe>=0&&U[te]!==se[oe];)oe--;for(;te>=1&&oe>=0;te--,oe--)if(U[te]!==se[oe]){if(te!==1||oe!==1)do if(te--,oe--,oe<0||U[te]!==se[oe]){var he=`
`+U[te].replace(" at new "," at ");return m.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",m.displayName)),typeof m=="function"&&ft.set(m,he),he}while(te>=1&&oe>=0);break}}}finally{Kt=!1,Vt.current=J,us(),Error.prepareStackTrace=X}var Ve=m?m.displayName||m.name:"",hn=Ve?pt(Ve):"";return typeof m=="function"&&ft.set(m,hn),hn}function fs(m,S,L){return Zo(m,!1)}function gs(m){var S=m.prototype;return!!(S&&S.isReactComponent)}function gt(m,S,L){if(m==null)return"";if(typeof m=="function")return Zo(m,gs(m));if(typeof m=="string")return pt(m);switch(m){case l:return pt("Suspense");case u:return pt("SuspenseList")}if(typeof m=="object")switch(m.$$typeof){case c:return fs(m.render);case d:return gt(m.type,S,L);case p:{var P=m,X=P._payload,J=P._init;try{return gt(J(X),S,L)}catch{}}}return""}var mt=Object.prototype.hasOwnProperty,Jo={},Qo=v.ReactDebugCurrentFrame;function bt(m){if(m){var S=m._owner,L=gt(m.type,m._source,S?S.type:null);Qo.setExtraStackFrame(L)}else Qo.setExtraStackFrame(null)}function ms(m,S,L,P,X){{var J=Function.call.bind(mt);for(var W in m)if(J(m,W)){var U=void 0;try{if(typeof m[W]!="function"){var se=Error((P||"React class")+": "+L+" type `"+W+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof m[W]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw se.name="Invariant Violation",se}U=m[W](S,W,P,L,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(te){U=te}U&&!(U instanceof Error)&&(bt(X),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",P||"React class",L,W,typeof U),bt(null)),U instanceof Error&&!(U.message in Jo)&&(Jo[U.message]=!0,bt(X),b("Failed %s type: %s",L,U.message),bt(null))}}}var bs=Array.isArray;function Xt(m){return bs(m)}function vs(m){{var S=typeof Symbol=="function"&&Symbol.toStringTag,L=S&&m[Symbol.toStringTag]||m.constructor.name||"Object";return L}}function ks(m){try{return en(m),!1}catch{return!0}}function en(m){return""+m}function tn(m){if(ks(m))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",vs(m)),en(m)}var it=v.ReactCurrentOwner,ys={key:!0,ref:!0,__self:!0,__source:!0},on,nn,Gt;Gt={};function ws(m){if(mt.call(m,"ref")){var S=Object.getOwnPropertyDescriptor(m,"ref").get;if(S&&S.isReactWarning)return!1}return m.ref!==void 0}function xs(m){if(mt.call(m,"key")){var S=Object.getOwnPropertyDescriptor(m,"key").get;if(S&&S.isReactWarning)return!1}return m.key!==void 0}function Es(m,S){if(typeof m.ref=="string"&&it.current&&S&&it.current.stateNode!==S){var L=D(it.current.type);Gt[L]||(b('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',D(it.current.type),m.ref),Gt[L]=!0)}}function Cs(m,S){{var L=function(){on||(on=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",S))};L.isReactWarning=!0,Object.defineProperty(m,"key",{get:L,configurable:!0})}}function Ss(m,S){{var L=function(){nn||(nn=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",S))};L.isReactWarning=!0,Object.defineProperty(m,"ref",{get:L,configurable:!0})}}var Ts=function(m,S,L,P,X,J,W){var U={$$typeof:e,type:m,key:S,ref:L,props:W,_owner:J};return U._store={},Object.defineProperty(U._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(U,"_self",{configurable:!1,enumerable:!1,writable:!1,value:P}),Object.defineProperty(U,"_source",{configurable:!1,enumerable:!1,writable:!1,value:X}),Object.freeze&&(Object.freeze(U.props),Object.freeze(U)),U};function _s(m,S,L,P,X){{var J,W={},U=null,se=null;L!==void 0&&(tn(L),U=""+L),xs(S)&&(tn(S.key),U=""+S.key),ws(S)&&(se=S.ref,Es(S,X));for(J in S)mt.call(S,J)&&!ys.hasOwnProperty(J)&&(W[J]=S[J]);if(m&&m.defaultProps){var te=m.defaultProps;for(J in te)W[J]===void 0&&(W[J]=te[J])}if(U||se){var oe=typeof m=="function"?m.displayName||m.name||"Unknown":m;U&&Cs(W,oe),se&&Ss(W,oe)}return Ts(m,U,se,X,P,it.current,W)}}var Zt=v.ReactCurrentOwner,rn=v.ReactDebugCurrentFrame;function We(m){if(m){var S=m._owner,L=gt(m.type,m._source,S?S.type:null);rn.setExtraStackFrame(L)}else rn.setExtraStackFrame(null)}var Jt;Jt=!1;function Qt(m){return typeof m=="object"&&m!==null&&m.$$typeof===e}function sn(){{if(Zt.current){var m=D(Zt.current.type);if(m)return`

Check the render method of \``+m+"`."}return""}}function Bs(m){{if(m!==void 0){var S=m.fileName.replace(/^.*[\\\/]/,""),L=m.lineNumber;return`

Check your code at `+S+":"+L+"."}return""}}var an={};function Ls(m){{var S=sn();if(!S){var L=typeof m=="string"?m:m.displayName||m.name;L&&(S=`

Check the top-level render call using <`+L+">.")}return S}}function ln(m,S){{if(!m._store||m._store.validated||m.key!=null)return;m._store.validated=!0;var L=Ls(S);if(an[L])return;an[L]=!0;var P="";m&&m._owner&&m._owner!==Zt.current&&(P=" It was passed a child from "+D(m._owner.type)+"."),We(m),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',L,P),We(null)}}function cn(m,S){{if(typeof m!="object")return;if(Xt(m))for(var L=0;L<m.length;L++){var P=m[L];Qt(P)&&ln(P,S)}else if(Qt(m))m._store&&(m._store.validated=!0);else if(m){var X=f(m);if(typeof X=="function"&&X!==m.entries)for(var J=X.call(m),W;!(W=J.next()).done;)Qt(W.value)&&ln(W.value,S)}}}function Is(m){{var S=m.type;if(S==null||typeof S=="string")return;var L;if(typeof S=="function")L=S.propTypes;else if(typeof S=="object"&&(S.$$typeof===c||S.$$typeof===d))L=S.propTypes;else return;if(L){var P=D(S);ms(L,m.props,"prop",P,m)}else if(S.PropTypes!==void 0&&!Jt){Jt=!0;var X=D(S);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",X||"Unknown")}typeof S.getDefaultProps=="function"&&!S.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ms(m){{for(var S=Object.keys(m.props),L=0;L<S.length;L++){var P=S[L];if(P!=="children"&&P!=="key"){We(m),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",P),We(null);break}}m.ref!==null&&(We(m),b("Invalid attribute `ref` supplied to `React.Fragment`."),We(null))}}function dn(m,S,L,P,X,J){{var W=O(m);if(!W){var U="";(m===void 0||typeof m=="object"&&m!==null&&Object.keys(m).length===0)&&(U+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var se=Bs(X);se?U+=se:U+=sn();var te;m===null?te="null":Xt(m)?te="array":m!==void 0&&m.$$typeof===e?(te="<"+(D(m.type)||"Unknown")+" />",U=" Did you accidentally export a JSX literal instead of a component?"):te=typeof m,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",te,U)}var oe=_s(m,S,L,X,J);if(oe==null)return oe;if(W){var he=S.children;if(he!==void 0)if(P)if(Xt(he)){for(var Ve=0;Ve<he.length;Ve++)cn(he[Ve],m);Object.freeze&&Object.freeze(he)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else cn(he,m)}return m===o?Ms(oe):Is(oe),oe}}function Os(m,S,L){return dn(m,S,L,!0)}function As(m,S,L){return dn(m,S,L,!1)}var Rs=As,Ns=Os;Ge.Fragment=o,Ge.jsx=Rs,Ge.jsxs=Ns}()),Ge}process.env.NODE_ENV==="production"?vt.exports=pn():vt.exports=fn();var z=vt.exports,gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function yt(){}Object.assign(yt,{default:yt,register:yt,revert:function(){},__esModule:!0}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(r){const e=(this.document||this.ownerDocument).querySelectorAll(r);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1}),Element.prototype.closest||(Element.prototype.closest=function(r){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(r))return e;e=e.parentElement||e.parentNode}while(e!==null);return null}),Element.prototype.prepend||(Element.prototype.prepend=function(r){const e=document.createDocumentFragment();Array.isArray(r)||(r=[r]),r.forEach(t=>{const o=t instanceof Node;e.appendChild(o?t:document.createTextNode(t))}),this.insertBefore(e,this.firstChild)}),Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(r){r=arguments.length===0?!0:!!r;const e=this.parentNode,t=window.getComputedStyle(e,null),o=parseInt(t.getPropertyValue("border-top-width")),n=parseInt(t.getPropertyValue("border-left-width")),i=this.offsetTop-e.offsetTop<e.scrollTop,s=this.offsetTop-e.offsetTop+this.clientHeight-o>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,c=this.offsetLeft-e.offsetLeft+this.clientWidth-n>e.scrollLeft+e.clientWidth,l=i&&!s;(i||s)&&r&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-o+this.clientHeight/2),(a||c)&&r&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-n+this.clientWidth/2),(i||s||a||c)&&!r&&this.scrollIntoView(l)}),window.requestIdleCallback=window.requestIdleCallback||function(r){const e=Date.now();return setTimeout(function(){r({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(r){clearTimeout(r)};let mn=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");var ro=(r=>(r.VERBOSE="VERBOSE",r.INFO="INFO",r.WARN="WARN",r.ERROR="ERROR",r))(ro||{});const N={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},bn={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function Ze(r,e,t="log",o,n="color: inherit"){if(!("console"in window)||!window.console[t])return;const i=["info","log","warn","error"].includes(t),s=[];switch(Ze.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!i||r)return;break}o&&s.push(o);const a="Editor.js 2.29.1";r&&(i?(s.unshift(`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`,n),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{i?o?console[t](`${e} %o`,...s):console[t](e,...s):console[t](e)}catch{}}Ze.logLevel="VERBOSE";function vn(r){Ze.logLevel=r}const Y=Ze.bind(window,!1),ue=Ze.bind(window,!0);function Le(r){return Object.prototype.toString.call(r).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Q(r){return Le(r)==="function"||Le(r)==="asyncfunction"}function ie(r){return Le(r)==="object"}function Te(r){return Le(r)==="string"}function kn(r){return Le(r)==="boolean"}function so(r){return Le(r)==="number"}function ao(r){return Le(r)==="undefined"}function de(r){return r?Object.keys(r).length===0&&r.constructor===Object:!0}function lo(r){return r>47&&r<58||r===32||r===13||r===229||r>64&&r<91||r>95&&r<112||r>185&&r<193||r>218&&r<223}async function yn(r,e=()=>{},t=()=>{}){async function o(n,i,s){try{await n.function(n.data),await i(ao(n.data)?{}:n.data)}catch{s(ao(n.data)?{}:n.data)}}return r.reduce(async(n,i)=>(await n,o(i,e,t)),Promise.resolve())}function co(r){return Array.prototype.slice.call(r)}function rt(r,e){return function(){const t=this,o=arguments;window.setTimeout(()=>r.apply(t,o),e)}}function wn(r){return r.name.split(".").pop()}function xn(r){return/^[-\w]+\/([-+\w]+|\*)$/.test(r)}function ho(r,e,t){let o;return(...n)=>{const i=this,s=()=>{o=null,t||r.apply(i,n)},a=t&&!o;window.clearTimeout(o),o=window.setTimeout(s,e),a&&r.apply(i,n)}}function wt(r,e,t=void 0){let o,n,i,s=null,a=0;t||(t={});const c=function(){a=t.leading===!1?0:Date.now(),s=null,i=r.apply(o,n),s||(o=n=null)};return function(){const l=Date.now();!a&&t.leading===!1&&(a=l);const u=e-(l-a);return o=this,n=arguments,u<=0||u>e?(s&&(clearTimeout(s),s=null),a=l,i=r.apply(o,n),s||(o=n=null)):!s&&t.trailing!==!1&&(s=setTimeout(c,u)),i}}function En(){const r={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(r).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(r[e]=!0),r}function Ae(r){return r[0].toUpperCase()+r.slice(1)}function xt(r,...e){if(!e.length)return r;const t=e.shift();if(ie(r)&&ie(t))for(const o in t)ie(t[o])?(r[o]||Object.assign(r,{[o]:{}}),xt(r[o],t[o])):Object.assign(r,{[o]:t[o]});return xt(r,...e)}function st(r){const e=En();return r=r.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e.mac?r=r.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):r=r.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),r}function Cn(r){try{return new URL(r).href}catch{}return r.substring(0,2)==="//"?window.location.protocol+r:window.location.origin+r}function Sn(){return mn(10)}function Tn(r){window.open(r,"_blank")}function _n(r=""){return`${r}${Math.floor(Math.random()*1e8).toString(16)}`}function Et(r,e,t){const o=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;r&&ue(o,"warn")}function Re(r,e,t){const o=t.value?"value":"get",n=t[o],i=`#${e}Cache`;if(t[o]=function(...s){return this[i]===void 0&&(this[i]=n.apply(this,...s)),this[i]},o==="get"&&t.set){const s=t.set;t.set=function(a){delete r[i],s.apply(this,a)}}return t}const uo=650;function Ie(){return window.matchMedia(`(max-width: ${uo}px)`).matches}const po=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Bn(r,e){const t=Array.isArray(r)||ie(r),o=Array.isArray(e)||ie(e);return t||o?JSON.stringify(r)===JSON.stringify(e):r===e}let y=class ae{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,o={}){const n=document.createElement(e);Array.isArray(t)?n.classList.add(...t):t&&n.classList.add(t);for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i]);return n}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(o=>e.appendChild(o)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(o=>e.prepend(o))):e.prepend(t)}static swap(e,t){const o=document.createElement("div"),n=e.parentNode;n.insertBefore(o,e),n.insertBefore(e,t),n.insertBefore(t,o),n.removeChild(o)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return co(e.querySelectorAll(ae.allInputsSelector)).reduce((t,o)=>ae.isNativeInput(o)||ae.containsOnlyInlineElements(o)?[...t,o]:[...t,...ae.getDeepestBlockElements(o)],[])}static getDeepestNode(e,t=!1){const o=t?"lastChild":"firstChild",n=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[o]){let i=e[o];if(ae.isSingleTag(i)&&!ae.isNativeInput(i)&&!ae.isLineBreakTag(i))if(i[n])i=i[n];else if(i.parentNode[n])i=i.parentNode[n];else return i.parentNode;return this.getDeepestNode(i,t)}return e}static isElement(e){return so(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return so(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(ae.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=ae.isContentEditable(e);return t}static isNodeEmpty(e,t){let o;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?o=e.value:o=e.textContent.replace("​",""),t&&(o=o.replace(new RegExp(t,"g"),"")),o.trim().length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,t){e.normalize();const o=[e];for(;o.length>0;)if(e=o.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,t))return!1;e.childNodes&&o.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=ae.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return ae.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;Te(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const o=n=>!ae.blockElements.includes(n.tagName.toLowerCase())&&Array.from(n.children).every(o);return Array.from(t.children).every(o)}static getDeepestBlockElements(e){return ae.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,o)=>[...t,...ae.getDeepestBlockElements(o)],[])}static getHolder(e){return Te(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop,i=t.top+n,s=t.left+o;return{top:i,left:s,bottom:i+t.height,right:s+t.width}}};const Ln={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},In={Text:"",Link:"",Bold:"",Italic:""},Mn={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},On={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},fo={ui:Ln,toolNames:In,tools:Mn,blockTunes:On},Ne=class{static ui(r,e){return Ne._t(r,e)}static t(r,e){return Ne._t(r,e)}static setDictionary(r){Ne.currentDictionary=r}static _t(r,e){const t=Ne.getNamespace(r);return!t||!t[e]?e:t[e]}static getNamespace(r){return r.split(".").reduce((e,t)=>!e||!Object.keys(e).length?{}:e[t],Ne.currentDictionary)}};let le=Ne;le.currentDictionary=fo;class go extends Error{}class at{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const o=n=>{const i=t(n),s=this.subscribers[e].indexOf(o);return s!==-1&&this.subscribers[e].splice(s,1),i};this.subscribers[e].push(o)}emit(e,t){de(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((o,n)=>{const i=n(o);return i!==void 0?i:o},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let o=0;o<this.subscribers[e].length;o++)if(this.subscribers[e][o]===t){delete this.subscribers[e][o];break}}destroy(){this.subscribers={}}}function Me(r){Object.setPrototypeOf(this,{get id(){return r.id},get name(){return r.name},get config(){return r.config},get holder(){return r.holder},get isEmpty(){return r.isEmpty},get selected(){return r.selected},set stretched(e){r.stretched=e},get stretched(){return r.stretched},get focusable(){return r.focusable},call(e,t){return r.call(e,t)},save(){return r.save()},validate(e){return r.validate(e)},dispatchChange(){r.dispatchChange()}})}class Ct{constructor(){this.allListeners=[]}on(e,t,o,n=!1){const i=_n("l"),s={id:i,element:e,eventType:t,handler:o,options:n};if(!this.findOne(e,t,o))return this.allListeners.push(s),e.addEventListener(t,o,n),i}off(e,t,o,n){const i=this.findAll(e,t,o);i.forEach((s,a)=>{const c=this.allListeners.indexOf(i[a]);c>-1&&(this.allListeners.splice(c,1),s.element.removeEventListener(s.eventType,s.handler,s.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,o){const n=this.findAll(e,t,o);return n.length>0?n[0]:null}findAll(e,t,o){let n;const i=e?this.findByEventTarget(e):[];return e&&t&&o?n=i.filter(s=>s.eventType===t&&s.handler===o):e&&t?n=i.filter(s=>s.eventType===t):n=i,n}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}}let q=class un{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new Ct,this.readOnlyMutableListeners={on:(o,n,i,s=!1)=>{this.mutableListenerIds.push(this.listeners.on(o,n,i,s))},clearAll:()=>{for(const o of this.mutableListenerIds)this.listeners.offById(o);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===un)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},R=class _e{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?y.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(_e.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let o=null;return t&&t instanceof Element&&(o=t.closest(`.${_e.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let o=null;return t&&t instanceof Element&&(o=t.closest(`.${_e.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!_e.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,o={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),o.x=t.boundingLeft,o.y=t.boundingTop,o.width=t.boundingWidth,o.height=t.boundingHeight,o;if(!window.getSelection)return Y("Method window.getSelection is not supported","warn"),o;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return Y("Method SelectionUtils.rangeCount is not supported","warn"),o;if(e.rangeCount===0)return o;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(o=t.getBoundingClientRect()),o.x===0&&o.y===0){const n=document.createElement("span");if(n.getBoundingClientRect){n.appendChild(document.createTextNode("​")),t.insertNode(n),o=n.getBoundingClientRect();const i=n.parentNode;i.removeChild(n),i.normalize()}}return o}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const o=document.createRange(),n=window.getSelection();return y.isNativeInput(e)?y.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(o.setStart(e,t),o.setEnd(e,t),n.removeAllRanges(),n.addRange(o),o.getBoundingClientRect())}static isRangeInsideContainer(e){const t=_e.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=_e.range;if(e===null)return;const t=y.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return y.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=y.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=_e.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,o=10){const n=window.getSelection();let i=null;return!n||!n.anchorNode||!n.focusNode?null:([n.anchorNode,n.focusNode].forEach(s=>{let a=o;for(;a>0&&s.parentNode&&!(s.tagName===e&&(i=s,t&&s.classList&&!s.classList.contains(t)&&(i=null),i));)s=s.parentNode,a--}),i)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const o=document.createRange();o.selectNodeContents(e),t.addRange(o)}};function An(r,e){const{type:t,target:o,addedNodes:n,removedNodes:i}=r;if(o===e)return!0;if(["characterData","attributes"].includes(t)){const c=o.nodeType===Node.TEXT_NODE?o.parentNode:o;return e.contains(c)}const s=Array.from(n).some(c=>e.contains(c)),a=Array.from(i).some(c=>e.contains(c));return s||a}const St="redactor dom changed",mo="block changed",bo="fake cursor is about to be toggled",vo="fake cursor have been set";function ko(r,e){return r.mergeable&&r.name===e.name}function Rn(r,e){const t=e==null?void 0:e.export;return Q(t)?t(r):Te(t)?r[t]:(t!==void 0&&Y("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function Nn(r,e){const t=e==null?void 0:e.import;return Q(t)?t(r):Te(t)?{[t]:r}:(t!==void 0&&Y("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var ye=(r=>(r.APPEND_CALLBACK="appendCallback",r.RENDERED="rendered",r.MOVED="moved",r.UPDATED="updated",r.REMOVED="removed",r.ON_PASTE="onPaste",r))(ye||{});let we=class Be extends at{constructor({id:e=Sn(),data:t,tool:o,api:n,readOnly:i,tunesData:s},a){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(c=void 0)=>{const l=c===void 0,u=c instanceof InputEvent;!l&&!u&&this.detectToolRootChange(c);let d;l||u?d=!0:d=!(c.length>0&&c.every(p=>{const{addedNodes:k,removedNodes:h,target:g}=p;return[...Array.from(k),...Array.from(h),g].some(f=>(y.isElement(f)||(f=f.parentElement),f&&f.closest('[data-mutation-free="true"]')!==null))})),d&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=o.name,this.id=e,this.settings=o.settings,this.config=o.settings.config||{},this.api=n,this.editorEventBus=a||null,this.blockAPI=new Me(this),this.tool=o,this.toolInstance=o.create(t,this.blockAPI,i),this.tunes=o.tunes,this.composeTunes(s),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=y.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(o=>o===e||o.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!de(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return Q(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=y.isEmpty(this.pluginsContent,"/"),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var t,o;this.holder.classList.toggle(Be.CSS.selected,e);const n=e===!0&&R.isRangeInsideContainer(this.holder),i=e===!1&&R.isFakeCursorInsideContainer(this.holder);(n||i)&&((t=this.editorEventBus)==null||t.emit(bo,{state:e}),n?R.addFakeCursor():R.removeFakeCursor(this.holder),(o=this.editorEventBus)==null||o.emit(vo,{state:e}))}get selected(){return this.holder.classList.contains(Be.CSS.selected)}set stretched(e){this.holder.classList.toggle(Be.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(Be.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(Be.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(Q(this.toolInstance[e])){e==="appendCallback"&&Y("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(o){Y(`Error during '${e}' call: ${o.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([i,s])=>{if(Q(s.save))try{t[i]=s.save()}catch(a){Y(`Tune ${s.constructor.name} save method throws an Error %o`,"warn",a)}});const o=window.performance.now();let n;return Promise.resolve(e).then(i=>(n=window.performance.now(),{id:this.id,tool:this.name,data:i,tunes:t,time:n-o})).catch(i=>{Y(`Saving process for ${this.name} tool failed due to the ${i}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=document.createElement("div"),t=[],o=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],n=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(i=>i.render());return[o,n].flat().forEach(i=>{y.isElement(i)?e.appendChild(i):Array.isArray(i)?t.push(...i):t.push(i)}),[t,e]}updateCurrentInput(){this.currentInput=y.isNativeInput(document.activeElement)||!R.anchorNode?document.activeElement:R.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),Q(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data;return e.find(o=>Object.entries(o.data).some(([n,i])=>t[n]&&Bn(t[n],i)))}async exportDataAsString(){const e=await this.data;return Rn(e,this.tool.conversionConfig)}compose(){const e=y.make("div",Be.CSS.wrapper),t=y.make("div",Be.CSS.content),o=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=o,t.appendChild(this.toolRenderedElement);let n=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(i=>{if(Q(i.wrap))try{n=i.wrap(n)}catch(s){Y(`Tune ${i.constructor.name} wrap method throws an Error %o`,"warn",s)}}),e.appendChild(n),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,o])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=o)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),y.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),y.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:o}=t;o.some(n=>An(n,this.toolRenderedElement))&&this.didMutated(o)},(e=this.editorEventBus)==null||e.on(St,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(St,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const o=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=o}})}dropInputsCache(){this.cachedInputs=[]}};class Pn extends q{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},o={},n,i,s,a)=>{const c=this.Editor.BlockManager.insert({id:a,tool:e,data:t,index:n,needToFocus:i,replace:s});return new Me(c)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new we({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t)=>{const{BlockManager:o}=this.Editor,n=o.getBlockById(e);if(n===void 0)throw new Error(`Block with id "${e}" not found`);const i=await o.update(n,t);return new Me(i)},this.convert=(e,t,o)=>{var n,i;const{BlockManager:s,Tools:a}=this.Editor,c=s.getBlockById(e);if(!c)throw new Error(`Block with id "${e}" not found`);const l=a.blockTools.get(c.name),u=a.blockTools.get(t);if(!u)throw new Error(`Block Tool with type "${t}" not found`);const d=((n=l==null?void 0:l.conversionConfig)==null?void 0:n.export)!==void 0,p=((i=u.conversionConfig)==null?void 0:i.import)!==void 0;if(d&&p)s.convert(c,t,o);else{const k=[d?!1:Ae(c.name),p?!1:Ae(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${c.name}" to "${t}" is not possible. ${k} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const o=e.map(({id:n,type:i,data:s})=>this.Editor.BlockManager.composeBlock({id:n,tool:i||this.config.defaultBlock,data:s}));return this.Editor.BlockManager.insertMany(o,t),o.map(n=>new Me(n))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){ue("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){ue("There is no block at index `"+e+"`","warn");return}return new Me(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(ue("There is no block with id `"+e+"`","warn"),null):new Me(t)}swap(e,t){Y("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){ue(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){Et(!0,"blocks.stretchBlock()","BlockAPI");const o=this.Editor.BlockManager.getBlockByIndex(e);o&&(o.stretched=t)}insertNewBlock(){Y("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}class Dn extends q{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.blocks[e]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],t,o),!0):!1,this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class jn extends q{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}}class Tt extends q{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{ue("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:t=>le.t(Tt.getNamespace(e),t)})}}class Fn extends q{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}}class Hn extends q{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class Un extends q{get methods(){return{on:(e,t,o,n)=>this.on(e,t,o,n),off:(e,t,o,n)=>this.off(e,t,o,n),offById:e=>this.offById(e)}}on(e,t,o,n){return this.listeners.on(e,t,o,n)}off(e,t,o,n){this.listeners.off(e,t,o,n)}offById(e){this.listeners.offById(e)}}var _t={},$n={get exports(){return _t},set exports(r){_t=r}};(function(r,e){(function(t,o){r.exports=o()})(window,function(){return function(t){var o={};function n(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=o,n.d=function(i,s,a){n.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,s){if(1&s&&(i=n(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var c in i)n.d(a,c,(function(l){return i[l]}).bind(null,c));return a},n.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(s,"a",s),s},n.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},n.p="/",n(n.s=0)}([function(t,o,n){n(1),t.exports=function(){var i=n(6),s="cdx-notify--bounce-in",a=null;return{show:function(c){if(c.message){(function(){if(a)return!0;a=i.getWrapper(),document.body.appendChild(a)})();var l=null,u=c.time||8e3;switch(c.type){case"confirm":l=i.confirm(c);break;case"prompt":l=i.prompt(c);break;default:l=i.alert(c),window.setTimeout(function(){l.remove()},u)}a.appendChild(l),l.classList.add(s)}}}}()},function(t,o,n){var i=n(2);typeof i=="string"&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s),i.locals&&(t.exports=i.locals)},function(t,o,n){(t.exports=n(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,o){t.exports=function(n){var i=[];return i.toString=function(){return this.map(function(s){var a=function(c,l){var u=c[1]||"",d=c[3];if(!d)return u;if(l&&typeof btoa=="function"){var p=(h=d,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(h))))+" */"),k=d.sources.map(function(g){return"/*# sourceURL="+d.sourceRoot+g+" */"});return[u].concat(k).concat([p]).join(`
`)}var h;return[u].join(`
`)}(s,n);return s[2]?"@media "+s[2]+"{"+a+"}":a}).join("")},i.i=function(s,a){typeof s=="string"&&(s=[[null,s,""]]);for(var c={},l=0;l<this.length;l++){var u=this[l][0];typeof u=="number"&&(c[u]=!0)}for(l=0;l<s.length;l++){var d=s[l];typeof d[0]=="number"&&c[d[0]]||(a&&!d[2]?d[2]=a:a&&(d[2]="("+d[2]+") and ("+a+")"),i.push(d))}},i}},function(t,o,n){var i,s,a={},c=(i=function(){return window&&document&&document.all&&!window.atob},function(){return s===void 0&&(s=i.apply(this,arguments)),s}),l=function(_){var T={};return function(O){if(typeof O=="function")return O();if(T[O]===void 0){var H=(function(K){return document.querySelector(K)}).call(this,O);if(window.HTMLIFrameElement&&H instanceof window.HTMLIFrameElement)try{H=H.contentDocument.head}catch{H=null}T[O]=H}return T[O]}}(),u=null,d=0,p=[],k=n(5);function h(_,T){for(var O=0;O<_.length;O++){var H=_[O],K=a[H.id];if(K){K.refs++;for(var D=0;D<K.parts.length;D++)K.parts[D](H.parts[D]);for(;D<H.parts.length;D++)K.parts.push(E(H.parts[D],T))}else{var Z=[];for(D=0;D<H.parts.length;D++)Z.push(E(H.parts[D],T));a[H.id]={id:H.id,refs:1,parts:Z}}}}function g(_,T){for(var O=[],H={},K=0;K<_.length;K++){var D=_[K],Z=T.base?D[0]+T.base:D[0],C={css:D[1],media:D[2],sourceMap:D[3]};H[Z]?H[Z].parts.push(C):O.push(H[Z]={id:Z,parts:[C]})}return O}function f(_,T){var O=l(_.insertInto);if(!O)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var H=p[p.length-1];if(_.insertAt==="top")H?H.nextSibling?O.insertBefore(T,H.nextSibling):O.appendChild(T):O.insertBefore(T,O.firstChild),p.push(T);else if(_.insertAt==="bottom")O.appendChild(T);else{if(typeof _.insertAt!="object"||!_.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var K=l(_.insertInto+" "+_.insertAt.before);O.insertBefore(T,K)}}function v(_){if(_.parentNode===null)return!1;_.parentNode.removeChild(_);var T=p.indexOf(_);T>=0&&p.splice(T,1)}function b(_){var T=document.createElement("style");return _.attrs.type===void 0&&(_.attrs.type="text/css"),w(T,_.attrs),f(_,T),T}function w(_,T){Object.keys(T).forEach(function(O){_.setAttribute(O,T[O])})}function E(_,T){var O,H,K,D;if(T.transform&&_.css){if(!(D=T.transform(_.css)))return function(){};_.css=D}if(T.singleton){var Z=d++;O=u||(u=b(T)),H=V.bind(null,O,Z,!1),K=V.bind(null,O,Z,!0)}else _.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(O=function(C){var B=document.createElement("link");return C.attrs.type===void 0&&(C.attrs.type="text/css"),C.attrs.rel="stylesheet",w(B,C.attrs),f(C,B),B}(T),H=(function(C,B,M){var A=M.css,$=M.sourceMap,F=B.convertToAbsoluteUrls===void 0&&$;(B.convertToAbsoluteUrls||F)&&(A=k(A)),$&&(A+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify($))))+" */");var ee=new Blob([A],{type:"text/css"}),G=C.href;C.href=URL.createObjectURL(ee),G&&URL.revokeObjectURL(G)}).bind(null,O,T),K=function(){v(O),O.href&&URL.revokeObjectURL(O.href)}):(O=b(T),H=(function(C,B){var M=B.css,A=B.media;if(A&&C.setAttribute("media",A),C.styleSheet)C.styleSheet.cssText=M;else{for(;C.firstChild;)C.removeChild(C.firstChild);C.appendChild(document.createTextNode(M))}}).bind(null,O),K=function(){v(O)});return H(_),function(C){if(C){if(C.css===_.css&&C.media===_.media&&C.sourceMap===_.sourceMap)return;H(_=C)}else K()}}t.exports=function(_,T){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(T=T||{}).attrs=typeof T.attrs=="object"?T.attrs:{},T.singleton||typeof T.singleton=="boolean"||(T.singleton=c()),T.insertInto||(T.insertInto="head"),T.insertAt||(T.insertAt="bottom");var O=g(_,T);return h(O,T),function(H){for(var K=[],D=0;D<O.length;D++){var Z=O[D];(C=a[Z.id]).refs--,K.push(C)}for(H&&h(g(H,T),T),D=0;D<K.length;D++){var C;if((C=K[D]).refs===0){for(var B=0;B<C.parts.length;B++)C.parts[B]();delete a[C.id]}}}};var x,I=(x=[],function(_,T){return x[_]=T,x.filter(Boolean).join(`
`)});function V(_,T,O,H){var K=O?"":H.css;if(_.styleSheet)_.styleSheet.cssText=I(T,K);else{var D=document.createTextNode(K),Z=_.childNodes;Z[T]&&_.removeChild(Z[T]),Z.length?_.insertBefore(D,Z[T]):_.appendChild(D)}}},function(t,o){t.exports=function(n){var i=typeof window<"u"&&window.location;if(!i)throw new Error("fixUrls requires window.location");if(!n||typeof n!="string")return n;var s=i.protocol+"//"+i.host,a=s+i.pathname.replace(/\/[^\/]*$/,"/");return n.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(c,l){var u,d=l.trim().replace(/^"(.*)"$/,function(p,k){return k}).replace(/^'(.*)'$/,function(p,k){return k});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(d)?c:(u=d.indexOf("//")===0?d:d.indexOf("/")===0?s+d:a+d.replace(/^\.\//,""),"url("+JSON.stringify(u)+")")})}},function(t,o,n){var i,s,a,c,l,u,d,p,k;t.exports=(i="cdx-notifies",s="cdx-notify",a="cdx-notify__cross",c="cdx-notify__button--confirm",l="cdx-notify__button--cancel",u="cdx-notify__input",d="cdx-notify__button",p="cdx-notify__btns-wrapper",{alert:k=function(h){var g=document.createElement("DIV"),f=document.createElement("DIV"),v=h.message,b=h.style;return g.classList.add(s),b&&g.classList.add(s+"--"+b),g.innerHTML=v,f.classList.add(a),f.addEventListener("click",g.remove.bind(g)),g.appendChild(f),g},confirm:function(h){var g=k(h),f=document.createElement("div"),v=document.createElement("button"),b=document.createElement("button"),w=g.querySelector("."+a),E=h.cancelHandler,x=h.okHandler;return f.classList.add(p),v.innerHTML=h.okText||"Confirm",b.innerHTML=h.cancelText||"Cancel",v.classList.add(d),b.classList.add(d),v.classList.add(c),b.classList.add(l),E&&typeof E=="function"&&(b.addEventListener("click",E),w.addEventListener("click",E)),x&&typeof x=="function"&&v.addEventListener("click",x),v.addEventListener("click",g.remove.bind(g)),b.addEventListener("click",g.remove.bind(g)),f.appendChild(v),f.appendChild(b),g.appendChild(f),g},prompt:function(h){var g=k(h),f=document.createElement("div"),v=document.createElement("button"),b=document.createElement("input"),w=g.querySelector("."+a),E=h.cancelHandler,x=h.okHandler;return f.classList.add(p),v.innerHTML=h.okText||"Ok",v.classList.add(d),v.classList.add(c),b.classList.add(u),h.placeholder&&b.setAttribute("placeholder",h.placeholder),h.default&&(b.value=h.default),h.inputType&&(b.type=h.inputType),E&&typeof E=="function"&&w.addEventListener("click",E),x&&typeof x=="function"&&v.addEventListener("click",function(){x(b.value)}),v.addEventListener("click",g.remove.bind(g)),f.appendChild(b),f.appendChild(v),g.appendChild(f),g},getWrapper:function(){var h=document.createElement("DIV");return h.classList.add(i),h}})}])})})($n);const zn=kt(_t);class qn{show(e){zn.show(e)}}class Wn extends q{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new qn}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class Vn extends q{get methods(){const e=()=>this.isEnabled;return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var Bt={},Yn={get exports(){return Bt},set exports(r){Bt=r}};(function(r,e){(function(t,o){r.exports=o()})(gn,function(){function t(d){var p=d.tags,k=Object.keys(p),h=k.map(function(g){return typeof p[g]}).every(function(g){return g==="object"||g==="boolean"||g==="function"});if(!h)throw new Error("The configuration was invalid");this.config=d}var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function n(d){return o.indexOf(d.nodeName)!==-1}var i=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function s(d){return i.indexOf(d.nodeName)!==-1}t.prototype.clean=function(d){const p=document.implementation.createHTMLDocument(),k=p.createElement("div");return k.innerHTML=d,this._sanitize(p,k),k.innerHTML},t.prototype._sanitize=function(d,p){var k=a(d,p),h=k.firstChild();if(h)do{if(h.nodeType===Node.TEXT_NODE)if(h.data.trim()===""&&(h.previousElementSibling&&n(h.previousElementSibling)||h.nextElementSibling&&n(h.nextElementSibling))){p.removeChild(h),this._sanitize(d,p);break}else continue;if(h.nodeType===Node.COMMENT_NODE){p.removeChild(h),this._sanitize(d,p);break}var g=s(h),f;g&&(f=Array.prototype.some.call(h.childNodes,n));var v=!!p.parentNode,b=n(p)&&n(h)&&v,w=h.nodeName.toLowerCase(),E=c(this.config,w,h),x=g&&f;if(x||l(h,E)||!this.config.keepNestedBlockElements&&b){if(!(h.nodeName==="SCRIPT"||h.nodeName==="STYLE"))for(;h.childNodes.length>0;)p.insertBefore(h.childNodes[0],h);p.removeChild(h),this._sanitize(d,p);break}for(var I=0;I<h.attributes.length;I+=1){var V=h.attributes[I];u(V,E,h)&&(h.removeAttribute(V.name),I=I-1)}this._sanitize(d,h)}while(h=k.nextSibling())};function a(d,p){return d.createTreeWalker(p,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function c(d,p,k){return typeof d.tags[p]=="function"?d.tags[p](k):d.tags[p]}function l(d,p){return typeof p>"u"?!0:typeof p=="boolean"?!p:!1}function u(d,p,k){var h=d.name.toLowerCase();return p===!0?!1:typeof p[h]=="function"?!p[h](d.value,k):typeof p[h]>"u"||p[h]===!1?!0:typeof p[h]=="string"?p[h]!==d.value:!1}return t})})(Yn);const Kn=Bt;function yo(r,e){return r.map(t=>{const o=Q(e)?e(t.tool):e;return de(o)||(t.data=Lt(t.data,o)),t})}function xe(r,e={}){const t={tags:e};return new Kn(t).clean(r)}function Lt(r,e){return Array.isArray(r)?Xn(r,e):ie(r)?Gn(r,e):Te(r)?Zn(r,e):r}function Xn(r,e){return r.map(t=>Lt(t,e))}function Gn(r,e){const t={};for(const o in r){if(!Object.prototype.hasOwnProperty.call(r,o))continue;const n=r[o],i=Jn(e[o])?e[o]:e;t[o]=Lt(n,i)}return t}function Zn(r,e){return ie(e)?xe(r,e):e===!1?xe(r,{}):r}function Jn(r){return ie(r)||kn(r)||Q(r)}class Qn extends q{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return xe(e,t)}}class ei extends q{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(ue(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class ti extends q{get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,t){return new R().findParentTag(e,t)}expandToTag(e){new R().expandToTag(e)}}class oi extends q{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class ni extends q{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){ue("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){ue("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var It={},ii={get exports(){return It},set exports(r){It=r}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(r,e){(function(t,o){r.exports=o()})(window,function(){return function(t){var o={};function n(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=o,n.d=function(i,s,a){n.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,s){if(1&s&&(i=n(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var c in i)n.d(a,c,(function(l){return i[l]}).bind(null,c));return a},n.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(s,"a",s),s},n.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},n.p="",n(n.s=0)}([function(t,o,n){t.exports=n(1)},function(t,o,n){n.r(o),n.d(o,"default",function(){return i});class i{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,c,l){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const u=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},l);if(u.hidingDelay&&(this.hidingDelay=u.hidingDelay),this.nodes.content.innerHTML="",typeof c=="string")this.nodes.content.appendChild(document.createTextNode(c));else{if(!(c instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof c+" given.");this.nodes.content.appendChild(c)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),u.placement){case"top":this.placeTop(a,u);break;case"left":this.placeLeft(a,u);break;case"right":this.placeRight(a,u);break;case"bottom":default:this.placeBottom(a,u)}u&&u.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},u.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,c,l){a.addEventListener("mouseenter",()=>{this.show(a,c,l)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const c=n(2),l=this.make("style",null,{textContent:c.toString(),id:a});this.prepend(document.head,l)}placeBottom(a,c){const l=a.getBoundingClientRect(),u=l.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,d=l.bottom+window.pageYOffset+this.offsetTop+c.marginTop;this.applyPlacement("bottom",u,d)}placeTop(a,c){const l=a.getBoundingClientRect(),u=l.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,d=l.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",u,d)}placeLeft(a,c){const l=a.getBoundingClientRect(),u=l.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-c.marginLeft,d=l.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",u,d)}placeRight(a,c){const l=a.getBoundingClientRect(),u=l.right+this.offsetRight+c.marginRight,d=l.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",u,d)}applyPlacement(a,c,l){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=c+"px",this.nodes.wrapper.style.top=l+"px"}make(a,c=null,l={}){const u=document.createElement(a);Array.isArray(c)?u.classList.add(...c):c&&u.classList.add(c);for(const d in l)l.hasOwnProperty(d)&&(u[d]=l[d]);return u}append(a,c){Array.isArray(c)?c.forEach(l=>a.appendChild(l)):a.appendChild(c)}prepend(a,c){Array.isArray(c)?(c=c.reverse()).forEach(l=>a.prepend(l)):a.prepend(c)}}},function(t,o){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(ii);const ri=kt(It);let pe=null;function Mt(){pe||(pe=new ri)}function si(r,e,t){Mt(),pe==null||pe.show(r,e,t)}function Ot(r=!1){Mt(),pe==null||pe.hide(r)}function Je(r,e,t){Mt(),pe==null||pe.onHover(r,e,t)}function ai(){pe==null||pe.destroy(),pe=null}class li extends q{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t})}get methods(){return{show:(e,t,o)=>this.show(e,t,o),hide:()=>this.hide(),onHover:(e,t,o)=>this.onHover(e,t,o)}}show(e,t,o){si(e,t,o)}hide(){Ot()}onHover(e,t,o){Je(e,t,o)}}class ci extends q{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function wo(r,e){const t={};return Object.entries(r).forEach(([o,n])=>{if(ie(n)){const i=e?`${e}.${o}`:o;Object.values(n).every(s=>Te(s))?t[o]=i:t[o]=wo(n,i);return}t[o]=n}),t}const fe=wo(fo);function di(r,e){const t={};return Object.keys(r).forEach(o=>{const n=e[o];n!==void 0?t[n]=r[o]:t[o]=r[o]}),t}const hi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',xo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',ui='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',pi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',fi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',gi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Eo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',mi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',bi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',vi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',ki='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',yi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';let Co=class ne{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(ne.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(ne.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(ne.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(ne.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(ne.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(ne.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const t=y.make("div",ne.CSS.container);return e.name&&(t.dataset.itemName=e.name),this.nodes.icon=y.make("div",ne.CSS.icon,{innerHTML:e.icon||fi}),t.appendChild(this.nodes.icon),t.appendChild(y.make("div",ne.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&t.appendChild(y.make("div",ne.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&t.classList.add(ne.CSS.active),e.isDisabled&&t.classList.add(ne.CSS.disabled),t}enableConfirmationMode(e){const t={...this.params,...e,confirmation:e.confirmation},o=this.make(t);this.nodes.root.innerHTML=o.innerHTML,this.nodes.root.classList.add(ne.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(ne.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(ne.CSS.noHover),this.nodes.root.classList.add(ne.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(e.confirmation===void 0)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(ne.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(ne.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}};const Qe=class{constructor(r,e){this.cursor=-1,this.items=[],this.items=r||[],this.focusedCssClass=e}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(r){r<this.items.length&&r>=-1&&(this.dropCursor(),this.cursor=r,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(r){this.items=r}next(){this.cursor=this.leafNodesAndReturnIndex(Qe.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(Qe.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(r){if(this.items.length===0)return this.cursor;let e=this.cursor;return e===-1?e=r===Qe.directions.RIGHT?-1:0:this.items[e].classList.remove(this.focusedCssClass),r===Qe.directions.RIGHT?e=(e+1)%this.items.length:e=(this.items.length+e-1)%this.items.length,y.canSetCaret(this.items[e])&&rt(()=>R.setCursor(this.items[e]),50)(),this.items[e].classList.add(this.focusedCssClass),e}};let Pe=Qe;Pe.directions={RIGHT:"right",LEFT:"left"};class Ee{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(this.isEventReadyForHandling(t))switch(Ee.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case N.TAB:this.handleTabPress(t);break;case N.LEFT:case N.UP:this.flipLeft();break;case N.RIGHT:case N.DOWN:this.flipRight();break;case N.ENTER:this.handleEnterPress(t);break}},this.iterator=new Pe(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Ee.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[N.TAB,N.LEFT,N.RIGHT,N.ENTER,N.UP,N.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Pe.directions.LEFT:Pe.directions.RIGHT){case Pe.directions.RIGHT:this.flipRight();break;case Pe.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),Q(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}}class et{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:t,placeholder:o}){this.listeners=new Ct,this.items=e,this.onSearch=t,this.render(o)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=y.make("div",et.CSS.wrapper);const t=y.make("div",et.CSS.icon,{innerHTML:vi});this.input=y.make("input",et.CSS.input,{placeholder:e,tabIndex:-1}),this.wrapper.appendChild(t),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var t;const o=((t=e.title)==null?void 0:t.toLowerCase())||"",n=this.searchQuery.toLowerCase();return o.includes(n)}}const tt=class{lock(){po?this.lockHard():document.body.classList.add(tt.CSS.scrollLocked)}unlock(){po?this.unlockHard():document.body.classList.remove(tt.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(tt.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(tt.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let So=tt;So.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var wi=Object.defineProperty,xi=Object.getOwnPropertyDescriptor,Ei=(r,e,t,o)=>{for(var n=o>1?void 0:o?xi(e,t):e,i=r.length-1,s;i>=0;i--)(s=r[i])&&(n=(o?s(e,t,n):s(n))||n);return o&&n&&wi(e,t,n),n},ot=(r=>(r.Close="close",r))(ot||{});const re=class extends at{constructor(r){super(),this.scopeElement=document.body,this.listeners=new Ct,this.scrollLocker=new So,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(e=>e.isFocused).onFocus()},this.items=r.items.map(e=>new Co(e)),r.scopeElement!==void 0&&(this.scopeElement=r.scopeElement),r.messages&&(this.messages={...this.messages,...r.messages}),r.customContentFlippableItems&&(this.customContentFlippableItems=r.customContentFlippableItems),this.make(),r.customContent&&this.addCustomContent(r.customContent),r.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(re.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(re.CSS.overlayHidden),this.nodes.popover.classList.add(re.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&requestAnimationFrame(()=>{var r;(r=this.search)==null||r.focus()}),Ie()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(re.CSS.popoverOpened),this.nodes.popover.classList.remove(re.CSS.popoverOpenTop),this.nodes.overlay.classList.add(re.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(r=>r.reset()),this.search!==void 0&&this.search.clear(),Ie()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),Ie()&&this.scrollLocker.unlock()}make(){this.nodes.popover=y.make("div",[re.CSS.popover]),this.nodes.nothingFoundMessage=y.make("div",[re.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=y.make("div",[re.CSS.items]),this.items.forEach(r=>{this.nodes.items.appendChild(r.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",r=>{const e=this.getTargetItem(r);e!==void 0&&this.handleItemClick(e)}),this.nodes.wrapper=y.make("div"),this.nodes.overlay=y.make("div",[re.CSS.overlay,re.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new et({items:this.items,placeholder:this.messages.search,onSearch:(e,t)=>{this.items.forEach(n=>{const i=!t.includes(n);n.toggleHidden(i)}),this.toggleNothingFoundMessage(t.length===0),this.toggleCustomContent(e!=="");const o=e===""?this.flippableElements:t.map(n=>n.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(o))}});const r=this.search.getElement();r.classList.add(re.CSS.search),this.nodes.popover.insertBefore(r,this.nodes.popover.firstChild)}addCustomContent(r){this.nodes.customContent=r,this.nodes.customContent.classList.add(re.CSS.customContent),this.nodes.popover.insertBefore(r,this.nodes.popover.firstChild)}getTargetItem(r){return this.items.find(e=>r.composedPath().includes(e.getElement()))}handleItemClick(r){r.isDisabled||(this.items.filter(e=>e!==r).forEach(e=>e.reset()),r.handleClick(),this.toggleItemActivenessIfNeeded(r),r.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new Ee({items:this.flippableElements,focusedItemClass:Co.CSS.focused,allowedKeys:[N.TAB,N.UP,N.DOWN,N.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const r=this.items.map(e=>e.getElement());return(this.customContentFlippableItems||[]).concat(r)}get height(){let r=0;if(this.nodes.popover===null)return r;const e=this.nodes.popover.cloneNode(!0);return e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000px",e.classList.add(re.CSS.popoverOpened),document.body.appendChild(e),r=e.offsetHeight,e.remove(),r}get shouldOpenBottom(){const r=this.nodes.popover.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),t=this.height,o=r.top+t,n=r.top-t,i=Math.min(window.innerHeight,e.bottom);return n<e.top||o<=i}toggleNothingFoundMessage(r){this.nodes.nothingFoundMessage.classList.toggle(re.CSS.nothingFoundMessageDisplayed,r)}toggleCustomContent(r){var e;(e=this.nodes.customContent)==null||e.classList.toggle(re.CSS.customContentHidden,r)}toggleItemActivenessIfNeeded(r){if(r.toggle===!0&&r.toggleActive(),typeof r.toggle=="string"){const e=this.items.filter(t=>t.toggle===r.toggle);if(e.length===1){r.toggleActive();return}e.forEach(t=>{t.toggleActive(t===r)})}}};let At=re;Ei([Re],At.prototype,"height",1);class Ci extends q{constructor(){super(...arguments),this.opened=!1,this.selection=new R,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return(e=this.popover)==null?void 0:e.flipper}make(){this.nodes.wrapper=y.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const[t,o]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new At({searchable:!0,items:t.map(n=>this.resolveTuneAliases(n)),customContent:o,customContentFlippableItems:this.getControls(o),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:le.ui(fe.ui.popover,"Nothing found"),search:le.ui(fe.ui.popover,"Filter")}}),this.popover.on(ot.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,R.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(ot.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(e){const{StylesAPI:t}=this.Editor,o=e.querySelectorAll(`.${t.classes.settingsButton}, ${y.allInputsSelector}`);return Array.from(o)}resolveTuneAliases(e){const t=di(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}}class ce extends q{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=y.make("div",[ce.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=y.make("div",ce.CSS.conversionToolbarTools);const e=y.make("div",ce.CSS.conversionToolbarLabel,{textContent:le.ui(fe.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),y.append(this.nodes.wrapper,e),y.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),Q(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(ce.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(e=>e.button).filter(e=>!e.classList.contains(ce.CSS.conversionToolHidden))),this.flipper.focusFirst(),Q(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(ce.CSS.conversionToolbarShowed),Q(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(e,t){const{BlockManager:o,BlockSelection:n,InlineToolbar:i,Caret:s}=this.Editor;o.convert(this.Editor.BlockManager.currentBlock,e,t),n.clearSelection(),this.close(),i.close(),window.requestAnimationFrame(()=>{s.setToBlock(this.Editor.BlockManager.currentBlock,s.positions.END)})}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach(([t,o])=>{var n;const i=o.conversionConfig;!i||!i.import||(n=o.toolbox)==null||n.forEach(s=>this.addToolIfValid(t,s))})}addToolIfValid(e,t){de(t)||!t.icon||this.addTool(e,t)}addTool(e,t){var o;const n=y.make("div",[ce.CSS.conversionTool]),i=y.make("div",[ce.CSS.conversionToolIcon]);n.dataset.tool=e,i.innerHTML=t.icon,y.append(n,i),y.append(n,y.text(le.t(fe.toolNames,t.title||Ae(e))));const s=(o=this.Editor.Tools.blockTools.get(e))==null?void 0:o.shortcut;if(s){const a=y.make("span",ce.CSS.conversionToolSecondaryLabel,{innerText:st(s)});y.append(n,a)}y.append(this.nodes.tools,n),this.tools.push({name:e,button:n,toolboxItem:t}),this.listeners.on(n,"click",async()=>{await this.replaceWithBlock(e,t.data)})}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,t=await e.getActiveToolboxEntry();function o(n,i){return n.icon===i.icon&&n.title===i.title}this.tools.forEach(n=>{let i=!1;if(t){const s=o(t,n.toolboxItem);i=n.button.dataset.tool===e.name&&s}n.button.hidden=i,n.button.classList.toggle(ce.CSS.conversionToolHidden,i)})}enableFlipper(){this.flipper=new Ee({focusedItemClass:ce.CSS.conversionToolFocused})}}var Rt={},Si={get exports(){return Rt},set exports(r){Rt=r}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(r,e){(function(t,o){r.exports=o()})(window,function(){return function(t){var o={};function n(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=o,n.d=function(i,s,a){n.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,s){if(1&s&&(i=n(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var c in i)n.d(a,c,(function(l){return i[l]}).bind(null,c));return a},n.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(s,"a",s),s},n.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},n.p="",n(n.s=0)}([function(t,o,n){function i(c,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function s(c,l,u){return l&&i(c.prototype,l),u&&i(c,u),c}n.r(o);var a=function(){function c(l){var u=this;(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,c),this.commands={},this.keys={},this.name=l.name,this.parseShortcutName(l.name),this.element=l.on,this.callback=l.callback,this.executeShortcut=function(d){u.execute(d)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return s(c,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),s(c,[{key:"parseShortcutName",value:function(l){l=l.split("+");for(var u=0;u<l.length;u++){l[u]=l[u].toUpperCase();var d=!1;for(var p in c.supportedCommands)if(c.supportedCommands[p].includes(l[u])){d=this.commands[p]=!0;break}d||(this.keys[l[u]]=!0)}for(var k in c.supportedCommands)this.commands[k]||(this.commands[k]=!1)}},{key:"execute",value:function(l){var u,d={CMD:l.ctrlKey||l.metaKey,SHIFT:l.shiftKey,ALT:l.altKey},p=!0;for(u in this.commands)this.commands[u]!==d[u]&&(p=!1);var k,h=!0;for(k in this.keys)h=h&&l.keyCode===c.keyCodes[k];p&&h&&this.callback(l)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),c}();o.default=a}]).default})})(Si);const Ti=kt(Rt);class _i{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const t=new Ti({name:e.name,on:e.on,callback:e.handler}),o=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...o,t])}remove(e,t){const o=this.findShortcut(e,t);if(!o)return;o.remove();const n=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,n.filter(i=>i!==o))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:o})=>o===t)}}const De=new _i;var Bi=Object.defineProperty,Li=Object.getOwnPropertyDescriptor,To=(r,e,t,o)=>{for(var n=o>1?void 0:o?Li(e,t):e,i=r.length-1,s;i>=0;i--)(s=r[i])&&(n=(o?s(e,t,n):s(n))||n);return o&&n&&Bi(e,t,n),n},lt=(r=>(r.Opened="toolbox-opened",r.Closed="toolbox-closed",r.BlockAdded="toolbox-block-added",r))(lt||{});const _o=class extends at{constructor({api:r,tools:e,i18nLabels:t}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=r,this.tools=e,this.i18nLabels=t}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new At({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(ot.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(_o.CSS.toolbox),this.nodes.toolbox}hasFocus(){var r;return(r=this.popover)==null?void 0:r.hasFocus()}destroy(){var r;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(r=this.popover)==null||r.off(ot.Close,this.onPopoverClose)}toolButtonActivated(r,e){this.insertNewBlock(r,e)}open(){var r;this.isEmpty||((r=this.popover)==null||r.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var r;(r=this.popover)==null||r.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const r=[];return this.tools.forEach(e=>{e.toolbox&&r.push(e)}),r}get toolboxItemsToBeDisplayed(){const r=(e,t)=>({icon:e.icon,title:le.t(fe.toolNames,e.title||Ae(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut?st(t.shortcut):""});return this.toolsToBeDisplayed.reduce((e,t)=>(Array.isArray(t.toolbox)?t.toolbox.forEach(o=>{e.push(r(o,t))}):t.toolbox!==void 0&&e.push(r(t.toolbox,t)),e),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(r=>{const e=r.shortcut;e&&this.enableShortcutForTool(r.name,e)})}enableShortcutForTool(r,e){De.add({name:e,on:this.api.ui.nodes.redactor,handler:t=>{t.preventDefault();const o=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(o);if(n)try{this.api.blocks.convert(n.id,r),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(o,"end")});return}catch{}this.insertNewBlock(r)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(r=>{const e=r.shortcut;e&&De.remove(this.api.ui.nodes.redactor,e)})}async insertNewBlock(r,e){const t=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(t);if(!o)return;const n=o.isEmpty?t:t+1;let i;if(e){const a=await this.api.blocks.composeBlockData(r);i=Object.assign(a,e)}const s=this.api.blocks.insert(r,i,void 0,n,void 0,o.isEmpty);s.call(ye.APPEND_CALLBACK),this.api.caret.setToBlock(n),this.emit("toolbox-block-added",{block:s}),this.api.toolbar.close()}};let Nt=_o;To([Re],Nt.prototype,"toolsToBeDisplayed",1),To([Re],Nt.prototype,"toolboxItemsToBeDisplayed",1);const Bo="block hovered";async function Ii(r,e){const t=navigator.keyboard;return t&&(await t.getLayoutMap()).get(r)||e}class Mi extends q{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){Y("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){Y("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){Y("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:o}=this.Editor.UI,n=e.pluginsContent,i=window.getComputedStyle(n),s=parseInt(i.paddingTop,10),a=t.offsetHeight;let c;o?c=t.offsetTop+a:c=t.offsetTop+s,this.nodes.wrapper.style.top=`${Math.floor(c)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,t;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(t=this.toolboxInstance)==null||t.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}async make(){this.nodes.wrapper=y.make("div",this.CSS.toolbar),["content","actions"].forEach(i=>{this.nodes[i]=y.make("div",this.CSS[i])}),y.append(this.nodes.wrapper,this.nodes.content),y.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=y.make("div",this.CSS.plusButton,{innerHTML:bi}),y.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{Ot(!0),this.plusButtonClicked()},!1);const e=y.make("div");e.appendChild(document.createTextNode(le.ui(fe.ui.toolbar.toolbox,"Add"))),e.appendChild(y.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),Je(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=y.make("span",this.CSS.settingsToggler,{innerHTML:mi}),y.append(this.nodes.actions,this.nodes.settingsToggler);const t=y.make("div"),o=y.text(le.ui(fe.ui.blockTunes.toggler,"Click to tune")),n=await Ii("Slash","/");t.appendChild(o),t.appendChild(y.make("div",this.CSS.plusButtonShortcut,{textContent:st(`CMD + ${n}`)})),Je(this.nodes.settingsToggler,t,{hidingDelay:400}),y.append(this.nodes.actions,this.makeToolbox()),y.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),y.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Nt({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:le.ui(fe.ui.popover,"Filter"),nothingFound:le.ui(fe.ui.popover,"Nothing found")}}),this.toolboxInstance.on(lt.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(lt.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(lt.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:o}=this.Editor,n=t.getBlockById(e.id);n.inputs.length===0&&(n===t.lastBlock?(t.insertAtEnd(),o.setToBlock(t.lastBlock)):o.setToBlock(t.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),Ot(!0)},!0),Ie()||this.eventsDispatcher.on(Bo,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var ct=(r=>(r[r.Block=0]="Block",r[r.Inline=1]="Inline",r[r.Tune=2]="Tune",r))(ct||{}),dt=(r=>(r.Shortcut="shortcut",r.Toolbox="toolbox",r.EnabledInlineTools="inlineToolbar",r.EnabledBlockTunes="tunes",r.Config="config",r))(dt||{}),Lo=(r=>(r.Shortcut="shortcut",r.SanitizeConfig="sanitize",r))(Lo||{}),je=(r=>(r.IsEnabledLineBreaks="enableLineBreaks",r.Toolbox="toolbox",r.ConversionConfig="conversionConfig",r.IsReadOnlySupported="isReadOnlySupported",r.PasteConfig="pasteConfig",r))(je||{}),Pt=(r=>(r.IsInline="isInline",r.Title="title",r))(Pt||{}),Io=(r=>(r.IsTune="isTune",r))(Io||{});class Dt{constructor({name:e,constructable:t,config:o,api:n,isDefault:i,isInternal:s=!1,defaultPlaceholder:a}){this.api=n,this.name=e,this.constructable=t,this.config=o,this.isDefault=i,this.isInternal=s,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(Q(this.constructable.reset))return this.constructable.reset()}prepare(){if(Q(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class Oi extends q{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=Ie()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1,t=!0){e&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(t),this.move(),this.open(t),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([e,t])=>{const o=this.getToolShortcut(e);o&&De.remove(this.Editor.UI.nodes.redactor,o),Q(t.clear)&&t.clear()}),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=y.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=y.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=y.make("div",this.CSS.buttonsWrapper),this.nodes.actions=y.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()}),y.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),y.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),y.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let e=Array.from(this.buttonsList);e.unshift(this.nodes.conversionToggler),e=e.filter(t=>!t.hidden),this.flipper.activate(e)}move(){const e=R.rect,t=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),o={x:e.x-t.x,y:e.y+e.height-t.top+this.toolbarVerticalMargin};o.x+this.width+t.x>this.Editor.UI.contentRect.right&&(o.x=this.Editor.UI.contentRect.right-this.width-t.x),this.nodes.wrapper.style.left=Math.floor(o.x)+"px",this.nodes.wrapper.style.top=Math.floor(o.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],t=R.get(),o=R.text;if(!t||!t.anchorNode||t.isCollapsed||o.length<1)return!1;const n=y.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(t&&e.includes(n.tagName)||n.closest('[contenteditable="true"]')===null)return!1;const i=this.Editor.BlockManager.getBlock(t.anchorNode);return i?i.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=y.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=y.make("div",this.CSS.conversionTogglerContent);const e=y.make("div",this.CSS.conversionTogglerArrow,{innerHTML:xo});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(t=>{!t&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),Ie()===!1&&Je(this.nodes.conversionToggler,le.ui(fe.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:t}=e,o=t.name,n=t.tool.conversionConfig,i=n&&n.export;this.nodes.conversionToggler.hidden=!i,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!i);const s=await t.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=s.icon||s.title||Ae(o)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();y.append(this.nodes.wrapper,e)}async addToolsFiltered(e=!0){const t=R.get(),o=this.Editor.BlockManager.getBlock(t.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(o.tool.inlineTools.values()).forEach(n=>{this.addTool(n)}),e&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(e){const t=e.create(),o=t.render();if(!o){Y("Render method must return an instance of Node","warn",e.name);return}if(o.dataset.tool=e.name,this.nodes.buttons.appendChild(o),this.toolsInstances.set(e.name,t),Q(t.renderActions)){const a=t.renderActions();this.nodes.actions.appendChild(a)}this.listeners.on(o,"click",a=>{this.toolClicked(t),a.preventDefault()});const n=this.getToolShortcut(e.name);if(n)try{this.enableShortcuts(t,n)}catch{}const i=y.make("div"),s=le.t(fe.toolNames,e.title||Ae(e.name));i.appendChild(y.text(s)),n&&i.appendChild(y.make("div",this.CSS.inlineToolbarShortcut,{textContent:st(n)})),Ie()===!1&&Je(o,i,{placement:"top",hidingDelay:100}),t.checkState(R.get())}getToolShortcut(e){const{Tools:t}=this.Editor,o=t.inlineTools.get(e),n=t.internal.inlineTools;return Array.from(n.keys()).includes(e)?this.inlineTools[e][Lo.Shortcut]:o.shortcut}enableShortcuts(e,t){De.add({name:t,handler:o=>{const{currentBlock:n}=this.Editor.BlockManager;n&&n.tool.enabledInlineTools&&(o.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const t=R.range;e.surround(t),this.checkToolsState(),e.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(e=>{e.checkState(R.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,o])=>{e[t]=o.create()}),e}enableFlipper(){this.flipper=new Ee({focusedItemClass:this.CSS.focusedButton,allowedKeys:[N.ENTER,N.TAB]})}}class Ai extends q{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case N.BACKSPACE:this.backspace(e);break;case N.DELETE:this.delete(e);break;case N.ENTER:this.enter(e);break;case N.DOWN:case N.RIGHT:this.arrowRightAndDown(e);break;case N.UP:case N.LEFT:this.arrowLeftAndUp(e);break;case N.TAB:this.tabPressed(e);break}e.key==="/"&&!e.ctrlKey&&!e.metaKey&&this.slashPressed(),e.code==="Slash"&&(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.commandSlashPressed())}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&lo(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:o,Caret:n}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const i=o.removeSelectedBlocks(),s=o.insertDefaultBlockAtIndex(i,!0);n.setToBlock(s,n.positions.START),t.clearSelection(e)})}tabPressed(e){const{InlineToolbar:t,ConversionToolbar:o,Caret:n}=this.Editor;o.opened||t.opened||(e.shiftKey?n.navigatePrevious(!0):n.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(e){const{BlockManager:t,UI:o}=this.Editor;if(t.currentBlock.tool.isLineBreaksEnabled||o.someToolbarOpened&&o.someFlipperButtonFocused||e.shiftKey)return;let n=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?n=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):n=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(n),this.Editor.Toolbar.moveAndOpen(n),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:n,previousBlock:i}=t;if(!(!R.isCollapsed||!o.isAtStart)){if(e.preventDefault(),this.Editor.Toolbar.close(),n.currentInput!==n.firstInput){o.navigatePrevious();return}if(i!==null){if(i.isEmpty){t.removeBlock(i);return}if(n.isEmpty){t.removeBlock(n);const s=t.currentBlock;o.setToBlock(s,o.positions.END);return}ko(n,i)?this.mergeBlocks(i,n):o.setToBlock(i,o.positions.END)}}}delete(e){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:n,nextBlock:i}=t;if(!(!R.isCollapsed||!o.isAtEnd)){if(e.preventDefault(),this.Editor.Toolbar.close(),n.currentInput!==n.lastInput){o.navigateNext();return}if(i!==null){if(i.isEmpty){t.removeBlock(i);return}if(n.isEmpty){t.removeBlock(n),o.setToBlock(i,o.positions.START);return}ko(n,i)?this.mergeBlocks(n,i):o.setToBlock(i,o.positions.START)}}}mergeBlocks(e,t){const{BlockManager:o,Caret:n,Toolbar:i}=this.Editor;n.createShadow(e.pluginsContent),o.mergeBlocks(e,t).then(()=>{window.requestAnimationFrame(()=>{n.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),i.close()})})}arrowRightAndDown(e){const t=Ee.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===N.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.Toolbar.close();const o=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===N.DOWN&&o){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===N.DOWN||e.keyCode===N.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}rt(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(Ee.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===N.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const t=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===N.UP&&t){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===N.UP||e.keyCode===N.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}rt(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===N.ENTER&&this.Editor.Toolbar.toolbox.opened,o=e.keyCode===N.ENTER&&this.Editor.BlockSettings.opened,n=e.keyCode===N.ENTER&&this.Editor.InlineToolbar.opened,i=e.keyCode===N.ENTER&&this.Editor.ConversionToolbar.opened,s=e.keyCode===N.TAB;return!(e.shiftKey||s||t||o||n||i)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class jt{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return co(this.workingArea.children)}static set(e,t,o){return isNaN(Number(t))?(Reflect.set(e,t,o),!0):(e.insert(+t,o),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const o=this.blocks[t];y.swap(this.blocks[e].holder,o.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=o}move(e,t){const o=this.blocks.splice(t,1)[0],n=e-1,i=Math.max(0,n),s=this.blocks[i];e>0?this.insertToDOM(o,"afterend",s):this.insertToDOM(o,"beforebegin",s),this.blocks.splice(e,0,o);const a=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});o.call(ye.MOVED,a)}insert(e,t,o=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),o&&(this.blocks[e].holder.remove(),this.blocks[e].call(ye.REMOVED));const n=o?1:0;if(this.blocks.splice(e,n,t),e>0){const i=this.blocks[e-1];this.insertToDOM(t,"afterend",i)}else{const i=this.blocks[e+1];i?this.insertToDOM(t,"beforebegin",i):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const o=new DocumentFragment;for(const n of e)o.appendChild(n.holder);if(this.length>0){if(t>0){const n=Math.min(t-1,this.length-1);this.blocks[n].holder.after(o)}else t===0&&this.workingArea.prepend(o);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(o);e.forEach(n=>n.call(ye.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(ye.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(ye.REMOVED)),this.blocks.length=0}insertAfter(e,t){const o=this.blocks.indexOf(e);this.insert(o+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,o){t?o.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(ye.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}}const Mo="block-removed",Oo="block-added",Ri="block-moved",Ao="block-changed";class Ni{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,o)=>{this.completed=this.completed.then(e).then(t).catch(o)})}}class Pi extends q{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new jt(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:jt.set,get:jt.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:o=void 0,tunes:n={}}){const i=this.Editor.ReadOnly.isEnabled,s=this.Editor.Tools.blockTools.get(e),a=new we({id:o,data:t,tool:s,api:this.Editor.API,readOnly:i,tunesData:n},this.eventsDispatcher);return i||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:o={},index:n,needToFocus:i=!0,replace:s=!1,tunes:a={}}={}){let c=n;c===void 0&&(c=this.currentBlockIndex+(s?0:1));const l=this.composeBlock({id:e,tool:t,data:o,tunes:a});return s&&this.blockDidMutated(Mo,this.getBlockByIndex(c),{index:c}),this._blocks.insert(c,l,s),this.blockDidMutated(Oo,l,{index:c}),i?this.currentBlockIndex=c:c<=this.currentBlockIndex&&this.currentBlockIndex++,l}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t){const o=await e.data,n=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},o,t),tunes:e.tunes}),i=this.getBlockIndex(e);return this._blocks.replace(i,n),this.blockDidMutated(Ao,n,{index:i}),n}replace(e,t,o){const n=this.getBlockIndex(e);this.insert({tool:t,data:o,index:n,replace:!0})}paste(e,t,o=!1){const n=this.insert({tool:e,replace:o});try{window.requestIdleCallback(()=>{n.call(ye.ON_PASTE,t)})}catch(i){Y(`${e}: onPaste callback call is failed`,"error",i)}return n}insertDefaultBlockAtIndex(e,t=!1){const o=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=o,this.blockDidMutated(Oo,o,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,o}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){const o=await t.data;de(o)||await e.mergeWith(o),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,t=!0){return new Promise(o=>{const n=this._blocks.indexOf(e);if(!this.validateIndex(n))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(n),this.blockDidMutated(Mo,e,{index:n}),this.currentBlockIndex>=n&&this.currentBlockIndex--,this.blocks.length?n===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,t&&this.insert()),o()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=y.make("div");t.appendChild(e);const o={text:y.isEmpty(t)?"":t.innerHTML};return this.insert({data:o})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){y.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,o=e.closest(`.${we.CSS.wrapper}`),n=t.indexOf(o);if(n>=0)return this._blocks[n]}setCurrentBlockByChildNode(e){y.isElement(e)||(e=e.parentNode);const t=e.closest(`.${we.CSS.wrapper}`);if(!t)return;const o=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(o!=null&&o.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;y.isElement(e)||(e=e.parentNode);const t=e.closest(`.${we.CSS.wrapper}`);return this.blocks.find(o=>o.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){Y("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){Y("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(Ri,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,o){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const n=this.Editor.Tools.blockTools.get(t);if(!n)throw new Error(`Could not convert Block. Tool «${t}» not found.`);const i=await e.exportDataAsString(),s=xe(i,n.sanitizeConfig);let a=Nn(s,n.conversionConfig);o&&(a=Object.assign(a,o)),this.replace(e,n.name,a)}dropPointer(){this.currentBlockIndex=-1}async clear(e=!1){const t=new Ni;this.blocks.forEach(o=>{t.add(async()=>{await this.removeBlock(o,!1)})}),await t.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",o=>{t.keydown(o)}),this.readOnlyMutableListeners.on(e.holder,"keyup",o=>{t.keyup(o)}),this.readOnlyMutableListeners.on(e.holder,"dragover",o=>{t.dragOver(o)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",o=>{t.dragLeave(o)}),e.on("didMutated",o=>this.blockDidMutated(Ao,o,{index:this.getBlockIndex(o)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,o){const n=new CustomEvent(e,{detail:{target:new Me(t),...o}});return this.eventsDispatcher.emit(mo,{event:n}),t}}class Di extends q{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(o=>{o.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new R,De.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:o}=this.Editor;if(o.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){R.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let o;isNaN(e)?o=t.currentBlock:o=t.getBlockByIndex(e),o.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:o,Caret:n,RectangleSelection:i}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const s=e&&e instanceof KeyboardEvent,a=s&&lo(e.keyCode);if(this.anyBlockSelected&&s&&a&&!R.isSelectionExists){const c=o.removeSelectedBlocks();o.insertDefaultBlockAtIndex(c,!0),n.setToBlock(o.currentBlock),rt(()=>{const l=e.key;n.insertContentAtCaretPosition(l.length>1?"":l)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||i.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=y.make("div");this.selectedBlocks.forEach(i=>{const s=xe(i.holder.innerHTML,this.sanitizerConfig),a=y.make("p");a.innerHTML=s,t.appendChild(a)});const o=Array.from(t.childNodes).map(i=>i.textContent).join(`

`),n=t.innerHTML;return e.clipboardData.setData("text/plain",o),e.clipboardData.setData("text/html",n),Promise.all(this.selectedBlocks.map(i=>i.save())).then(i=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(i))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor,o=t.getBlockByIndex(e);o!==void 0&&this.selectBlock(o)}selectBlock(e){this.selection.save(),R.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){De.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),y.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const t=this.Editor.BlockManager.getBlock(e.target),o=t.inputs;if(o.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(o.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(t),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),R.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class ht extends q{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const t=R.get(),o=y.getDeepestNode(e.currentInput);let n=t.focusNode;if(y.isNativeInput(o))return o.selectionEnd===0;if(!t.anchorNode)return!1;let i=n.textContent.search(/\S/);i===-1&&(i=0);let s=t.focusOffset;return n.nodeType!==Node.TEXT_NODE&&n.childNodes.length&&(n.childNodes[s]?(n=n.childNodes[s],s=0):(n=n.childNodes[s-1],s=n.textContent.length)),(y.isLineBreakTag(o)||y.isEmpty(o))&&this.getHigherLevelSiblings(n,"left").every(a=>{const c=y.isLineBreakTag(a),l=a.children.length===1&&y.isLineBreakTag(a.children[0]),u=c||l;return y.isEmpty(a)&&!u})&&s===i?!0:o===null||n===o&&s<=i}get isAtEnd(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const t=R.get();let o=t.focusNode;const n=y.getDeepestNode(e.currentInput,!0);if(y.isNativeInput(n))return n.selectionEnd===n.value.length;if(!t.focusNode)return!1;let i=t.focusOffset;if(o.nodeType!==Node.TEXT_NODE&&o.childNodes.length&&(o.childNodes[i-1]?(o=o.childNodes[i-1],i=o.textContent.length):(o=o.childNodes[0],i=0)),y.isLineBreakTag(n)||y.isEmpty(n)){const a=this.getHigherLevelSiblings(o,"right");if(a.every((c,l)=>l===a.length-1&&y.isLineBreakTag(c)||y.isEmpty(c)&&!y.isLineBreakTag(c))&&i===o.textContent.length)return!0}const s=n.textContent.replace(/\s+$/,"");return o===n&&i>=s.length}setToBlock(e,t=this.positions.DEFAULT,o=0){var n;const{BlockManager:i,BlockSelection:s}=this.Editor;if(s.clearSelection(),!e.focusable){(n=window.getSelection())==null||n.removeAllRanges(),s.selectBlock(e),i.currentBlock=e;return}let a;switch(t){case this.positions.START:a=e.firstInput;break;case this.positions.END:a=e.lastInput;break;default:a=e.currentInput}if(!a)return;const c=y.getDeepestNode(a,t===this.positions.END),l=y.getContentLength(c);switch(!0){case t===this.positions.START:o=0;break;case t===this.positions.END:case o>l:o=l;break}this.set(c,o),i.setCurrentBlockByChildNode(e.holder),i.currentBlock.currentInput=a}setToInput(e,t=this.positions.DEFAULT,o=0){const{currentBlock:n}=this.Editor.BlockManager,i=y.getDeepestNode(e);switch(t){case this.positions.START:this.set(i,0);break;case this.positions.END:this.set(i,y.getContentLength(i));break;default:o&&this.set(i,o)}n.currentInput=e}set(e,t=0){const{top:o,bottom:n}=R.setCursor(e,t),{innerHeight:i}=window;o<0?window.scrollBy(0,o-30):n>i&&window.scrollBy(0,n-i+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=R.get();if(e.rangeCount){const t=e.getRangeAt(0),o=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),o)if(y.isNativeInput(o)){const n=o,i=document.createDocumentFragment(),s=n.value.substring(0,n.selectionStart),a=n.value.substring(n.selectionStart);return i.textContent=a,n.value=s,i}else{const n=t.cloneRange();return n.selectNodeContents(o),n.setStart(t.endContainer,t.endOffset),n.extractContents()}}}navigateNext(e=!1){const{BlockManager:t}=this.Editor,{currentBlock:o,nextBlock:n}=t,{nextInput:i}=o,s=this.isAtEnd;let a=n;const c=e||s;if(i&&c)return this.setToInput(i,this.positions.START),!0;if(a===null){if(o.tool.isDefault||!c)return!1;a=t.insertAtEnd()}return c?(this.setToBlock(a,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:t,previousBlock:o}=this.Editor.BlockManager;if(!t)return!1;const{previousInput:n}=t,i=e||this.isAtStart;return n&&i?(this.setToInput(n,this.positions.END),!0):o!==null&&i?(this.setToBlock(o,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(ht.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${ht.CSS.shadowCaret}`);if(!t)return;new R().expandToTag(t);const o=document.createRange();o.selectNode(t),o.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),o=document.createElement("div"),n=R.get(),i=R.range;o.innerHTML=e,Array.from(o.childNodes).forEach(l=>t.appendChild(l)),t.childNodes.length===0&&t.appendChild(new Text);const s=t.lastChild;i.deleteContents(),i.insertNode(t);const a=document.createRange(),c=s.nodeType===Node.TEXT_NODE?s:s.firstChild;c!==null&&c.textContent!==null&&a.setStart(c,c.textContent.length),n.removeAllRanges(),n.addRange(a)}getHigherLevelSiblings(e,t){let o=e;const n=[];for(;o.parentNode&&o.parentNode.contentEditable!=="true";)o=o.parentNode;const i=t==="left"?"previousSibling":"nextSibling";for(;o[i];)o=o[i],n.push(o);return n}}class ji extends q{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:o}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const n=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,i=t.getBlockByChildNode(e.target);if(!(!n||!i)&&i!==n){if(n===this.firstSelectedBlock){R.get().removeAllRanges(),n.selected=!0,i.selected=!0,o.clearCache();return}if(i===this.firstSelectedBlock){n.selected=!1,i.selected=!1,o.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(n,i),this.lastSelectedBlock=i}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==bn.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:o}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,o.clearCache(),R.get().removeAllRanges());const n=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),i=t.blocks[n];i&&(this.lastSelectedBlock.selected!==i.selected?(i.selected=!0,o.clearCache()):(this.lastSelectedBlock.selected=!1,o.clearCache()),this.lastSelectedBlock=i,this.Editor.InlineToolbar.close(),i.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:o,Caret:n}=this.Editor,i=t.blocks.indexOf(this.firstSelectedBlock),s=t.blocks.indexOf(this.lastSelectedBlock);if(o.anyBlockSelected&&i>-1&&s>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case N.DOWN:case N.RIGHT:n.setToBlock(t.blocks[Math.max(i,s)],n.positions.END);break;case N.UP:case N.LEFT:n.setToBlock(t.blocks[Math.min(i,s)],n.positions.START);break;default:n.setToBlock(t.blocks[Math.max(i,s)],n.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;R.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:o,BlockSelection:n}=this.Editor,i=o.blocks.indexOf(e),s=o.blocks.indexOf(t),a=e.selected!==t.selected;for(let c=Math.min(i,s);c<=Math.max(i,s);c++){const l=o.blocks[c];l!==this.firstSelectedBlock&&l!==(a?e:t)&&(o.blocks[c].selected=!o.blocks[c].selected,n.clearCache())}}}class Fi extends q{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Caret:o,Paste:n}=this.Editor;e.preventDefault(),t.blocks.forEach(s=>{s.dropTarget=!1}),R.isAtEditor&&!R.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const i=t.setCurrentBlockByChildNode(e.target);if(i)this.Editor.Caret.setToBlock(i,o.positions.END);else{const s=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(s,o.positions.END)}await n.processDataTransfer(e.dataTransfer,!0)}processDragStart(){R.isAtEditor&&!R.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}class Hi extends q{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(o=>{this.redactorChanged(o)}),this.eventsDispatcher.on(mo,o=>{this.particularBlockChanged(o.event)}),this.eventsDispatcher.on(bo,()=>{this.disable()}),this.eventsDispatcher.on(vo,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!Q(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(St,{mutations:e})}}const Ro=class extends q{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=r=>{try{const e=r.create({},{},!1);if(r.pasteConfig===!1){this.exceptionList.push(r.name);return}if(!Q(e.onPaste))return;this.getTagsConfig(r),this.getFilesConfig(r),this.getPatternsConfig(r)}catch(e){Y(`Paste handling for «${r.name}» Tool hasn't been set up because of the error`,"warn",e)}},this.handlePasteEvent=async r=>{const{BlockManager:e,Toolbar:t}=this.Editor,o=e.setCurrentBlockByChildNode(r.target);!o||this.isNativeBehaviour(r.target)&&!r.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(r.preventDefault(),this.processDataTransfer(r.clipboardData),t.close())}}async prepare(){this.processTools()}toggleReadOnly(r){r?this.unsetCallback():this.setCallback()}async processDataTransfer(r,e=!1){const{Tools:t}=this.Editor,o=r.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!de(this.toolsFiles)){await this.processFiles(r.files);return}const n=r.getData(this.MIME_TYPE),i=r.getData("text/plain");let s=r.getData("text/html");if(n)try{this.insertEditorJSData(JSON.parse(n));return}catch{}e&&i.trim()&&s.trim()&&(s="<p>"+(s.trim()?s:i)+"</p>");const a=Object.keys(this.toolsTags).reduce((u,d)=>(u[d.toLowerCase()]=this.toolsTags[d].sanitizationConfig??{},u),{}),c=Object.assign({},a,t.getAllInlineToolsSanitizeConfig(),{br:{}}),l=xe(s,c);!l.trim()||l.trim()===i||!y.isHTMLString(l)?await this.processText(i):await this.processText(l,!0)}async processText(r,e=!1){const{Caret:t,BlockManager:o}=this.Editor,n=e?this.processHTML(r):this.processPlain(r);if(!n.length)return;if(n.length===1){n[0].isBlock?this.processSingleBlock(n.pop()):this.processInlinePaste(n.pop());return}const i=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;n.map(async(s,a)=>this.insertBlock(s,a===0&&i)),o.currentBlock&&t.setToBlock(o.currentBlock,t.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const r=this.Editor.Tools.blockTools;Array.from(r.values()).forEach(this.processTool)}collectTagNames(r){return Te(r)?[r]:ie(r)?Object.keys(r):[]}getTagsConfig(r){if(r.pasteConfig===!1)return;const e=r.pasteConfig.tags||[],t=[];e.forEach(o=>{const n=this.collectTagNames(o);t.push(...n),n.forEach(i=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,i)){Y(`Paste handler for «${r.name}» Tool on «${i}» tag is skipped because it is already used by «${this.toolsTags[i].tool.name}» Tool.`,"warn");return}const s=ie(o)?o[i]:null;this.toolsTags[i.toUpperCase()]={tool:r,sanitizationConfig:s}})}),this.tagsByTool[r.name]=t.map(o=>o.toUpperCase())}getFilesConfig(r){if(r.pasteConfig===!1)return;const{files:e={}}=r.pasteConfig;let{extensions:t,mimeTypes:o}=e;!t&&!o||(t&&!Array.isArray(t)&&(Y(`«extensions» property of the onDrop config for «${r.name}» Tool should be an array`),t=[]),o&&!Array.isArray(o)&&(Y(`«mimeTypes» property of the onDrop config for «${r.name}» Tool should be an array`),o=[]),o&&(o=o.filter(n=>xn(n)?!0:(Y(`MIME type value «${n}» for the «${r.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[r.name]={extensions:t||[],mimeTypes:o||[]})}getPatternsConfig(r){r.pasteConfig===!1||!r.pasteConfig.patterns||de(r.pasteConfig.patterns)||Object.entries(r.pasteConfig.patterns).forEach(([e,t])=>{t instanceof RegExp||Y(`Pattern ${t} for «${r.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:e,pattern:t,tool:r})})}isNativeBehaviour(r){return y.isNativeInput(r)}async processFiles(r){const{BlockManager:e}=this.Editor;let t;t=await Promise.all(Array.from(r).map(n=>this.processFile(n))),t=t.filter(n=>!!n);const o=e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty;t.forEach((n,i)=>{e.paste(n.type,n.event,i===0&&o)})}async processFile(r){const e=wn(r),t=Object.entries(this.toolsFiles).find(([n,{mimeTypes:i,extensions:s}])=>{const[a,c]=r.type.split("/"),l=s.find(d=>d.toLowerCase()===e.toLowerCase()),u=i.find(d=>{const[p,k]=d.split("/");return p===a&&(k===c||k==="*")});return!!l||!!u});if(!t)return;const[o]=t;return{event:this.composePasteEvent("file",{file:r}),type:o}}processHTML(r){const{Tools:e}=this.Editor,t=y.make("DIV");return t.innerHTML=r,this.getNodes(t).map(o=>{let n,i=e.defaultTool,s=!1;switch(o.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=y.make("div"),n.appendChild(o);break;case Node.ELEMENT_NODE:n=o,s=!0,this.toolsTags[n.tagName]&&(i=this.toolsTags[n.tagName].tool);break}const{tags:a}=i.pasteConfig||{tags:[]},c=a.reduce((d,p)=>(this.collectTagNames(p).forEach(k=>{const h=ie(p)?p[k]:null;d[k.toLowerCase()]=h||{}}),d),{}),l=Object.assign({},c,i.baseSanitizeConfig);if(n.tagName.toLowerCase()==="table"){const d=xe(n.outerHTML,l);n=y.make("div",void 0,{innerHTML:d}).firstChild}else n.innerHTML=xe(n.innerHTML,l);const u=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:s,tool:i.name,event:u}}).filter(o=>{const n=y.isEmpty(o.content),i=y.isSingleTag(o.content);return!n||i})}processPlain(r){const{defaultBlock:e}=this.config;if(!r)return[];const t=e;return r.split(/\r?\n/).filter(o=>o.trim()).map(o=>{const n=y.make("div");n.textContent=o;const i=this.composePasteEvent("tag",{data:n});return{content:n,tool:t,isBlock:!1,event:i}})}async processSingleBlock(r){const{Caret:e,BlockManager:t}=this.Editor,{currentBlock:o}=t;if(!o||r.tool!==o.name||!y.containsOnlyInlineElements(r.content.innerHTML)){this.insertBlock(r,(o==null?void 0:o.tool.isDefault)&&o.isEmpty);return}e.insertContentAtCaretPosition(r.content.innerHTML)}async processInlinePaste(r){const{BlockManager:e,Caret:t}=this.Editor,{content:o}=r;if(e.currentBlock&&e.currentBlock.tool.isDefault&&o.textContent.length<Ro.PATTERN_PROCESSING_MAX_LENGTH){const n=await this.processPattern(o.textContent);if(n){const i=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty,s=e.paste(n.tool,n.event,i);t.setToBlock(s,t.positions.END);return}}if(e.currentBlock&&e.currentBlock.currentInput){const n=e.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,xe(o.innerHTML,n))}else this.insertBlock(r)}async processPattern(r){const e=this.toolsPatterns.find(t=>{const o=t.pattern.exec(r);return o?r===o.shift():!1});return e?{event:this.composePasteEvent("pattern",{key:e.key,data:r}),tool:e.tool.name}:void 0}insertBlock(r,e=!1){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:n}=t;let i;if(e&&n&&n.isEmpty){i=t.paste(r.tool,r.event,!0),o.setToBlock(i,o.positions.END);return}i=t.paste(r.tool,r.event),o.setToBlock(i,o.positions.END)}insertEditorJSData(r){const{BlockManager:e,Caret:t,Tools:o}=this.Editor;yo(r,n=>o.blockTools.get(n).sanitizeConfig).forEach(({tool:n,data:i},s)=>{let a=!1;s===0&&(a=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty);const c=e.insert({tool:n,data:i,replace:a});t.setToBlock(c,t.positions.END)})}processElementNode(r,e,t){const o=Object.keys(this.toolsTags),n=r,{tool:i}=this.toolsTags[n.tagName]||{},s=this.tagsByTool[i==null?void 0:i.name]||[],a=o.includes(n.tagName),c=y.blockElements.includes(n.tagName.toLowerCase()),l=Array.from(n.children).some(({tagName:d})=>o.includes(d)&&!s.includes(d)),u=Array.from(n.children).some(({tagName:d})=>y.blockElements.includes(d.toLowerCase()));if(!c&&!a&&!l)return t.appendChild(n),[...e,t];if(a&&!l||c&&!u&&!l)return[...e,t,n]}getNodes(r){const e=Array.from(r.childNodes);let t;const o=(n,i)=>{if(y.isEmpty(i)&&!y.isSingleTag(i))return n;const s=n[n.length-1];let a=new DocumentFragment;switch(s&&y.isFragment(s)&&(a=n.pop()),i.nodeType){case Node.ELEMENT_NODE:if(t=this.processElementNode(i,n,a),t)return t;break;case Node.TEXT_NODE:return a.appendChild(i),[...n,a];default:return[...n,a]}return[...n,...Array.from(i.childNodes).reduce(o,[])]};return e.reduce(o,[])}composePasteEvent(r,e){return new CustomEvent(r,{detail:e})}};let No=Ro;No.PATTERN_PROCESSING_MAX_LENGTH=450;class Ui extends q{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,o=[];Array.from(t.entries()).forEach(([n,i])=>{i.isReadOnlySupported||o.push(n)}),this.toolsDontSupportReadOnly=o,this.config.readOnly&&o.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const t=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const n in this.Editor)this.Editor[n].toggleReadOnly&&this.Editor[n].toggleReadOnly(e);if(t===e)return this.readOnlyEnabled;const o=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(o.blocks),this.readOnlyEnabled}throwCriticalError(){throw new go(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class nt extends q{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const o=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);o.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const n=[`.${we.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],i=o.closest("."+this.Editor.UI.CSS.editorWrapper),s=n.some(a=>!!o.closest(a));!i||s||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",wt(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",wt(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(y.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),o=y.make("div",nt.CSS.overlay,{}),n=y.make("div",nt.CSS.overlayContainer,{}),i=y.make("div",nt.CSS.rect,{});return n.appendChild(i),o.appendChild(n),t.appendChild(o),this.overlayRectangle=i,{container:t,overlay:o}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:o,index:n}=this.genInfoForMouseSelection(),i=this.startX>t&&this.mouseX>t,s=this.startX<o&&this.mouseX<o;this.rectCrossesBlocks=!(i||s),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),n!==void 0&&(this.trySelectNextBlock(n),this.inverseSelection(),R.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(t);if(!this.rectCrossesBlocks&&e)for(const t of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(t)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,t=this.mouseY-window.pageYOffset,o=document.elementFromPoint(e,t),n=this.Editor.BlockManager.getBlockByChildNode(o);let i;n!==void 0&&(i=this.Editor.BlockManager.blocks.findIndex(u=>u.holder===n.holder));const s=this.Editor.BlockManager.lastBlock.holder.querySelector("."+we.CSS.content),a=Number.parseInt(window.getComputedStyle(s).width,10)/2,c=e-a,l=e+a;return{index:i,leftPos:c,rightPos:l}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,o=this.stackOfSelected.length,n=1,i=-1,s=0;if(t)return;const a=this.stackOfSelected[o-1]-this.stackOfSelected[o-2]>0;let c=s;o>1&&(c=a?n:i);const l=e>this.stackOfSelected[o-1]&&c===n,u=e<this.stackOfSelected[o-1]&&c===i,d=!(l||u||c===s);if(!d&&(e>this.stackOfSelected[o-1]||this.stackOfSelected[o-1]===void 0)){let h=this.stackOfSelected[o-1]+1||e;for(h;h<=e;h++)this.addBlockInSelection(h);return}if(!d&&e<this.stackOfSelected[o-1]){for(let h=this.stackOfSelected[o-1]-1;h>=e;h--)this.addBlockInSelection(h);return}if(!d)return;let p=o-1,k;for(e>this.stackOfSelected[o-1]?k=()=>e>this.stackOfSelected[p]:k=()=>e<this.stackOfSelected[p];k();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[p]),this.stackOfSelected.pop(),p--}}class $i extends q{async render(e){return new Promise(t=>{const{Tools:o,BlockManager:n}=this.Editor;if(e.length===0)n.insert();else{const i=e.map(({type:s,data:a,tunes:c,id:l})=>{o.available.has(s)===!1&&(ue(`Tool «${s}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(s,a,l),s=o.stubTool);let u;try{u=n.composeBlock({id:l,tool:s,data:a,tunes:c})}catch(d){Y(`Block «${s}» skipped because of plugins error`,"error",{data:a,error:d}),a=this.composeStubDataForTool(s,a,l),s=o.stubTool,u=n.composeBlock({id:l,tool:s,data:a,tunes:c})}return u});n.insertMany(i)}window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,o){const{Tools:n}=this.Editor;let i=e;if(n.unavailable.has(e)){const s=n.unavailable.get(e).toolbox;s!==void 0&&s[0].title!==void 0&&(i=s[0].title)}return{savedData:{id:o,type:e,data:t},title:i}}}class zi extends q{async save(){const{BlockManager:e,Tools:t}=this.Editor,o=e.blocks,n=[];try{o.forEach(a=>{n.push(this.getSavedData(a))});const i=await Promise.all(n),s=await yo(i,a=>t.blockTools.get(a).sanitizeConfig);return this.makeOutput(s)}catch(i){ue("Saving failed due to the Error %o","error",i)}}async getSavedData(e){const t=await e.save(),o=t&&await e.validate(t.data);return{...t,isValid:o}}makeOutput(e){const t=[];return e.forEach(({id:o,tool:n,data:i,tunes:s,isValid:a})=>{if(!a){Y(`Block «${n}» skipped because saved data is invalid`);return}if(n===this.Editor.Tools.stubTool){t.push(i);return}const c={id:o,type:n,data:i,...!de(s)&&{tunes:s}};t.push(c)}),{time:+new Date,blocks:t,version:"2.29.1"}}}(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const qi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class Ft{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:t,api:o,readOnly:n}){this.api=o,this.readOnly=n,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=t.placeholder?t.placeholder:Ft.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=t.preserveBlank!==void 0?t.preserveBlank:!1,this.data=e}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete")return;const{textContent:t}=this._element;t===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable=!1,e.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable=!0,e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){const t={text:this.data.text+e.text};this.data=t}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const t={text:e.detail.data.innerHTML};this.data=t}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(this._element!==null){const e=this._element.innerHTML;this._data.text=e}return this._data}set data(e){this._data=e||{},this._element!==null&&this.hydrate()}hydrate(){window.requestAnimationFrame(()=>{this._element.innerHTML=this._data.text||""})}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:qi,title:"Text"}}}class Ht{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=hi,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}Ht.isInline=!0,Ht.title="Bold";class Ut{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=gi,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}Ut.isInline=!0,Ut.title="Italic";class $t{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new R}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Eo,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=ki,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=Eo,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new R;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),Y("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),o=e.substring(0,1)==="#",n=/^\/\/[^/\s]/.test(e);return!t&&!o&&!n&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}$t.isInline=!0,$t.title="Link";class Po{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=y.make("div",this.CSS.wrapper),t=yi,o=y.make("div",this.CSS.info),n=y.make("div",this.CSS.title,{textContent:this.title}),i=y.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,o.appendChild(n),o.appendChild(i),e.appendChild(o),e}}Po.isReadOnlySupported=!0;class Wi extends Dt{constructor(){super(...arguments),this.type=ct.Inline}get title(){return this.constructable[Pt.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class Vi extends Dt{constructor(){super(...arguments),this.type=ct.Tune}create(e,t){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:t,data:e})}}let me=class Ye extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new Ye(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new Ye(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new Ye(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new Ye(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new Ye(e)}};var Yi=Object.defineProperty,Ki=Object.getOwnPropertyDescriptor,Do=(r,e,t,o)=>{for(var n=o>1?void 0:o?Ki(e,t):e,i=r.length-1,s;i>=0;i--)(s=r[i])&&(n=(o?s(e,t,n):s(n))||n);return o&&n&&Yi(e,t,n),n};class zt extends Dt{constructor(){super(...arguments),this.type=ct.Block,this.inlineTools=new me,this.tunes=new me}create(e,t,o){return new this.constructable({data:e,block:t,readOnly:o,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[je.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[je.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[je.Toolbox],t=this.config[dt.Toolbox];if(!de(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((o,n)=>{const i=e[n];return i?{...i,...o}:o}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[je.ConversionConfig]}get enabledInlineTools(){return this.config[dt.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[dt.EnabledBlockTunes]}get pasteConfig(){return this.constructable[je.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(de(e))return t;const o={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];ie(i)?o[n]=Object.assign({},t,i):o[n]=i}return o}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}}Do([Re],zt.prototype,"sanitizeConfig",1),Do([Re],zt.prototype,"baseSanitizeConfig",1);class Xi{constructor(e,t,o){this.api=o,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:o=!1,...n}=this.config[e],i=this.getConstructor(t);return new i({name:e,constructable:t,config:n,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:o})}getConstructor(e){switch(!0){case e[Pt.IsInline]:return Wi;case e[Io.IsTune]:return Vi;default:return zt}}}class jo{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:xo,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const o=t.holder,n=o.getBoundingClientRect();let i=Math.abs(window.innerHeight-o.offsetHeight);n.top<window.innerHeight&&(i=window.scrollY+o.offsetHeight),window.scrollTo(0,i),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}jo.isTune=!0;class Fo{constructor({api:e}){this.api=e}render(){return{icon:pi,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}Fo.isTune=!0;class Ho{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:ui,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),o=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!o)throw new Error("Unable to move Block up since it is already the first");const n=t.holder,i=o.holder,s=n.getBoundingClientRect(),a=i.getBoundingClientRect();let c;a.top>0?c=Math.abs(s.top)-Math.abs(a.top):c=Math.abs(s.top)+a.height,window.scrollBy(0,-1*c),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}Ho.isTune=!0;var Gi=Object.defineProperty,Zi=Object.getOwnPropertyDescriptor,Ji=(r,e,t,o)=>{for(var n=o>1?void 0:o?Zi(e,t):e,i=r.length-1,s;i>=0;i--)(s=r[i])&&(n=(o?s(e,t,n):s(n))||n);return o&&n&&Gi(e,t,n),n};class Uo extends q{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new me,this.toolsUnavailable=new me}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=xt({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Xi(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await yn(t,o=>{this.toolPrepareMethodSuccess(o)},o=>{this.toolPrepareMethodFallback(o)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{Q(e.reset)&&await e.reset()})}get internalTools(){return{bold:{class:Ht,isInternal:!0},italic:{class:Ut,isInternal:!0},link:{class:$t,isInternal:!0},paragraph:{class:Ft,inlineToolbar:!0,isInternal:!0},stub:{class:Po,isInternal:!0},moveUp:{class:Ho,isInternal:!0},delete:{class:Fo,isInternal:!0},moveDown:{class:jo,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const o=["render","surround","checkState"].filter(n=>!t.create()[n]);if(o.length){Y(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",o),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([o,n])=>{t.push({function:Q(n.class.prepare)?n.class.prepare:()=>{},data:{toolName:o,config:n.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new me(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new me(e.enabledInlineTools.map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new me(e.enabledBlockTunes.map(o=>[o,this.blockTunes.get(o)]));e.tunes=new me([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new me(this.config.tunes.map(o=>[o,this.blockTunes.get(o)]));e.tunes=new me([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!Q(t)&&!Q(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)ie(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}}Ji([Re],Uo.prototype,"getAllInlineToolsSanitizeConfig",1);const Qi=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class er extends q{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=ho(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${we.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:o,ConversionToolbar:n}=this.Editor;return t.opened||o.opened||n.opened||e.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof Ee).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:o,ConversionToolbar:n}=this.Editor;t.close(),o.close(),n.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<uo}make(){this.nodes.holder=y.getHolder(this.config.holder),this.nodes.wrapper=y.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=y.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(y.get(e))return;const t=y.make("style",null,{id:e,textContent:Qi.toString()});this.config.style&&!de(this.config.style)&&this.config.style.nonce&&t.setAttribute("nonce",this.config.style.nonce),y.prepend(document.head,t)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",t=>{this.redactorClicked(t)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",t=>{this.documentTouched(t)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",t=>{this.documentTouched(t)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",t=>{this.documentKeydown(t)},!0),this.readOnlyMutableListeners.on(document,"mousedown",t=>{this.documentClicked(t)},!0);const e=ho(()=>{this.selectionChanged()},180);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",wt(t=>{const o=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||o&&e!==o&&(e=o,this.eventsDispatcher.emit(Bo,{block:this.Editor.BlockManager.getBlockByChildNode(o)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case N.ENTER:this.enterPressed(e);break;case N.BACKSPACE:case N.DELETE:this.backspacePressed(e);break;case N.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,o=e.target.closest(`.${this.CSS.editorWrapper}`),n=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&o===null){this.Editor.BlockEvents.keydown(e);return}o||t&&n||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:o,Caret:n}=this.Editor;if(o.anyBlockSelected&&!R.isSelectionExists){const i=t.removeSelectedBlocks(),s=t.insertDefaultBlockAtIndex(i,!0);n.setToBlock(s,n.positions.START),o.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:o}=this.Editor,n=t.currentBlockIndex>=0;if(o.anyBlockSelected&&!R.isSelectionExists){o.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&n&&e.target.tagName==="BODY"){const i=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(i),this.Editor.Toolbar.moveAndOpen(i)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var t,o;if(!e.isTrusted)return;const n=e.target;this.nodes.holder.contains(n)||R.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const i=(t=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:t.contains(n),s=(o=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:o.contains(n),a=i||s;if(this.Editor.BlockSettings.opened&&!a){this.Editor.BlockSettings.close();const c=this.Editor.BlockManager.getBlockByChildNode(n);this.Editor.Toolbar.moveAndOpen(c)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const o=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,n=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(o,n)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!R.isCollapsed)return;const t=e.target,o=e.metaKey||e.ctrlKey;if(y.isAnchor(t)&&o){e.stopImmediatePropagation(),e.stopPropagation();const n=t.getAttribute("href"),i=Cn(n);Tn(i);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const t=this.Editor.BlockManager.getBlockByIndex(-1),o=y.offset(t.holder).bottom,n=e.pageY,{BlockSelection:i}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!i.anyBlockSelected&&o<n){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:s,Caret:a,Toolbar:c}=this.Editor;(!s.lastBlock.tool.isDefault||!s.lastBlock.isEmpty)&&s.insertAtEnd(),a.setToTheLastBlock(),c.moveAndOpen(s.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,o=R.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&R.get().removeAllRanges(),!o){R.range||this.Editor.InlineToolbar.close();return}const n=o.closest(`.${we.CSS.content}`)===null;if(n&&(this.Editor.InlineToolbar.containsNode(o)||this.Editor.InlineToolbar.close(),o.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(o);const i=n!==!0;this.Editor.InlineToolbar.tryToShow(!0,i)}}const tr={BlocksAPI:Pn,CaretAPI:Dn,EventsAPI:jn,I18nAPI:Tt,API:Fn,InlineToolbarAPI:Hn,ListenersAPI:Un,NotifierAPI:Wn,ReadOnlyAPI:Vn,SanitizerAPI:Qn,SaverAPI:ei,SelectionAPI:ti,StylesAPI:oi,ToolbarAPI:ni,TooltipAPI:li,UiAPI:ci,BlockSettings:Ci,ConversionToolbar:ce,Toolbar:Mi,InlineToolbar:Oi,BlockEvents:Ai,BlockManager:Pi,BlockSelection:Di,Caret:ht,CrossBlockSelection:ji,DragNDrop:Fi,ModificationsObserver:Hi,Paste:No,ReadOnly:Ui,RectangleSelection:nt,Renderer:$i,Saver:zi,Tools:Uo,UI:er};class or{constructor(e){this.moduleInstances={},this.eventsDispatcher=new at;let t,o;this.isReady=new Promise((n,i)=>{t=n,o=i}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:n,Caret:i,UI:s,ModificationsObserver:a}=this.moduleInstances;s.checkEmptiness(),a.enable(),this.configuration.autofocus&&i.setToBlock(n.blocks[0],i.positions.START),t()}).catch(n=>{Y(`Editor.js is not ready because of ${n}`,"error"),o(n)})}set configuration(e){var t,o;ie(e)?this.config={...e}:this.config={holder:e},Et(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=ro.VERBOSE),vn(this.config.logLevel),Et(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const n={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(de(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[n]}),this.config.readOnly=this.config.readOnly||!1,(t=this.config.i18n)!=null&&t.messages&&le.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((o=this.config.i18n)==null?void 0:o.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(Te(t)&&!y.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&ie(t)&&!y.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,t)=>e.then(async()=>{try{await this.moduleInstances[t].prepare()}catch(o){if(o instanceof go)throw new Error(o.message);Y(`Module ${t} was skipped because of %o`,"warn",o)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(tr).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(o){Y("[constructModules]",`Module ${e} skipped because`,"error",o)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const o in this.moduleInstances)o!==e&&(t[o]=this.moduleInstances[o]);return t}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class nr{static get version(){return"2.29.1"}constructor(e){let t=()=>{};ie(e)&&Q(e.onReady)&&(t=e.onReady);const o=new or(e);this.isReady=o.isReady.then(()=>{this.exportAPI(o),t()})}exportAPI(e){const t=["configuration"],o=()=>{Object.values(e.moduleInstances).forEach(n=>{Q(n.destroy)&&n.destroy(),n.listeners.removeAll()}),ai(),e=null;for(const n in this)Object.prototype.hasOwnProperty.call(this,n)&&delete this[n];Object.setPrototypeOf(this,null)};t.forEach(n=>{this[n]=e[n]}),this.destroy=o,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([n,i])=>{Object.entries(i).forEach(([s,a])=>{this[a]=e.moduleInstances.API.methods[n][s]})})}}var $o={exports:{}};(function(r,e){(function(t,o){r.exports=o()})(self,function(){return(()=>{var t={424:(s,a,c)=>{c.r(a),c.d(a,{default:()=>k});var l=c(81),u=c.n(l),d=c(645),p=c.n(d)()(u());p.push([s.id,`.ce-block--drop-target .ce-block__content:before {
  content: "";
  position: absolute;
  top: 50%;
  left: -20px;
  margin-top: -1px;
  height: 8px;
  width: 8px;
  border: solid #a0a0a0;
  border-width: 1px 1px 0 0;
  -webkit-transform-origin: right;
  transform-origin: right;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}

.ce-block--drop-target .ce-block__content:after {
  background: none;
}`,""]);const k=p},645:s=>{s.exports=function(a){var c=[];return c.toString=function(){return this.map(function(l){var u="",d=l[5]!==void 0;return l[4]&&(u+="@supports (".concat(l[4],") {")),l[2]&&(u+="@media ".concat(l[2]," {")),d&&(u+="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {")),u+=a(l),d&&(u+="}"),l[2]&&(u+="}"),l[4]&&(u+="}"),u}).join("")},c.i=function(l,u,d,p,k){typeof l=="string"&&(l=[[null,l,void 0]]);var h={};if(d)for(var g=0;g<this.length;g++){var f=this[g][0];f!=null&&(h[f]=!0)}for(var v=0;v<l.length;v++){var b=[].concat(l[v]);d&&h[b[0]]||(k!==void 0&&(b[5]===void 0||(b[1]="@layer".concat(b[5].length>0?" ".concat(b[5]):""," {").concat(b[1],"}")),b[5]=k),u&&(b[2]&&(b[1]="@media ".concat(b[2]," {").concat(b[1],"}")),b[2]=u),p&&(b[4]?(b[1]="@supports (".concat(b[4],") {").concat(b[1],"}"),b[4]=p):b[4]="".concat(p)),c.push(b))}},c}},81:s=>{s.exports=function(a){return a[1]}},406:(s,a,c)=>{var l=c(424);typeof l=="string"&&(l=[[s.id,l,""]]),c(723)(l,{hmr:!0,transform:void 0,insertInto:void 0}),l.locals&&(s.exports=l.locals)},723:(s,a,c)=>{var l,u,d={},p=(l=function(){return window&&document&&document.all&&!window.atob},function(){return u===void 0&&(u=l.apply(this,arguments)),u}),k=function(C){return document.querySelector(C)},h=function(C){var B={};return function(M){if(typeof M=="function")return M();if(B[M]===void 0){var A=k.call(this,M);if(window.HTMLIFrameElement&&A instanceof window.HTMLIFrameElement)try{A=A.contentDocument.head}catch{A=null}B[M]=A}return B[M]}}(),g=null,f=0,v=[],b=c(947);function w(C,B){for(var M=0;M<C.length;M++){var A=C[M],$=d[A.id];if($){$.refs++;for(var F=0;F<$.parts.length;F++)$.parts[F](A.parts[F]);for(;F<A.parts.length;F++)$.parts.push(T(A.parts[F],B))}else{var ee=[];for(F=0;F<A.parts.length;F++)ee.push(T(A.parts[F],B));d[A.id]={id:A.id,refs:1,parts:ee}}}}function E(C,B){for(var M=[],A={},$=0;$<C.length;$++){var F=C[$],ee=B.base?F[0]+B.base:F[0],G={css:F[1],media:F[2],sourceMap:F[3]};A[ee]?A[ee].parts.push(G):M.push(A[ee]={id:ee,parts:[G]})}return M}function x(C,B){var M=h(C.insertInto);if(!M)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var A=v[v.length-1];if(C.insertAt==="top")A?A.nextSibling?M.insertBefore(B,A.nextSibling):M.appendChild(B):M.insertBefore(B,M.firstChild),v.push(B);else if(C.insertAt==="bottom")M.appendChild(B);else{if(typeof C.insertAt!="object"||!C.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var $=h(C.insertInto+" "+C.insertAt.before);M.insertBefore(B,$)}}function I(C){if(C.parentNode===null)return!1;C.parentNode.removeChild(C);var B=v.indexOf(C);B>=0&&v.splice(B,1)}function V(C){var B=document.createElement("style");return C.attrs.type===void 0&&(C.attrs.type="text/css"),_(B,C.attrs),x(C,B),B}function _(C,B){Object.keys(B).forEach(function(M){C.setAttribute(M,B[M])})}function T(C,B){var M,A,$,F;if(B.transform&&C.css){if(!(F=B.transform(C.css)))return function(){};C.css=F}if(B.singleton){var ee=f++;M=g||(g=V(B)),A=K.bind(null,M,ee,!1),$=K.bind(null,M,ee,!0)}else C.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(M=function(G){var ve=document.createElement("link");return G.attrs.type===void 0&&(G.attrs.type="text/css"),G.attrs.rel="stylesheet",_(ve,G.attrs),x(G,ve),ve}(B),A=Z.bind(null,M,B),$=function(){I(M),M.href&&URL.revokeObjectURL(M.href)}):(M=V(B),A=D.bind(null,M),$=function(){I(M)});return A(C),function(G){if(G){if(G.css===C.css&&G.media===C.media&&G.sourceMap===C.sourceMap)return;A(C=G)}else $()}}s.exports=function(C,B){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(B=B||{}).attrs=typeof B.attrs=="object"?B.attrs:{},B.singleton||typeof B.singleton=="boolean"||(B.singleton=p()),B.insertInto||(B.insertInto="head"),B.insertAt||(B.insertAt="bottom");var M=E(C,B);return w(M,B),function(A){for(var $=[],F=0;F<M.length;F++){var ee=M[F];(G=d[ee.id]).refs--,$.push(G)}for(A&&w(E(A,B),B),F=0;F<$.length;F++){var G;if((G=$[F]).refs===0){for(var ve=0;ve<G.parts.length;ve++)G.parts[ve]();delete d[G.id]}}}};var O,H=(O=[],function(C,B){return O[C]=B,O.filter(Boolean).join(`
`)});function K(C,B,M,A){var $=M?"":A.css;if(C.styleSheet)C.styleSheet.cssText=H(B,$);else{var F=document.createTextNode($),ee=C.childNodes;ee[B]&&C.removeChild(ee[B]),ee.length?C.insertBefore(F,ee[B]):C.appendChild(F)}}function D(C,B){var M=B.css,A=B.media;if(A&&C.setAttribute("media",A),C.styleSheet)C.styleSheet.cssText=M;else{for(;C.firstChild;)C.removeChild(C.firstChild);C.appendChild(document.createTextNode(M))}}function Z(C,B,M){var A=M.css,$=M.sourceMap,F=B.convertToAbsoluteUrls===void 0&&$;(B.convertToAbsoluteUrls||F)&&(A=b(A)),$&&(A+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify($))))+" */");var ee=new Blob([A],{type:"text/css"}),G=C.href;C.href=URL.createObjectURL(ee),G&&URL.revokeObjectURL(G)}},947:s=>{s.exports=function(a){var c=typeof window<"u"&&window.location;if(!c)throw new Error("fixUrls requires window.location");if(!a||typeof a!="string")return a;var l=c.protocol+"//"+c.host,u=l+c.pathname.replace(/\/[^\/]*$/,"/");return a.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(d,p){var k,h=p.trim().replace(/^"(.*)"$/,function(g,f){return f}).replace(/^'(.*)'$/,function(g,f){return f});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(h)?d:(k=h.indexOf("//")===0?h:h.indexOf("/")===0?l+h:u+h.replace(/^\.\//,""),"url("+JSON.stringify(k)+")")})}}},o={};function n(s){var a=o[s];if(a!==void 0)return a.exports;var c=o[s]={id:s,exports:{}};return t[s](c,c.exports,n),c.exports}n.n=s=>{var a=s&&s.__esModule?()=>s.default:()=>s;return n.d(a,{a}),a},n.d=(s,a)=>{for(var c in a)n.o(a,c)&&!n.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:a[c]})},n.o=(s,a)=>Object.prototype.hasOwnProperty.call(s,a),n.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var i={};return(()=>{function s(c,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}n.d(i,{default:()=>a}),n(406);var a=function(){function c(p,k){var h=p.configuration,g=p.blocks,f=p.toolbar,v=p.save;(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,c),this.toolbar=f,this.borderStyle=k||"1px dashed #aaa",this.api=g,this.holder=typeof h.holder=="string"?document.getElementById(h.holder):h.holder,this.readOnly=h.readOnly,this.startBlock=null,this.endBlock=null,this.save=v,this.setDragListener(),this.setDropListener()}var l,u,d;return l=c,d=[{key:"isReadOnlySupported",get:function(){return!0}}],(u=[{key:"setElementCursor",value:function(p){if(p){var k=document.createRange(),h=window.getSelection();k.setStart(p.childNodes[0],0),k.collapse(!0),h.removeAllRanges(),h.addRange(k),p.focus()}}},{key:"setDragListener",value:function(){var p=this;if(!this.readOnly){var k=this.holder.querySelector(".ce-toolbar__settings-btn");k.setAttribute("draggable","true"),k.addEventListener("dragstart",function(){p.startBlock=p.api.getCurrentBlockIndex()}),k.addEventListener("drag",function(){if(p.toolbar.close(),!p.isTheOnlyBlock()){var h=p.holder.querySelectorAll(".ce-block"),g=p.holder.querySelector(".ce-block--drop-target");p.setElementCursor(g),p.setBorderBlocks(h,g)}})}}},{key:"setBorderBlocks",value:function(p,k){var h=this;Object.values(p).forEach(function(g){var f=g.querySelector(".ce-block__content");g!==k?(f.style.removeProperty("border-top"),f.style.removeProperty("border-bottom")):Object.keys(p).find(function(v){return p[v]===k})>h.startBlock?f.style.borderBottom=h.borderStyle||borderStyle:f.style.borderTop=h.borderStyle})}},{key:"setDropListener",value:function(){var p=this;document.addEventListener("drop",function(k){var h=k.target;if(p.holder.contains(h)&&p.startBlock!==null){var g=p.getDropTarget(h);if(g){var f=g.querySelector(".ce-block__content");f.style.removeProperty("border-top"),f.style.removeProperty("border-bottom"),p.endBlock=p.getTargetPosition(g),p.moveBlocks()}}p.startBlock=null})}},{key:"getDropTarget",value:function(p){return p.classList.contains("ce-block")?p:p.closest(".ce-block")}},{key:"getTargetPosition",value:function(p){return Array.from(p.parentNode.children).indexOf(p)}},{key:"isTheOnlyBlock",value:function(){return this.api.getBlocksCount()===1}},{key:"moveBlocks",value:function(){this.isTheOnlyBlock()||this.api.move(this.endBlock,this.startBlock)}}])&&s(l.prototype,u),d&&s(l,d),Object.defineProperty(l,"prototype",{writable:!1}),c}()})(),i.default})()})})($o);var ir=$o.exports;const rr=oo(ir),sr={messages:{ui:{blockTunes:{toggler:{"Click to tune":"ブロックの操作"}},inlineToolbar:{converter:{"Convert to":"変更"}},toolbar:{toolbox:{Add:"追加"}}},toolNames:{Text:"文章",Heading:"子見出し",List:"リスト",Quote:"引用",Link:"リンク",Image:"画像",Payment:"有料ライン",Embed:"埋め込み"},tools:{link:{"Add a link":"リンクを追加",Link:"リンク","Couldn't get this link data, try the other one":"リンク先の情報を取得できませんでした。"},image:{"Select an Image":"画像を選択",Caption:"キャプション","With border":"枠を追加","Stretch image":"画像を拡大","With background":"背景を追加"},header:{"Heading 2":"H2","Heading 3":"H3"},list:{Unordered:"番号なし",Ordered:"番号あり"},embed:{Link:"リンク"}},blockTunes:{delete:{Delete:"削除","Click to delete":"クリックで削除"},moveUp:{"Move up":"上に移動"},moveDown:{"Move down":"下に移動"}}}};(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}.ce-header[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;display:none;cursor:text}.ce-header[contentEditable=true][data-placeholder]:empty:before{display:block}.ce-header[contentEditable=true][data-placeholder]:empty:focus:before{display:none}")),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const ar='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',lr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',cr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',dr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',hr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',ur='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',pr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let fr=class{constructor({data:e,config:t,api:o,readOnly:n}){this.api=o,this.readOnly=n,this._CSS={block:this.api.styles.block,wrapper:"ce-header"},this._settings=t,this._data=this.normalizeData(e),this._element=this.getTag()}normalizeData(e){const t={};return typeof e!="object"&&(e={}),t.text=e.text||"",t.level=parseInt(e.level)||this.defaultLevel.number,t}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){const t={text:this.data.text+e.text,level:this.data.level};this.data=t}validate(e){return e.text.trim()!==""}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),e.level!==void 0&&this._element.parentNode){const t=this.getTag();t.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t,this._element),this._element=t}e.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(t=>t.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find(t=>t.number===this._settings.defaultLevel);if(e)return e;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:ar},{number:2,tag:"H2",svg:lr},{number:3,tag:"H3",svg:cr},{number:4,tag:"H4",svg:dr},{number:5,tag:"H5",svg:hr},{number:6,tag:"H6",svg:ur}];return this._settings.levels?e.filter(t=>this._settings.levels.includes(t.number)):e}onPaste(e){const t=e.detail.data;let o=this.defaultLevel.number;switch(t.tagName){case"H1":o=1;break;case"H2":o=2;break;case"H3":o=3;break;case"H4":o=4;break;case"H5":o=5;break;case"H6":o=6;break}this._settings.levels&&(o=this._settings.levels.reduce((n,i)=>Math.abs(i-o)<Math.abs(n-o)?i:n)),this.data={level:o,text:t.innerHTML}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:pr,title:"Heading"}}};(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode(`.link-tool{position:relative}.link-tool__input{padding-left:38px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:10px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.link-tool__input-holder{position:relative}.link-tool__input-holder--error .link-tool__input{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");background-color:#fff3f6;border-color:#f3e0e0;color:#a95a5a;box-shadow:inset 0 1px 3px #923e3e0d}.link-tool__input[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.link-tool__input[contentEditable=true][data-placeholder]:empty:before{opacity:1}.link-tool__input[contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.link-tool__progress{position:absolute;box-shadow:inset 0 1px 3px #66556b0a;height:100%;width:0;background-color:#f4f5f7;z-index:-1}.link-tool__progress--loading{-webkit-animation:progress .5s ease-in;-webkit-animation-fill-mode:forwards}.link-tool__progress--loaded{width:100%}.link-tool__content{display:block;padding:25px;border-radius:2px;box-shadow:0 0 0 2px #fff;color:initial!important;text-decoration:none!important}.link-tool__content:after{content:"";clear:both;display:table}.link-tool__content--rendered{background:#fff;border:1px solid rgba(201,201,204,.48);box-shadow:0 1px 3px #0000001a;border-radius:6px;will-change:filter;animation:link-in .45s 1 cubic-bezier(.215,.61,.355,1)}.link-tool__content--rendered:hover{box-shadow:0 0 3px #00000029}.link-tool__image{background-position:center center;background-repeat:no-repeat;background-size:cover;margin:0 0 0 30px;width:65px;height:65px;border-radius:3px;float:right}.link-tool__title{font-size:17px;font-weight:600;line-height:1.5em;margin:0 0 10px}.link-tool__title+.link-tool__anchor{margin-top:25px}.link-tool__description{margin:0 0 20px;font-size:15px;line-height:1.55em;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.link-tool__anchor{display:block;font-size:15px;line-height:1em;color:#888!important;border:0!important;padding:0!important}@keyframes link-in{0%{filter:blur(5px)}to{filter:none}}.codex-editor--narrow .link-tool__image{display:none}@-webkit-keyframes progress{0%{width:0}to{width:85%}}`)),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var Fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}(function(r){var e=function(){try{return!!Symbol.iterator}catch{return!1}},t=e(),o=function(l){var u={next:function(){var d=l.shift();return{done:d===void 0,value:d}}};return t&&(u[Symbol.iterator]=function(){return u}),u},n=function(l){return encodeURIComponent(l).replace(/%20/g,"+")},i=function(l){return decodeURIComponent(String(l).replace(/\+/g," "))},s=function(){var l=function(d){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var p=typeof d;if(p!=="undefined")if(p==="string")d!==""&&this._fromString(d);else if(d instanceof l){var k=this;d.forEach(function(v,b){k.append(b,v)})}else if(d!==null&&p==="object")if(Object.prototype.toString.call(d)==="[object Array]")for(var h=0;h<d.length;h++){var g=d[h];if(Object.prototype.toString.call(g)==="[object Array]"||g.length!==2)this.append(g[0],g[1]);else throw new TypeError("Expected [string, any] as entry at index "+h+" of URLSearchParams's input")}else for(var f in d)d.hasOwnProperty(f)&&this.append(f,d[f]);else throw new TypeError("Unsupported input's type for URLSearchParams")},u=l.prototype;u.append=function(d,p){d in this._entries?this._entries[d].push(String(p)):this._entries[d]=[String(p)]},u.delete=function(d){delete this._entries[d]},u.get=function(d){return d in this._entries?this._entries[d][0]:null},u.getAll=function(d){return d in this._entries?this._entries[d].slice(0):[]},u.has=function(d){return d in this._entries},u.set=function(d,p){this._entries[d]=[String(p)]},u.forEach=function(d,p){var k;for(var h in this._entries)if(this._entries.hasOwnProperty(h)){k=this._entries[h];for(var g=0;g<k.length;g++)d.call(p,k[g],h,this)}},u.keys=function(){var d=[];return this.forEach(function(p,k){d.push(k)}),o(d)},u.values=function(){var d=[];return this.forEach(function(p){d.push(p)}),o(d)},u.entries=function(){var d=[];return this.forEach(function(p,k){d.push([k,p])}),o(d)},t&&(u[Symbol.iterator]=u.entries),u.toString=function(){var d=[];return this.forEach(function(p,k){d.push(n(k)+"="+n(p))}),d.join("&")},r.URLSearchParams=l},a=function(){try{var l=r.URLSearchParams;return new l("?a=1").toString()==="a=1"&&typeof l.prototype.set=="function"}catch{return!1}};a()||s();var c=r.URLSearchParams.prototype;typeof c.sort!="function"&&(c.sort=function(){var l=this,u=[];this.forEach(function(p,k){u.push([k,p]),l._entries||l.delete(k)}),u.sort(function(p,k){return p[0]<k[0]?-1:p[0]>k[0]?1:0}),l._entries&&(l._entries={});for(var d=0;d<u.length;d++)this.append(u[d][0],u[d][1])}),typeof c._fromString!="function"&&Object.defineProperty(c,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(l){if(this._entries)this._entries={};else{var u=[];this.forEach(function(h,g){u.push(g)});for(var d=0;d<u.length;d++)this.delete(u[d])}l=l.replace(/^\?/,"");for(var p=l.split("&"),k,d=0;d<p.length;d++)k=p[d].split("="),this.append(i(k[0]),k.length>1?i(k[1]):"")}})})(typeof Fe<"u"?Fe:typeof window<"u"?window:typeof self<"u"?self:Fe),function(r){var e=function(){try{var n=new r.URL("b","http://a");return n.pathname="c d",n.href==="http://a/c%20d"&&n.searchParams}catch{return!1}},t=function(){var n=r.URL,i=function(c,l){typeof c!="string"&&(c=String(c));var u=document,d;if(l&&(r.location===void 0||l!==r.location.href)){u=document.implementation.createHTMLDocument(""),d=u.createElement("base"),d.href=l,u.head.appendChild(d);try{if(d.href.indexOf(l)!==0)throw new Error(d.href)}catch(w){throw new Error("URL unable to set base "+l+" due to "+w)}}var p=u.createElement("a");p.href=c,d&&(u.body.appendChild(p),p.href=p.href);var k=u.createElement("input");if(k.type="url",k.value=c,p.protocol===":"||!/:/.test(p.href)||!k.checkValidity()&&!l)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:p});var h=new r.URLSearchParams(this.search),g=!0,f=!0,v=this;["append","delete","set"].forEach(function(w){var E=h[w];h[w]=function(){E.apply(h,arguments),g&&(f=!1,v.search=h.toString(),f=!0)}}),Object.defineProperty(this,"searchParams",{value:h,enumerable:!0});var b=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==b&&(b=this.search,f&&(g=!1,this.searchParams._fromString(this.search),g=!0))}})},s=i.prototype,a=function(c){Object.defineProperty(s,c,{get:function(){return this._anchorElement[c]},set:function(l){this._anchorElement[c]=l},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(c){a(c)}),Object.defineProperty(s,"search",{get:function(){return this._anchorElement.search},set:function(c){this._anchorElement.search=c,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(s,{toString:{get:function(){var c=this;return function(){return c.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(c){this._anchorElement.href=c,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(c){this._anchorElement.pathname=c},enumerable:!0},origin:{get:function(){var c={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],l=this._anchorElement.port!=c&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(l?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(c){},enumerable:!0},username:{get:function(){return""},set:function(c){},enumerable:!0}}),i.createObjectURL=function(c){return n.createObjectURL.apply(n,arguments)},i.revokeObjectURL=function(c){return n.revokeObjectURL.apply(n,arguments)},r.URL=i};if(e()||t(),r.location!==void 0&&!("origin"in r.location)){var o=function(){return r.location.protocol+"//"+r.location.hostname+(r.location.port?":"+r.location.port:"")};try{Object.defineProperty(r.location,"origin",{get:o,enumerable:!0})}catch{setInterval(function(){r.location.origin=o()},100)}}}(typeof Fe<"u"?Fe:typeof window<"u"?window:typeof self<"u"?self:Fe);var zo={exports:{}};(function(r,e){(function(t,o){r.exports=o()})(window,function(){return function(t){var o={};function n(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=o,n.d=function(i,s,a){n.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,s){if(1&s&&(i=n(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var c in i)n.d(a,c,(function(l){return i[l]}).bind(null,c));return a},n.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(s,"a",s),s},n.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},n.p="",n(n.s=3)}([function(t,o){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}t.exports=n},function(t,o,n){(function(i){var s=n(2),a=setTimeout;function c(){}function l(f){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(f,this)}function u(f,v){for(;f._state===3;)f=f._value;f._state!==0?(f._handled=!0,l._immediateFn(function(){var b=f._state===1?v.onFulfilled:v.onRejected;if(b!==null){var w;try{w=b(f._value)}catch(E){return void p(v.promise,E)}d(v.promise,w)}else(f._state===1?d:p)(v.promise,f._value)})):f._deferreds.push(v)}function d(f,v){try{if(v===f)throw new TypeError("A promise cannot be resolved with itself.");if(v&&(typeof v=="object"||typeof v=="function")){var b=v.then;if(v instanceof l)return f._state=3,f._value=v,void k(f);if(typeof b=="function")return void g((w=b,E=v,function(){w.apply(E,arguments)}),f)}f._state=1,f._value=v,k(f)}catch(x){p(f,x)}var w,E}function p(f,v){f._state=2,f._value=v,k(f)}function k(f){f._state===2&&f._deferreds.length===0&&l._immediateFn(function(){f._handled||l._unhandledRejectionFn(f._value)});for(var v=0,b=f._deferreds.length;v<b;v++)u(f,f._deferreds[v]);f._deferreds=null}function h(f,v,b){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof v=="function"?v:null,this.promise=b}function g(f,v){var b=!1;try{f(function(w){b||(b=!0,d(v,w))},function(w){b||(b=!0,p(v,w))})}catch(w){if(b)return;b=!0,p(v,w)}}l.prototype.catch=function(f){return this.then(null,f)},l.prototype.then=function(f,v){var b=new this.constructor(c);return u(this,new h(f,v,b)),b},l.prototype.finally=s.a,l.all=function(f){return new l(function(v,b){if(!f||f.length===void 0)throw new TypeError("Promise.all accepts an array");var w=Array.prototype.slice.call(f);if(w.length===0)return v([]);var E=w.length;function x(V,_){try{if(_&&(typeof _=="object"||typeof _=="function")){var T=_.then;if(typeof T=="function")return void T.call(_,function(O){x(V,O)},b)}w[V]=_,--E==0&&v(w)}catch(O){b(O)}}for(var I=0;I<w.length;I++)x(I,w[I])})},l.resolve=function(f){return f&&typeof f=="object"&&f.constructor===l?f:new l(function(v){v(f)})},l.reject=function(f){return new l(function(v,b){b(f)})},l.race=function(f){return new l(function(v,b){for(var w=0,E=f.length;w<E;w++)f[w].then(v,b)})},l._immediateFn=typeof i=="function"&&function(f){i(f)}||function(f){a(f,0)},l._unhandledRejectionFn=function(f){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",f)},o.a=l}).call(this,n(5).setImmediate)},function(t,o,n){o.a=function(i){var s=this.constructor;return this.then(function(a){return s.resolve(i()).then(function(){return a})},function(a){return s.resolve(i()).then(function(){return s.reject(a)})})}},function(t,o,n){function i(h){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(h)}n(4);var s,a,c,l,u,d,p=n(8),k=(a=function(h){return new Promise(function(g,f){h=l(h),h=u(h);var v=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");v.open(h.method,h.url),v.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(h.headers).forEach(function(w){var E=h.headers[w];v.setRequestHeader(w,E)});var b=h.ratio;v.upload.addEventListener("progress",function(w){var E=Math.round(w.loaded/w.total*100),x=Math.ceil(E*b/100);h.progress(x)},!1),v.addEventListener("progress",function(w){var E=Math.round(w.loaded/w.total*100),x=Math.ceil(E*(100-b)/100)+b;h.progress(x)},!1),v.onreadystatechange=function(){if(v.readyState===4){var w=v.response;try{w=JSON.parse(w)}catch{}var E=p.parseHeaders(v.getAllResponseHeaders()),x={body:w,code:v.status,headers:E};v.status===200?g(x):f(x)}},v.send(h.data)})},c=function(h){return h.method="POST",a(h)},l=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(h.url&&typeof h.url!="string")throw new Error("Url must be a string");if(h.url=h.url||"",h.method&&typeof h.method!="string")throw new Error("`method` must be a string or null");if(h.method=h.method?h.method.toUpperCase():"GET",h.headers&&i(h.headers)!=="object")throw new Error("`headers` must be an object or null");if(h.headers=h.headers||{},h.type&&(typeof h.type!="string"||!Object.values(s).includes(h.type)))throw new Error("`type` must be taken from module's «contentType» library");if(h.progress&&typeof h.progress!="function")throw new Error("`progress` must be a function or null");if(h.progress=h.progress||function(g){},h.beforeSend=h.beforeSend||function(g){},h.ratio&&typeof h.ratio!="number")throw new Error("`ratio` must be a number");if(h.ratio<0||h.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(h.ratio=h.ratio||90,h.accept&&typeof h.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(h.accept=h.accept||"*/*",h.multiple&&typeof h.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(h.multiple=h.multiple||!1,h.fieldName&&typeof h.fieldName!="string")throw new Error("`fieldName` must be a string");return h.fieldName=h.fieldName||"files",h},u=function(h){switch(h.method){case"GET":var g=d(h.data,s.URLENCODED);delete h.data,h.url=/\?/.test(h.url)?h.url+"&"+g:h.url+"?"+g;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var f=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||s.JSON}(h);(p.isFormData(h.data)||p.isFormElement(h.data))&&(f=s.FORM),h.data=d(h.data,f),f!==k.contentType.FORM&&(h.headers["content-type"]=f)}return h},d=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case s.URLENCODED:return p.urlEncode(h);case s.JSON:return p.jsonEncode(h);case s.FORM:return p.formEncode(h);default:return h}},{contentType:s={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:a,get:function(h){return h.method="GET",a(h)},post:c,transport:function(h){return h=l(h),p.selectFiles(h).then(function(g){for(var f=new FormData,v=0;v<g.length;v++)f.append(h.fieldName,g[v],g[v].name);return p.isObject(h.data)&&Object.keys(h.data).forEach(function(b){var w=h.data[b];f.append(b,w)}),h.beforeSend&&h.beforeSend(g),h.data=f,c(h)})},selectFiles:function(h){return delete(h=l(h)).beforeSend,p.selectFiles(h)}});t.exports=k},function(t,o,n){n.r(o);var i=n(1);window.Promise=window.Promise||i.a},function(t,o,n){(function(i){var s=i!==void 0&&i||typeof self<"u"&&self||window,a=Function.prototype.apply;function c(l,u){this._id=l,this._clearFn=u}o.setTimeout=function(){return new c(a.call(setTimeout,s,arguments),clearTimeout)},o.setInterval=function(){return new c(a.call(setInterval,s,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(l){l&&l.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(s,this._id)},o.enroll=function(l,u){clearTimeout(l._idleTimeoutId),l._idleTimeout=u},o.unenroll=function(l){clearTimeout(l._idleTimeoutId),l._idleTimeout=-1},o._unrefActive=o.active=function(l){clearTimeout(l._idleTimeoutId);var u=l._idleTimeout;u>=0&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},u))},n(6),o.setImmediate=typeof self<"u"&&self.setImmediate||i!==void 0&&i.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||i!==void 0&&i.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(t,o,n){(function(i,s){(function(a,c){if(!a.setImmediate){var l,u,d,p,k,h=1,g={},f=!1,v=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,{}.toString.call(a.process)==="[object process]"?l=function(x){s.nextTick(function(){E(x)})}:function(){if(a.postMessage&&!a.importScripts){var x=!0,I=a.onmessage;return a.onmessage=function(){x=!1},a.postMessage("","*"),a.onmessage=I,x}}()?(p="setImmediate$"+Math.random()+"$",k=function(x){x.source===a&&typeof x.data=="string"&&x.data.indexOf(p)===0&&E(+x.data.slice(p.length))},a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),l=function(x){a.postMessage(p+x,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(x){E(x.data)},l=function(x){d.port2.postMessage(x)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,l=function(x){var I=v.createElement("script");I.onreadystatechange=function(){E(x),I.onreadystatechange=null,u.removeChild(I),I=null},u.appendChild(I)}):l=function(x){setTimeout(E,0,x)},b.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var I=new Array(arguments.length-1),V=0;V<I.length;V++)I[V]=arguments[V+1];var _={callback:x,args:I};return g[h]=_,l(h),h++},b.clearImmediate=w}function w(x){delete g[x]}function E(x){if(f)setTimeout(E,0,x);else{var I=g[x];if(I){f=!0;try{(function(V){var _=V.callback,T=V.args;switch(T.length){case 0:_();break;case 1:_(T[0]);break;case 2:_(T[0],T[1]);break;case 3:_(T[0],T[1],T[2]);break;default:_.apply(c,T)}})(I)}finally{w(x),f=!1}}}}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,n(0),n(7))},function(t,o){var n,i,s=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function l(b){if(n===setTimeout)return setTimeout(b,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(b,0);try{return n(b,0)}catch{try{return n.call(null,b,0)}catch{return n.call(this,b,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:a}catch{n=a}try{i=typeof clearTimeout=="function"?clearTimeout:c}catch{i=c}})();var u,d=[],p=!1,k=-1;function h(){p&&u&&(p=!1,u.length?d=u.concat(d):k=-1,d.length&&g())}function g(){if(!p){var b=l(h);p=!0;for(var w=d.length;w;){for(u=d,d=[];++k<w;)u&&u[k].run();k=-1,w=d.length}u=null,p=!1,function(E){if(i===clearTimeout)return clearTimeout(E);if((i===c||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(E);try{i(E)}catch{try{return i.call(null,E)}catch{return i.call(this,E)}}}(b)}}function f(b,w){this.fun=b,this.array=w}function v(){}s.nextTick=function(b){var w=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)w[E-1]=arguments[E];d.push(new f(b,w)),d.length!==1||p||l(g)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,o,n){function i(a,c){for(var l=0;l<c.length;l++){var u=c[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var s=n(9);t.exports=function(){function a(){(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a)}var c,l,u;return c=a,u=[{key:"urlEncode",value:function(d){return s(d)}},{key:"jsonEncode",value:function(d){return JSON.stringify(d)}},{key:"formEncode",value:function(d){if(this.isFormData(d))return d;if(this.isFormElement(d))return new FormData(d);if(this.isObject(d)){var p=new FormData;return Object.keys(d).forEach(function(k){var h=d[k];p.append(k,h)}),p}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(d){return Object.prototype.toString.call(d)==="[object Object]"}},{key:"isFormData",value:function(d){return d instanceof FormData}},{key:"isFormElement",value:function(d){return d instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(p,k){var h=document.createElement("INPUT");h.type="file",d.multiple&&h.setAttribute("multiple","multiple"),d.accept&&h.setAttribute("accept",d.accept),h.style.display="none",document.body.appendChild(h),h.addEventListener("change",function(g){var f=g.target.files;p(f),document.body.removeChild(h)},!1),h.click()})}},{key:"parseHeaders",value:function(d){var p=d.trim().split(/[\r\n]+/),k={};return p.forEach(function(h){var g=h.split(": "),f=g.shift(),v=g.join(": ");f&&(k[f]=v)}),k}}],(l=null)&&i(c.prototype,l),u&&i(c,u),a}()},function(t,o){var n=function(s){return encodeURIComponent(s).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},i=function(s,a,c,l){return a=a||null,c=c||"&",l=l||null,s?function(u){for(var d=new Array,p=0;p<u.length;p++)u[p]&&d.push(u[p]);return d}(Object.keys(s).map(function(u){var d,p,k=u;if(l&&(k=l+"["+k+"]"),typeof s[u]=="object"&&s[u]!==null)d=i(s[u],null,c,k);else{a&&(p=k,k=!isNaN(parseFloat(p))&&isFinite(p)?a+Number(k):k);var h=s[u];h=(h=(h=(h=h===!0?"1":h)===!1?"0":h)===0?"0":h)||"",d=n(k)+"="+n(h)}return d})).join(c).replace(/[!'()*]/g,""):""};t.exports=i}])})})(zo);var mr=zo.exports;const br=gr(mr),vr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.569 6.39509 13.9269 6.25143 12.8271 7.17675L11.39 8.38588C10.0935 9.47674 9.95704 11.4241 11.0887 12.6852L11.12 12.72"/></svg>';let kr=class{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:vr,title:"Link"}}static get enableLineBreaks(){return!0}constructor({data:e,config:t,api:o,readOnly:n}){this.api=o,this.readOnly=n,this.config={endpoint:t.endpoint||"",headers:t.headers||{}},this.nodes={wrapper:null,container:null,progress:null,input:null,inputHolder:null,linkContent:null,linkImage:null,linkTitle:null,linkDescription:null,linkText:null},this._data={link:"",meta:{}},this.data=e}render(){return this.nodes.wrapper=this.make("div",this.CSS.baseClass),this.nodes.container=this.make("div",this.CSS.container),this.nodes.inputHolder=this.makeInputHolder(),this.nodes.linkContent=this.prepareLinkPreview(),Object.keys(this.data.meta).length?(this.nodes.container.appendChild(this.nodes.linkContent),this.showLinkPreview(this.data.meta)):this.nodes.container.appendChild(this.nodes.inputHolder),this.nodes.wrapper.appendChild(this.nodes.container),this.nodes.wrapper}save(){return this.data}validate(){return this.data.link.trim()!==""}set data(e){this._data=Object.assign({},{link:e.link||this._data.link,meta:e.meta||this._data.meta})}get data(){return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"link-tool",inputEl:"link-tool__input",inputHolder:"link-tool__input-holder",inputError:"link-tool__input-holder--error",linkContent:"link-tool__content",linkContentRendered:"link-tool__content--rendered",linkImage:"link-tool__image",linkTitle:"link-tool__title",linkDescription:"link-tool__description",linkText:"link-tool__anchor",progress:"link-tool__progress",progressLoading:"link-tool__progress--loading",progressLoaded:"link-tool__progress--loaded"}}makeInputHolder(){const e=this.make("div",this.CSS.inputHolder);return this.nodes.progress=this.make("label",this.CSS.progress),this.nodes.input=this.make("div",[this.CSS.input,this.CSS.inputEl],{contentEditable:!this.readOnly}),this.nodes.input.dataset.placeholder=this.api.i18n.t("Link"),this.readOnly||(this.nodes.input.addEventListener("paste",t=>{this.startFetching(t)}),this.nodes.input.addEventListener("keydown",t=>{const[o,n]=[13,65],i=t.ctrlKey||t.metaKey;switch(t.keyCode){case o:t.preventDefault(),t.stopPropagation(),this.startFetching(t);break;case n:i&&this.selectLinkUrl(t);break}})),e.appendChild(this.nodes.progress),e.appendChild(this.nodes.input),e}startFetching(e){let t=this.nodes.input.textContent;e.type==="paste"&&(t=(e.clipboardData||window.clipboardData).getData("text")),this.removeErrorStyle(),this.fetchLinkData(t)}removeErrorStyle(){this.nodes.inputHolder.classList.remove(this.CSS.inputError),this.nodes.inputHolder.insertBefore(this.nodes.progress,this.nodes.input)}selectLinkUrl(e){e.preventDefault(),e.stopPropagation();const t=window.getSelection(),o=new Range,n=t.anchorNode.parentNode.closest(`.${this.CSS.inputHolder}`).querySelector(`.${this.CSS.inputEl}`);o.selectNodeContents(n),t.removeAllRanges(),t.addRange(o)}prepareLinkPreview(){const e=this.make("a",this.CSS.linkContent,{target:"_blank",rel:"nofollow noindex noreferrer"});return this.nodes.linkImage=this.make("div",this.CSS.linkImage),this.nodes.linkTitle=this.make("div",this.CSS.linkTitle),this.nodes.linkDescription=this.make("p",this.CSS.linkDescription),this.nodes.linkText=this.make("span",this.CSS.linkText),e}showLinkPreview({image:e,title:t,description:o}){this.nodes.container.appendChild(this.nodes.linkContent),e&&e.url&&(this.nodes.linkImage.style.backgroundImage="url("+e.url+")",this.nodes.linkContent.appendChild(this.nodes.linkImage)),t&&(this.nodes.linkTitle.textContent=t,this.nodes.linkContent.appendChild(this.nodes.linkTitle)),o&&(this.nodes.linkDescription.textContent=o,this.nodes.linkContent.appendChild(this.nodes.linkDescription)),this.nodes.linkContent.classList.add(this.CSS.linkContentRendered),this.nodes.linkContent.setAttribute("href",this.data.link),this.nodes.linkContent.appendChild(this.nodes.linkText);try{this.nodes.linkText.textContent=new URL(this.data.link).hostname}catch{this.nodes.linkText.textContent=this.data.link}}showProgress(){this.nodes.progress.classList.add(this.CSS.progressLoading)}hideProgress(){return new Promise(e=>{this.nodes.progress.classList.remove(this.CSS.progressLoading),this.nodes.progress.classList.add(this.CSS.progressLoaded),setTimeout(e,500)})}applyErrorStyle(){this.nodes.inputHolder.classList.add(this.CSS.inputError),this.nodes.progress.remove()}async fetchLinkData(e){this.showProgress(),this.data={link:e};try{const{body:t}=await br.get({url:this.config.endpoint,headers:this.config.headers,data:{url:e}});this.onFetch(t)}catch{this.fetchingFailed(this.api.i18n.t("Couldn't fetch the link data"))}}onFetch(e){if(!e||!e.success){this.fetchingFailed(this.api.i18n.t("Couldn't get this link data, try the other one"));return}const t=e.meta,o=e.link||this.data.link;if(this.data={meta:t,link:o},!t){this.fetchingFailed(this.api.i18n.t("Wrong response format from the server"));return}this.hideProgress().then(()=>{this.nodes.inputHolder.remove(),this.showLinkPreview(t)})}fetchingFailed(e){this.api.notifier.show({message:e,style:"error"}),this.applyErrorStyle()}make(e,t=null,o={}){const n=document.createElement(e);Array.isArray(t)?n.classList.add(...t):t&&n.classList.add(t);for(const i in o)n[i]=o[i];return n}};(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode('.cdx-nested-list{margin:0;padding:0;outline:none;counter-reset:item;list-style:none}.cdx-nested-list__item{line-height:1.6em;display:flex;margin:2px 0}.cdx-nested-list__item [contenteditable]{outline:none}.cdx-nested-list__item-body{flex-grow:2}.cdx-nested-list__item-content,.cdx-nested-list__item-children{flex-basis:100%}.cdx-nested-list__item-content{word-break:break-word;white-space:pre-wrap}.cdx-nested-list__item:before{counter-increment:item;margin-right:5px;white-space:nowrap}.cdx-nested-list--ordered>.cdx-nested-list__item:before{content:counters(item,".") ". "}.cdx-nested-list--unordered>.cdx-nested-list__item:before{content:"•"}.cdx-nested-list__settings{display:flex}.cdx-nested-list__settings .cdx-settings-button{width:50%}')),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function He(r,e=null,t={}){const o=document.createElement(r);Array.isArray(e)?o.classList.add(...e):e&&o.classList.add(e);for(const n in t)o[n]=t[n];return o}function qo(r){const e=He("div");return e.appendChild(r),e.innerHTML}function Wo(r){let e;return r.nodeType!==Node.ELEMENT_NODE?e=r.textContent:(e=r.innerHTML,e=e.replaceAll("<br>","")),e.trim().length===0}let Ue=class eo{constructor(){this.savedFakeCaret=void 0}save(){const e=eo.range,t=He("span");t.hidden=!0,e.insertNode(t),this.savedFakeCaret=t}restore(){if(!this.savedFakeCaret)return;const e=window.getSelection(),t=new Range;t.setStartAfter(this.savedFakeCaret),t.setEndAfter(this.savedFakeCaret),e.removeAllRanges(),e.addRange(t),setTimeout(()=>{this.savedFakeCaret.remove()},150)}static get range(){const e=window.getSelection();return e&&e.rangeCount?e.getRangeAt(0):null}static extractFragmentFromCaretPositionTillTheEnd(){const e=window.getSelection();if(!e.rangeCount)return;const t=e.getRangeAt(0);let o=t.startContainer;o.nodeType!==Node.ELEMENT_NODE&&(o=o.parentNode);const n=o.closest("[contenteditable]");t.deleteContents();const i=t.cloneRange();return i.selectNodeContents(n),i.setStart(t.endContainer,t.endOffset),i.extractContents()}static focus(e,t=!0){const o=document.createRange(),n=window.getSelection();o.selectNodeContents(e),o.collapse(t),n.removeAllRanges(),n.addRange(o)}static isAtStart(){const e=window.getSelection();if(e.focusOffset>0)return!1;const t=e.focusNode;return eo.getHigherLevelSiblings(t,"left").every(o=>Wo(o))}static getHigherLevelSiblings(e,t="left"){let o=e;const n=[];for(;o.parentNode&&o.parentNode.contentEditable!=="true";)o=o.parentNode;const i=t==="left"?"previousSibling":"nextSibling";for(;o[i];)o=o[i],n.push(o);return n}};const yr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',Vo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';let wr=class to{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:Vo,title:"List"}}constructor({data:e,config:t,api:o,readOnly:n}){this.nodes={wrapper:null},this.api=o,this.readOnly=n,this.config=t,this.defaultListStyle=this.config.defaultStyle==="ordered"?"ordered":"unordered";const i={style:this.defaultListStyle,items:[]};this.data=e&&Object.keys(e).length?e:i,this.caret=new Ue}render(){return this.nodes.wrapper=this.makeListWrapper(this.data.style,[this.CSS.baseBlock]),this.data.items.length?this.appendItems(this.data.items,this.nodes.wrapper):this.appendItems([{content:"",items:[]}],this.nodes.wrapper),this.readOnly||this.nodes.wrapper.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.enterPressed(e);break;case"Backspace":this.backspace(e);break;case"Tab":e.shiftKey?this.shiftTab(e):this.addTab(e);break}},!1),this.nodes.wrapper}renderSettings(){return[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:yr},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:Vo}].map(e=>({name:e.name,icon:e.icon,label:e.label,isActive:this.data.style===e.name,closeOnActivate:!0,onActivate:()=>{this.listStyle=e.name}}))}static get pasteConfig(){return{tags:["OL","UL","LI"]}}onPaste(e){const t=e.detail.data;this.data=this.pasteHandler(t);const o=this.nodes.wrapper;o&&o.parentNode.replaceChild(this.render(),o)}pasteHandler(e){const{tagName:t}=e;let o,n;switch(t){case"OL":o="ordered",n="ol";break;case"UL":case"LI":o="unordered",n="ul"}const i={style:o,items:[]},s=a=>Array.from(a.querySelectorAll(":scope > li")).map(c=>{var l;const u=c.querySelector(`:scope > ${n}`),d=u?s(u):[];return{content:((l=c==null?void 0:c.firstChild)==null?void 0:l.textContent)||"",items:d}});return i.items=s(e),i}appendItems(e,t){e.forEach(o=>{const n=this.createItem(o.content,o.items);t.appendChild(n)})}createItem(e,t=[]){const o=He("li",this.CSS.item),n=He("div",this.CSS.itemBody),i=He("div",this.CSS.itemContent,{innerHTML:e,contentEditable:!this.readOnly});return n.appendChild(i),o.appendChild(n),t&&t.length>0&&this.addChildrenList(o,t),o}save(){const e=t=>Array.from(t.querySelectorAll(`:scope > .${this.CSS.item}`)).map(o=>{const n=o.querySelector(`.${this.CSS.itemChildren}`),i=this.getItemContent(o),s=n?e(n):[];return{content:i,items:s}});return{style:this.data.style,items:e(this.nodes.wrapper)}}addChildrenList(e,t){const o=e.querySelector(`.${this.CSS.itemBody}`),n=this.makeListWrapper(void 0,[this.CSS.itemChildren]);this.appendItems(t,n),o.appendChild(n)}makeListWrapper(e=this.listStyle,t=[]){const o=e==="ordered"?"ol":"ul",n=e==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered;return t.push(n),He(o,[this.CSS.wrapper,...t])}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-nested-list",wrapperOrdered:"cdx-nested-list--ordered",wrapperUnordered:"cdx-nested-list--unordered",item:"cdx-nested-list__item",itemBody:"cdx-nested-list__item-body",itemContent:"cdx-nested-list__item-content",itemChildren:"cdx-nested-list__item-children",settingsWrapper:"cdx-nested-list__settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}get listStyle(){return this.data.style||this.defaultListStyle}set listStyle(e){const t=Array.from(this.nodes.wrapper.querySelectorAll(`.${this.CSS.wrapper}`));t.push(this.nodes.wrapper),t.forEach(o=>{o.classList.toggle(this.CSS.wrapperUnordered,e==="unordered"),o.classList.toggle(this.CSS.wrapperOrdered,e==="ordered")}),this.data.style=e}get currentItem(){let e=window.getSelection().anchorNode;return e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode),e.closest(`.${this.CSS.item}`)}enterPressed(e){const t=this.currentItem;if(e.stopPropagation(),e.preventDefault(),e.isComposing)return;const o=this.getItemContent(t).trim().length===0,n=t.parentNode===this.nodes.wrapper,i=t.nextElementSibling===null;if(n&&i&&o){this.getOutOfList();return}else if(i&&o){this.unshiftItem();return}const s=Ue.extractFragmentFromCaretPositionTillTheEnd(),a=qo(s),c=t.querySelector(`.${this.CSS.itemChildren}`),l=this.createItem(a,void 0);c&&Array.from(c.querySelectorAll(`.${this.CSS.item}`)).length>0?c.prepend(l):t.after(l),this.focusItem(l)}unshiftItem(){const e=this.currentItem,t=e.parentNode.closest(`.${this.CSS.item}`);if(!t)return;this.caret.save(),t.after(e),this.caret.restore();const o=t.querySelector(`.${this.CSS.itemChildren}`);o.children.length===0&&o.remove()}getItemContent(e){const t=e.querySelector(`.${this.CSS.itemContent}`);return Wo(t)?"":t.innerHTML}focusItem(e,t=!0){const o=e.querySelector(`.${this.CSS.itemContent}`);Ue.focus(o,t)}getOutOfList(){this.currentItem.remove(),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex())}backspace(e){if(!Ue.isAtStart())return;e.preventDefault();const t=this.currentItem,o=t.previousSibling,n=t.parentNode.closest(`.${this.CSS.item}`);if(!o&&!n)return;e.stopPropagation();let i;if(o){const u=o.querySelectorAll(`.${this.CSS.item}`);i=Array.from(u).pop()||o}else i=n;const s=Ue.extractFragmentFromCaretPositionTillTheEnd(),a=qo(s),c=i.querySelector(`.${this.CSS.itemContent}`);Ue.focus(c,!1),this.caret.save(),c.insertAdjacentHTML("beforeend",a);let l=t.querySelectorAll(`.${this.CSS.itemChildren} > .${this.CSS.item}`);l=Array.from(l),l=l.filter(u=>u.parentNode.closest(`.${this.CSS.item}`)===t),l.reverse().forEach(u=>{o?i.after(u):t.after(u)}),t.remove(),this.caret.restore()}addTab(e){e.stopPropagation(),e.preventDefault();const t=this.currentItem,o=t.previousSibling;if(!o)return;const n=o.querySelector(`.${this.CSS.itemChildren}`);if(this.caret.save(),n)n.appendChild(t);else{const i=this.makeListWrapper(void 0,[this.CSS.itemChildren]),s=o.querySelector(`.${this.CSS.itemBody}`);i.appendChild(t),s.appendChild(i)}this.caret.restore()}shiftTab(e){e.stopPropagation(),e.preventDefault(),this.unshiftItem()}static joinRecursive(e){return e.items.map(t=>`${t.content} ${to.joinRecursive(t)}`).join("")}static get conversionConfig(){return{export:e=>to.joinRecursive(e),import:e=>({items:[{content:e,items:[]}],style:"unordered"})}}};var xr=Object.defineProperty,Er=(r,e,t)=>e in r?xr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cr=(r,e,t)=>(Er(r,typeof e!="symbol"?e+"":e,t),t);const Sr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 8L5 12L9 16"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 8L19 12L15 16"/></svg>';function Tr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function qt(r,e,t){var o,n,i,s,a;e==null&&(e=100);function c(){var u=Date.now()-s;u<e&&u>=0?o=setTimeout(c,e-u):(o=null,t||(a=r.apply(i,n),i=n=null))}var l=function(){i=this,n=arguments,s=Date.now();var u=t&&!o;return o||(o=setTimeout(c,e)),u&&(a=r.apply(i,n),i=n=null),a};return l.clear=function(){o&&(clearTimeout(o),o=null)},l.flush=function(){o&&(a=r.apply(i,n),i=n=null,clearTimeout(o),o=null)},l}qt.debounce=qt;var _r=qt;const Br=Tr(_r),Yo=class Ke{constructor({data:e,api:t,readOnly:o}){this.api=t,this.nodes={wrapper:null,container:null,progress:null,input:null,inputHolder:null},this._data=Object.keys(e).length!==0?e:void 0,this.readOnly=o}set data(e){var t;if(!(e instanceof Object))throw Error("Embed Tool data should be object");this._data=e;const o=this.nodes.wrapper;o&&((t=o.parentNode)==null||t.replaceChild(this.render(),o))}get data(){return this._data}get CSS(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"embed-tool",inputEl:"embed-tool__input",inputHolder:"embed-tool__input-holder",inputError:"embed-tool__input-holder--error",linkContent:"embed-tool__content",linkContentRendered:"embed-tool__content--rendered",linkImage:"embed-tool__image",linkTitle:"embed-tool__title",linkDescription:"embed-tool__description",linkText:"embed-tool__anchor",progress:"embed-tool__progress",progressLoading:"embed-tool__progress--loading",progressLoaded:"embed-tool__progress--loaded",caption:"embed-tool__caption",content:"embed-tool__content"}}render(){return this._data?this.nodes.wrapper=this.makeEmbed()??this.make("div",this.CSS.baseClass):(this.nodes.wrapper=this.make("div",this.CSS.baseClass),this.nodes.container=this.make("div",this.CSS.container),this.nodes.inputHolder=this.makeInputHolder(),this.nodes.container.appendChild(this.nodes.inputHolder),this.nodes.wrapper.appendChild(this.nodes.container)),this.nodes.wrapper}makeEmbed(){var e,t;if(this.showProgress(),!this.data||!Ke.services)return null;const{html:o}=Ke.services[this.data.service],n=this.make("div",this.CSS.baseClass),i=this.make("div",this.CSS.container),s=document.createElement("template");s.innerHTML=o,(e=s.content.firstChild)==null||e.setAttribute("src",this.data.embed),(t=s.content.firstChild)==null||t.classList.add(this.CSS.content),this.nodes.container=i;const a=this.embedIsReady(this.nodes.container);return s.content.firstChild&&i.appendChild(s.content.firstChild),a.then(()=>{this.hideProgress()}),n.appendChild(i),n}async embedIsReady(e){let t=null;return new Promise(o=>{t=new MutationObserver(Br(o,450)),t.observe(e,{childList:!0,subtree:!0})}).then(()=>{t==null||t.disconnect()})}makeInputHolder(){const e=this.make("div",this.CSS.inputHolder);return this.nodes.progress=this.make("label",this.CSS.progress),this.nodes.input=this.make("div",[this.CSS.input,this.CSS.inputEl],{contentEditable:!this.readOnly}),this.nodes.input.dataset.placeholder=this.api.i18n.t("Link"),this.nodes.input.addEventListener("keydown",t=>{const[o,n]=[13,65],i=t.ctrlKey||t.metaKey;switch(t.keyCode){case o:t.preventDefault(),t.stopPropagation(),t.target&&"textContent"in t.target&&typeof t.target.textContent=="string"&&this.setData(t.target.textContent);break;case n:i&&t.target&&"textContent"in t.target&&typeof t.target.textContent=="string"&&this.setData(t.target.textContent);break}}),e.appendChild(this.nodes.progress),e.appendChild(this.nodes.input),e}setData(e){var t,o;if(!Ke.services)return;const n=(t=Object.entries(Ke.services).find(([,p])=>p.regex.test(e)))==null?void 0:t[1];if(!n)return;const{regex:i,embedUrl:s,width:a,height:c,id:l=p=>p.shift()}=n,u=(o=i.exec(e))==null?void 0:o.slice(1);if(!u)return;const d=s.replace(/<%= remote_id %>/g,l(u)??"");this.data={service:n.name,source:e,embed:d,width:a,height:c}}static prepare({config:e={}}){const{services:t}=e;if(!t)return;let o=Object.entries(Ir);const n=Object.entries(t).filter(([,i])=>typeof i=="boolean"&&i===!0).map(([i])=>i);n.length&&(o=o.filter(([i])=>n.includes(i))),Ke.services=o.reduce((i,[s,a])=>s in i?(i[s]=Object.assign({},i[s],a),i):(i[s]=a,i),{})}static checkServiceConfig(e){const{regex:t,embedUrl:o,html:n,height:i,width:s,id:a}=e;let c=t&&t instanceof RegExp&&o&&typeof o=="string"&&n&&typeof n=="string";return c=c&&(a!==void 0?a instanceof Function:!0),c=c&&(i!==void 0?Number.isFinite(i):!0),c=c&&(s!==void 0?Number.isFinite(s):!0),c}save(){return this.data}static get toolbox(){return{icon:Sr,title:"Embed"}}showProgress(){var e;(e=this.nodes.progress)==null||e.classList.add(this.CSS.progressLoading)}hideProgress(){return new Promise(e=>{var t,o;(t=this.nodes.progress)==null||t.classList.remove(this.CSS.progressLoading),(o=this.nodes.progress)==null||o.classList.add(this.CSS.progressLoaded),setTimeout(e,500)})}make(e,t,o){const n=document.createElement(e);Array.isArray(t)?n.classList.add(...t):t&&n.classList.add(t);for(const i in o){const s=i,a=o[s];a!==void 0&&(n[s]=a)}return n}static get enableLineBreaks(){return!0}};Cr(Yo,"services");let Lr=Yo;const Ir={vimeo:{name:"vimeo",regex:/(?:http[s]?:\/\/)?(?:www.)?(?:player.)?vimeo\.co(?:.+\/([^\/]\d+)(?:#t=[\d]+)?s?$)/,embedUrl:"https://player.vimeo.com/video/<%= remote_id %>?title=0&byline=0",html:'<iframe style="width:100%;" height="320" frameborder="0"></iframe>',height:320,width:580},youtube:{name:"youtube",regex:/(?:https?:\/\/)?(?:www\.)?(?:(?:youtu\.be\/)|(?:youtube\.com)\/(?:v\/|u\/\w\/|embed\/|watch))(?:(?:\?v=)?([^#&?=]*))?((?:[?&]\w*=\w*)*)/,embedUrl:"https://www.youtube.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580,id:([r,e])=>{if(!e&&r)return r;const t={start:"start",end:"end",t:"start",time_continue:"start",list:"list"},o=e.slice(1).split("&").map(n=>{const[i,s]=n.split("=");return r?!t[i]||s==="LL"||s.startsWith("RDMM")||s.startsWith("FL")?null:`${t[i]}=${s}`:(r=s,null)}).filter(n=>!!n);return r+"?"+o.join("&")}},coub:{name:"coub",regex:/https?:\/\/coub\.com\/view\/([^\/\?\&]+)/,embedUrl:"https://coub.com/embed/<%= remote_id %>",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},vine:{name:"vine",regex:/https?:\/\/vine\.co\/v\/([^\/\?\&]+)/,embedUrl:"https://vine.co/v/<%= remote_id %>/embed/simple/",html:'<iframe style="width:100%;" height="320" frameborder="0" allowfullscreen></iframe>',height:320,width:580},imgur:{name:"imgur",regex:/https?:\/\/(?:i\.)?imgur\.com.*\/([a-zA-Z0-9]+)(?:\.gifv)?/,embedUrl:"http://imgur.com/<%= remote_id %>/embed",html:'<iframe allowfullscreen="true" scrolling="no" id="imgur-embed-iframe-pub-<%= remote_id %>" class="imgur-embed-iframe-pub" style="height: 500px; width: 100%; border: 1px solid #000"></iframe>',height:500,width:540},gfycat:{name:"gfycat",regex:/https?:\/\/gfycat\.com(?:\/detail)?\/([a-zA-Z]+)/,embedUrl:"https://gfycat.com/ifr/<%= remote_id %>",html:`<iframe frameborder='0' scrolling='no' style="width:100%;" height='436' allowfullscreen ></iframe>`,height:436,width:580},"twitch-channel":{name:"twitch-channel",regex:/https?:\/\/www\.twitch\.tv\/([^\/\?\&]*)\/?$/,embedUrl:"https://player.twitch.tv/?channel=<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"twitch-video":{name:"twitch-video",regex:/https?:\/\/www\.twitch\.tv\/(?:[^\/\?\&]*\/v|videos)\/([0-9]*)/,embedUrl:"https://player.twitch.tv/?video=v<%= remote_id %>",html:'<iframe frameborder="0" allowfullscreen="true" scrolling="no" height="366" style="width:100%;"></iframe>',height:366,width:600},"yandex-music-album":{name:"yandex-music-album",regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/?$/,embedUrl:"https://music.yandex.ru/iframe/#album/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" style="width:100%;" height="400"></iframe>',height:400,width:540},"yandex-music-track":{name:"yandex-music-track",regex:/https?:\/\/music\.yandex\.ru\/album\/([0-9]*)\/track\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#track/<%= remote_id %>/",html:'<iframe frameborder="0" style="border:none;width:540px;height:100px;" style="width:100%;" height="100"></iframe>',height:100,width:540,id:r=>r.join("/")},"yandex-music-playlist":{name:"yandex-music-playlist",regex:/https?:\/\/music\.yandex\.ru\/users\/([^\/\?\&]*)\/playlists\/([0-9]*)/,embedUrl:"https://music.yandex.ru/iframe/#playlist/<%= remote_id %>/show/cover/description/",html:'<iframe frameborder="0" style="border:none;width:540px;height:400px;" width="540" height="400"></iframe>',height:400,width:540,id:r=>r.join("/")},codepen:{name:"codepen",regex:/https?:\/\/codepen\.io\/([^\/\?\&]*)\/pen\/([^\/\?\&]*)/,embedUrl:"https://codepen.io/<%= remote_id %>?height=300&theme-id=0&default-tab=css,result&embed-version=2",html:"<iframe height='300' scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe>",height:300,width:600,id:r=>r.join("/embed/")},instagram:{name:"instagram",regex:/https?:\/\/www\.instagram\.com\/p\/([^\/\?\&]+)\/?.*/,embedUrl:"https://www.instagram.com/p/<%= remote_id %>/embed",html:'<iframe width="400" height="505" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:505,width:400},twitter:{name:"twitter",regex:/^https?:\/\/twitter\.com\/(?:#!\/)?(\w+)\/status(?:es)?\/(\d+?.*)?$/,embedUrl:"https://twitframe.com/show?url=https://twitter.com/<%= remote_id %>",html:'<iframe width="600" height="600" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600,id:r=>r.join("/status/")},pinterest:{name:"pinterest",regex:/https?:\/\/([^\/\?\&]*).pinterest.com\/pin\/([^\/\?\&]*)\/?$/,embedUrl:"https://assets.pinterest.com/ext/embed.html?id=<%= remote_id %>",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 400px; max-height: 1000px;'></iframe>",id:r=>r[1]},facebook:{name:"facebook",regex:/https?:\/\/www.facebook.com\/([^\/\?\&]*)\/(.*)/,embedUrl:"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/<%= remote_id %>&width=500",html:"<iframe scrolling='no' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%; min-height: 500px; max-height: 1000px;'></iframe>",id:r=>r.join("/")},aparat:{name:"aparat",regex:/(?:http[s]?:\/\/)?(?:www.)?aparat\.com\/v\/([^\/\?\&]+)\/?/,embedUrl:"https://www.aparat.com/video/video/embed/videohash/<%= remote_id %>/vt/frame",html:'<iframe width="600" height="300" style="margin: 0 auto;" frameborder="0" scrolling="no" allowtransparency="true"></iframe>',height:300,width:600},miro:{name:"miro",regex:/https:\/\/miro.com\/\S+(\S{12})\/(\S+)?/,embedUrl:"https://miro.com/app/live-embed/<%= remote_id %>",html:'<iframe width="700" height="500" style="margin: 0 auto;" allowFullScreen frameBorder="0" scrolling="no"></iframe>'},github:{name:"github",regex:/https?:\/\/gist.github.com\/([^\/\?\&]*)\/([^\/\?\&]*)/,embedUrl:'data:text/html;charset=utf-8,<head><base target="_blank" /></head><body><script src="https://gist.github.com/<%= remote_id %>" ><\/script></body>',html:'<iframe width="100%" height="350" frameborder="0" style="margin: 0 auto;"></iframe>',height:300,width:600,id:r=>`${r.join("/")}.js`}};(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image,.image-tool--empty .image-tool__caption,.image-tool--loading .image-tool__caption{display:none}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--loading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--loading .image-tool__image-picture,.image-tool--loading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Mr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',Or='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',Ko='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',Ar='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>';function $e(r,e=null,t={}){const o=document.createElement(r);Array.isArray(e)?o.classList.add(...e):e&&o.classList.add(e);for(const n in t)o[n]=t[n];return o}class ge{constructor({api:e,config:t,onSelectFile:o,readOnly:n}){this.api=e,this.config=t,this.onSelectFile=o,this.readOnly=n,this.nodes={wrapper:$e("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:$e("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:$e("div",this.CSS.imagePreloader),caption:$e("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}static get status(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}render(e){return!e.file||Object.keys(e.file).length===0?this.toggleStatus(ge.status.EMPTY):this.toggleStatus(ge.status.UPLOADING),this.nodes.wrapper}createFileButton(){const e=$e("div",[this.CSS.button]);return e.innerHTML=this.config.buttonContent||`${Ko} ${this.api.i18n.t("Select an Image")}`,e.addEventListener("click",()=>{this.onSelectFile()}),e}showPreloader(e){this.nodes.imagePreloader.style.backgroundImage=`url(${e})`,this.toggleStatus(ge.status.UPLOADING)}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(ge.status.EMPTY)}fillImage(e){const t=/\.mp4$/.test(e)?"VIDEO":"IMG",o={src:e};let n="load";t==="VIDEO"&&(o.autoplay=!0,o.loop=!0,o.muted=!0,o.playsinline=!0,n="loadeddata"),this.nodes.imageEl=$e(t,this.CSS.imageEl,o),this.nodes.imageEl.addEventListener(n,()=>{this.toggleStatus(ge.status.FILLED),this.nodes.imagePreloader&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(e){this.nodes.caption&&(this.nodes.caption.innerHTML=e)}toggleStatus(e){for(const t in ge.status)Object.prototype.hasOwnProperty.call(ge.status,t)&&this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${ge.status[t]}`,e===ge.status[t])}applyTune(e,t){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${e}`,t)}}function Rr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xo={exports:{}};(function(r,e){(function(t,o){r.exports=o()})(window,function(){return function(t){var o={};function n(i){if(o[i])return o[i].exports;var s=o[i]={i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=o,n.d=function(i,s,a){n.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:a})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,s){if(1&s&&(i=n(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var c in i)n.d(a,c,(function(l){return i[l]}).bind(null,c));return a},n.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(s,"a",s),s},n.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},n.p="",n(n.s=3)}([function(t,o){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}t.exports=n},function(t,o,n){(function(i){var s=n(2),a=setTimeout;function c(){}function l(f){if(!(this instanceof l))throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(f,this)}function u(f,v){for(;f._state===3;)f=f._value;f._state!==0?(f._handled=!0,l._immediateFn(function(){var b=f._state===1?v.onFulfilled:v.onRejected;if(b!==null){var w;try{w=b(f._value)}catch(E){return void p(v.promise,E)}d(v.promise,w)}else(f._state===1?d:p)(v.promise,f._value)})):f._deferreds.push(v)}function d(f,v){try{if(v===f)throw new TypeError("A promise cannot be resolved with itself.");if(v&&(typeof v=="object"||typeof v=="function")){var b=v.then;if(v instanceof l)return f._state=3,f._value=v,void k(f);if(typeof b=="function")return void g((w=b,E=v,function(){w.apply(E,arguments)}),f)}f._state=1,f._value=v,k(f)}catch(x){p(f,x)}var w,E}function p(f,v){f._state=2,f._value=v,k(f)}function k(f){f._state===2&&f._deferreds.length===0&&l._immediateFn(function(){f._handled||l._unhandledRejectionFn(f._value)});for(var v=0,b=f._deferreds.length;v<b;v++)u(f,f._deferreds[v]);f._deferreds=null}function h(f,v,b){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof v=="function"?v:null,this.promise=b}function g(f,v){var b=!1;try{f(function(w){b||(b=!0,d(v,w))},function(w){b||(b=!0,p(v,w))})}catch(w){if(b)return;b=!0,p(v,w)}}l.prototype.catch=function(f){return this.then(null,f)},l.prototype.then=function(f,v){var b=new this.constructor(c);return u(this,new h(f,v,b)),b},l.prototype.finally=s.a,l.all=function(f){return new l(function(v,b){if(!f||f.length===void 0)throw new TypeError("Promise.all accepts an array");var w=Array.prototype.slice.call(f);if(w.length===0)return v([]);var E=w.length;function x(V,_){try{if(_&&(typeof _=="object"||typeof _=="function")){var T=_.then;if(typeof T=="function")return void T.call(_,function(O){x(V,O)},b)}w[V]=_,--E==0&&v(w)}catch(O){b(O)}}for(var I=0;I<w.length;I++)x(I,w[I])})},l.resolve=function(f){return f&&typeof f=="object"&&f.constructor===l?f:new l(function(v){v(f)})},l.reject=function(f){return new l(function(v,b){b(f)})},l.race=function(f){return new l(function(v,b){for(var w=0,E=f.length;w<E;w++)f[w].then(v,b)})},l._immediateFn=typeof i=="function"&&function(f){i(f)}||function(f){a(f,0)},l._unhandledRejectionFn=function(f){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",f)},o.a=l}).call(this,n(5).setImmediate)},function(t,o,n){o.a=function(i){var s=this.constructor;return this.then(function(a){return s.resolve(i()).then(function(){return a})},function(a){return s.resolve(i()).then(function(){return s.reject(a)})})}},function(t,o,n){function i(g){return(i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(g)}n(4);var s,a,c,l,u,d,p,k=n(8),h=(a=function(g){return new Promise(function(f,v){g=l(g),(g=u(g)).beforeSend&&g.beforeSend();var b=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");b.open(g.method,g.url),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(g.headers).forEach(function(E){var x=g.headers[E];b.setRequestHeader(E,x)});var w=g.ratio;b.upload.addEventListener("progress",function(E){var x=Math.round(E.loaded/E.total*100),I=Math.ceil(x*w/100);g.progress(Math.min(I,100))},!1),b.addEventListener("progress",function(E){var x=Math.round(E.loaded/E.total*100),I=Math.ceil(x*(100-w)/100)+w;g.progress(Math.min(I,100))},!1),b.onreadystatechange=function(){if(b.readyState===4){var E=b.response;try{E=JSON.parse(E)}catch{}var x=k.parseHeaders(b.getAllResponseHeaders()),I={body:E,code:b.status,headers:x};p(b.status)?f(I):v(I)}},b.send(g.data)})},c=function(g){return g.method="POST",a(g)},l=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(g.url&&typeof g.url!="string")throw new Error("Url must be a string");if(g.url=g.url||"",g.method&&typeof g.method!="string")throw new Error("`method` must be a string or null");if(g.method=g.method?g.method.toUpperCase():"GET",g.headers&&i(g.headers)!=="object")throw new Error("`headers` must be an object or null");if(g.headers=g.headers||{},g.type&&(typeof g.type!="string"||!Object.values(s).includes(g.type)))throw new Error("`type` must be taken from module's «contentType» library");if(g.progress&&typeof g.progress!="function")throw new Error("`progress` must be a function or null");if(g.progress=g.progress||function(f){},g.beforeSend=g.beforeSend||function(f){},g.ratio&&typeof g.ratio!="number")throw new Error("`ratio` must be a number");if(g.ratio<0||g.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(g.ratio=g.ratio||90,g.accept&&typeof g.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(g.accept=g.accept||"*/*",g.multiple&&typeof g.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(g.multiple=g.multiple||!1,g.fieldName&&typeof g.fieldName!="string")throw new Error("`fieldName` must be a string");return g.fieldName=g.fieldName||"files",g},u=function(g){switch(g.method){case"GET":var f=d(g.data,s.URLENCODED);delete g.data,g.url=/\?/.test(g.url)?g.url+"&"+f:g.url+"?"+f;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var v=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||s.JSON}(g);(k.isFormData(g.data)||k.isFormElement(g.data))&&(v=s.FORM),g.data=d(g.data,v),v!==h.contentType.FORM&&(g.headers["content-type"]=v)}return g},d=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case s.URLENCODED:return k.urlEncode(g);case s.JSON:return k.jsonEncode(g);case s.FORM:return k.formEncode(g);default:return g}},p=function(g){return g>=200&&g<300},{contentType:s={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:a,get:function(g){return g.method="GET",a(g)},post:c,transport:function(g){return g=l(g),k.selectFiles(g).then(function(f){for(var v=new FormData,b=0;b<f.length;b++)v.append(g.fieldName,f[b],f[b].name);k.isObject(g.data)&&Object.keys(g.data).forEach(function(E){var x=g.data[E];v.append(E,x)});var w=g.beforeSend;return g.beforeSend=function(){return w(f)},g.data=v,c(g)})},selectFiles:function(g){return delete(g=l(g)).beforeSend,k.selectFiles(g)}});t.exports=h},function(t,o,n){n.r(o);var i=n(1);window.Promise=window.Promise||i.a},function(t,o,n){(function(i){var s=i!==void 0&&i||typeof self<"u"&&self||window,a=Function.prototype.apply;function c(l,u){this._id=l,this._clearFn=u}o.setTimeout=function(){return new c(a.call(setTimeout,s,arguments),clearTimeout)},o.setInterval=function(){return new c(a.call(setInterval,s,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(l){l&&l.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(s,this._id)},o.enroll=function(l,u){clearTimeout(l._idleTimeoutId),l._idleTimeout=u},o.unenroll=function(l){clearTimeout(l._idleTimeoutId),l._idleTimeout=-1},o._unrefActive=o.active=function(l){clearTimeout(l._idleTimeoutId);var u=l._idleTimeout;u>=0&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},u))},n(6),o.setImmediate=typeof self<"u"&&self.setImmediate||i!==void 0&&i.setImmediate||this&&this.setImmediate,o.clearImmediate=typeof self<"u"&&self.clearImmediate||i!==void 0&&i.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(t,o,n){(function(i,s){(function(a,c){if(!a.setImmediate){var l,u,d,p,k,h=1,g={},f=!1,v=a.document,b=Object.getPrototypeOf&&Object.getPrototypeOf(a);b=b&&b.setTimeout?b:a,{}.toString.call(a.process)==="[object process]"?l=function(x){s.nextTick(function(){E(x)})}:function(){if(a.postMessage&&!a.importScripts){var x=!0,I=a.onmessage;return a.onmessage=function(){x=!1},a.postMessage("","*"),a.onmessage=I,x}}()?(p="setImmediate$"+Math.random()+"$",k=function(x){x.source===a&&typeof x.data=="string"&&x.data.indexOf(p)===0&&E(+x.data.slice(p.length))},a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),l=function(x){a.postMessage(p+x,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(x){E(x.data)},l=function(x){d.port2.postMessage(x)}):v&&"onreadystatechange"in v.createElement("script")?(u=v.documentElement,l=function(x){var I=v.createElement("script");I.onreadystatechange=function(){E(x),I.onreadystatechange=null,u.removeChild(I),I=null},u.appendChild(I)}):l=function(x){setTimeout(E,0,x)},b.setImmediate=function(x){typeof x!="function"&&(x=new Function(""+x));for(var I=new Array(arguments.length-1),V=0;V<I.length;V++)I[V]=arguments[V+1];var _={callback:x,args:I};return g[h]=_,l(h),h++},b.clearImmediate=w}function w(x){delete g[x]}function E(x){if(f)setTimeout(E,0,x);else{var I=g[x];if(I){f=!0;try{(function(V){var _=V.callback,T=V.args;switch(T.length){case 0:_();break;case 1:_(T[0]);break;case 2:_(T[0],T[1]);break;case 3:_(T[0],T[1],T[2]);break;default:_.apply(c,T)}})(I)}finally{w(x),f=!1}}}}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,n(0),n(7))},function(t,o){var n,i,s=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function l(b){if(n===setTimeout)return setTimeout(b,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(b,0);try{return n(b,0)}catch{try{return n.call(null,b,0)}catch{return n.call(this,b,0)}}}(function(){try{n=typeof setTimeout=="function"?setTimeout:a}catch{n=a}try{i=typeof clearTimeout=="function"?clearTimeout:c}catch{i=c}})();var u,d=[],p=!1,k=-1;function h(){p&&u&&(p=!1,u.length?d=u.concat(d):k=-1,d.length&&g())}function g(){if(!p){var b=l(h);p=!0;for(var w=d.length;w;){for(u=d,d=[];++k<w;)u&&u[k].run();k=-1,w=d.length}u=null,p=!1,function(E){if(i===clearTimeout)return clearTimeout(E);if((i===c||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(E);try{i(E)}catch{try{return i.call(null,E)}catch{return i.call(this,E)}}}(b)}}function f(b,w){this.fun=b,this.array=w}function v(){}s.nextTick=function(b){var w=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)w[E-1]=arguments[E];d.push(new f(b,w)),d.length!==1||p||l(g)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,o,n){function i(a,c){for(var l=0;l<c.length;l++){var u=c[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var s=n(9);t.exports=function(){function a(){(function(d,p){if(!(d instanceof p))throw new TypeError("Cannot call a class as a function")})(this,a)}var c,l,u;return c=a,u=[{key:"urlEncode",value:function(d){return s(d)}},{key:"jsonEncode",value:function(d){return JSON.stringify(d)}},{key:"formEncode",value:function(d){if(this.isFormData(d))return d;if(this.isFormElement(d))return new FormData(d);if(this.isObject(d)){var p=new FormData;return Object.keys(d).forEach(function(k){var h=d[k];p.append(k,h)}),p}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(d){return Object.prototype.toString.call(d)==="[object Object]"}},{key:"isFormData",value:function(d){return d instanceof FormData}},{key:"isFormElement",value:function(d){return d instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(p,k){var h=document.createElement("INPUT");h.type="file",d.multiple&&h.setAttribute("multiple","multiple"),d.accept&&h.setAttribute("accept",d.accept),h.style.display="none",document.body.appendChild(h),h.addEventListener("change",function(g){var f=g.target.files;p(f),document.body.removeChild(h)},!1),h.click()})}},{key:"parseHeaders",value:function(d){var p=d.trim().split(/[\r\n]+/),k={};return p.forEach(function(h){var g=h.split(": "),f=g.shift(),v=g.join(": ");f&&(k[f]=v)}),k}}],(l=null)&&i(c.prototype,l),u&&i(c,u),a}()},function(t,o){var n=function(s){return encodeURIComponent(s).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},i=function(s,a,c,l){return a=a||null,c=c||"&",l=l||null,s?function(u){for(var d=new Array,p=0;p<u.length;p++)u[p]&&d.push(u[p]);return d}(Object.keys(s).map(function(u){var d,p,k=u;if(l&&(k=l+"["+k+"]"),typeof s[u]=="object"&&s[u]!==null)d=i(s[u],null,c,k);else{a&&(p=k,k=!isNaN(parseFloat(p))&&isFinite(p)?a+Number(k):k);var h=s[u];h=(h=(h=(h=h===!0?"1":h)===!1?"0":h)===0?"0":h)||"",d=n(k)+"="+n(h)}return d})).join(c).replace(/[!'()*]/g,""):""};t.exports=i}])})})(Xo);var Nr=Xo.exports;const Oe=Rr(Nr);function Wt(r){return r&&typeof r.then=="function"}class Pr{constructor({config:e,onUpload:t,onError:o}){this.config=e,this.onUpload=t,this.onError=o}uploadSelectedFile({onPreview:e}){const t=function(n){return new Promise((i,s)=>{const a=new FileReader;a.readAsDataURL(n),a.onload=c=>{e(c.target.result),i()},a.onerror=s})};let o;this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?o=Oe.selectFiles({accept:this.config.types}).then(n=>t(n[0]).then(()=>{const i=this.config.uploader.uploadByFile(n[0]);return Wt(i)||console.warn("Custom uploader method uploadByFile should return a Promise"),i})):o=Oe.selectFiles({accept:this.config.types}).then(n=>t(n[0]).then(()=>Oe.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types,headers:this.config.additionalRequestHeaders,beforeSend:()=>{},fieldName:this.config.field}).then(i=>i.body))),o.then(n=>{this.onUpload(n)}).catch(n=>{this.onError(n)})}uploadByUrl(e){let t;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(t=this.config.uploader.uploadByUrl(e),Wt(t)||console.warn("Custom uploader method uploadByUrl should return a Promise")):t=Oe.post({url:this.config.endpoints.byUrl,data:Object.assign({url:e},this.config.additionalRequestData),type:Oe.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(o=>o.body),t.then(o=>{this.onUpload(o)}).catch(o=>{this.onError(o)})}uploadByFile(e,{onPreview:t}){const o=new FileReader;o.readAsDataURL(e),o.onload=i=>{t(i.target.result)};let n;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")n=this.config.uploader.uploadByFile(e),Wt(n)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const i=new FormData;i.append(this.config.field,e),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([s,a])=>{i.append(s,a)}),n=Oe.post({url:this.config.endpoints.byFile,data:i,type:Oe.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(s=>s.body)}n.then(i=>{this.onUpload(i)}).catch(i=>{this.onError(i)})}}/**
 * Image Tool for the Editor.js
 *
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.js — main Tool's interface, public API and methods for working with data
 *  2) uploader.js — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.js — module for UI manipulations: render, showing preloader, etc
 *  4) tunes.js — working with Block Tunes: render buttons, handle clicks
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */class ut{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:Ko,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:Or,title:"With border",toggle:!0},{name:"stretched",icon:Ar,title:"Stretch image",toggle:!0},{name:"withBackground",icon:Mr,title:"With background",toggle:!0}]}constructor({data:e,config:t,api:o,readOnly:n,block:i}){this.api=o,this.readOnly=n,this.block=i,this.config={endpoints:t.endpoints||"",additionalRequestData:t.additionalRequestData||{},additionalRequestHeaders:t.additionalRequestHeaders||{},field:t.field||"image",types:t.types||"image/*",captionPlaceholder:this.api.i18n.t(t.captionPlaceholder||"Caption"),buttonContent:t.buttonContent||"",uploader:t.uploader||void 0,actions:t.actions||[]},this.uploader=new Pr({config:this.config,onUpload:s=>this.onUpload(s),onError:s=>this.uploadingFailed(s)}),this.ui=new ge({api:o,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:s=>{this.ui.showPreloader(s)}})},readOnly:n}),this._data={},this.data=e}render(){return this.ui.render(this.data)}validate(e){return e.file&&e.file.url}save(){const e=this.ui.nodes.caption;return this._data.caption=e.innerHTML,this.data}renderSettings(){return ut.tunes.concat(this.config.actions).map(e=>({icon:e.icon,label:this.api.i18n.t(e.title),name:e.name,toggle:e.toggle,isActive:this.data[e.name],onActivate:()=>{if(typeof e.action=="function"){e.action(e.name);return}this.tuneToggled(e.name)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(e){switch(e.type){case"tag":{const t=e.detail.data;if(/^blob:/.test(t.src)){const o=await(await fetch(t.src)).blob();this.uploadFile(o);break}this.uploadUrl(t.src);break}case"pattern":{const t=e.detail.data;this.uploadUrl(t);break}case"file":{const t=e.detail.file;this.uploadFile(t);break}}}set data(e){this.image=e.file,this._data.caption=e.caption||"",this.ui.fillCaption(this._data.caption),ut.tunes.forEach(({name:t})=>{const o=typeof e[t]<"u"?e[t]===!0||e[t]==="true":!1;this.setTune(t,o)})}get data(){return this._data}set image(e){this._data.file=e||{},e&&e.url&&this.ui.fillImage(e.url)}onUpload(e){e.success&&e.file?this.image=e.file:this.uploadingFailed("incorrect response: "+JSON.stringify(e))}uploadingFailed(e){console.log("Image Tool: uploading failed because of",e),this.api.notifier.show({message:this.api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(e){this.setTune(e,!this._data[e])}setTune(e,t){this._data[e]=t,this.ui.applyTune(e,t),e==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=t}).catch(o=>{console.error(o)})}uploadFile(e){this.uploader.uploadByFile(e,{onPreview:t=>{this.ui.showPreloader(t)}})}uploadUrl(e){this.ui.showPreloader(e),this.uploader.uploadByUrl(e)}}(function(){try{if(typeof document<"u"){var r=document.createElement("style");r.appendChild(document.createTextNode(".cdx-quote-icon svg{transform:rotate(180deg)}.cdx-quote{margin:0}.cdx-quote__text{min-height:158px;margin-bottom:10px}.cdx-quote [contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.cdx-quote [contentEditable=true][data-placeholder]:empty:before{opacity:1}.cdx-quote [contentEditable=true][data-placeholder]:empty:focus:before{opacity:0}.cdx-quote-settings{display:flex}.cdx-quote-settings .cdx-settings-button{width:50%}")),document.head.appendChild(r)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Dr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>',jr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>',Fr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>';class ze{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:Fr,title:"Quote"}}static get contentless(){return!0}static get enableLineBreaks(){return!0}static get DEFAULT_QUOTE_PLACEHOLDER(){return"Enter a quote"}static get DEFAULT_CAPTION_PLACEHOLDER(){return"Enter a caption"}static get ALIGNMENTS(){return{left:"left",center:"center"}}static get DEFAULT_ALIGNMENT(){return ze.ALIGNMENTS.left}static get conversionConfig(){return{import:"text",export:function(e){return e.caption?`${e.text} — ${e.caption}`:e.text}}}get CSS(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}get settings(){return[{name:"left",icon:jr},{name:"center",icon:Dr}]}constructor({data:e,config:t,api:o,readOnly:n}){const{ALIGNMENTS:i,DEFAULT_ALIGNMENT:s}=ze;this.api=o,this.readOnly=n,this.quotePlaceholder=t.quotePlaceholder||ze.DEFAULT_QUOTE_PLACEHOLDER,this.captionPlaceholder=t.captionPlaceholder||ze.DEFAULT_CAPTION_PLACEHOLDER,this.data={text:e.text||"",caption:e.caption||"",alignment:Object.values(i).includes(e.alignment)&&e.alignment||t.defaultAlignment||s}}render(){const e=this._make("blockquote",[this.CSS.baseClass,this.CSS.wrapper]),t=this._make("div",[this.CSS.input,this.CSS.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),o=this._make("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return t.dataset.placeholder=this.quotePlaceholder,o.dataset.placeholder=this.captionPlaceholder,e.appendChild(t),e.appendChild(o),e}save(e){const t=e.querySelector(`.${this.CSS.text}`),o=e.querySelector(`.${this.CSS.caption}`);return Object.assign(this.data,{text:t.innerHTML,caption:o.innerHTML})}static get sanitize(){return{text:{br:!0},caption:{br:!0},alignment:{}}}_toggleTune(e){this.data.alignment=e}_make(e,t=null,o={}){const n=document.createElement(e);Array.isArray(t)?n.classList.add(...t):t&&n.classList.add(t);for(const i in o)n[i]=o[i];return n}}const qe={fontWeight:"bold",backgroundColor:"#FFDA00",width:"100%",textAlign:"center",paddingTop:"0.3em",paddingBottom:"0.3em",border:"1px solid white"},Hr="このラインより先を有料にする";class Ur{constructor(){}static get toolbox(){return{title:"Payment",icon:'<svg style="transform:scale(0.7)" width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.0097 11.2778H14.218V12.7222H10.2863V14.1667H14.218V15.6111H10.2863V18.5H8.71365V15.6111H4.78198V14.1667H8.71365V12.7222H4.78198V11.2778H7.99022L3.99564 5.5H5.85926L9.49998 10.765L13.1407 5.5H15.0043L11.0097 11.2778Z" fill="#000000"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 5H6.16354L9.5 9.82499L12.8365 5H16L12.0054 10.7778H14.7684V13.2222H10.8368V13.6667H14.7684V16.1111H10.8368V19H8.16323V16.1111H4.23156V13.6667H8.16323V13.2222H4.23156V10.7778H6.99457L3 5ZM4.99133 6L8.9859 11.7778H5.33243V12.2222H9.2641V14.6667H5.33243V15.1111H9.2641V18H9.7359V15.1111H13.6676V14.6667H9.7359V12.2222H13.6676V11.7778H10.0141L14.0087 6H13.445L9.5 11.705L5.55501 6H4.99133Z" fill="#000000"/><rect width="4" height="3" fill="#000000"/><rect x="5" width="4" height="3" fill="#000000"/><rect x="10" width="4" height="3" fill="#000000"/><rect x="15" width="4" height="3" fill="#000000"/></svg>'}}render(){var t,o,n,i,s,a;const e=document.createElement("div");return e.innerText=Hr,e.style.fontWeight=((t=qe.fontWeight)==null?void 0:t.toString())??"",e.style.backgroundColor=((o=qe.backgroundColor)==null?void 0:o.toString())??"",e.style.paddingTop=((n=qe.paddingTop)==null?void 0:n.toString())??"",e.style.paddingBottom=((i=qe.paddingBottom)==null?void 0:i.toString())??"",e.style.width=((s=qe.width)==null?void 0:s.toString())??"",e.style.textAlign=((a=qe.textAlign)==null?void 0:a.toString())??"",e}save(){return{}}}const $r={class:fr,shortcut:"CMD+SHIFT+H",config:{placeholder:"へッダー",levels:[2,3],defaultLevel:2}},zr={class:wr,inlineToolbar:!0,config:{defaultStyle:"unordered"}},qr={class:Lr,inlineToolbar:!0,config:{services:{youtube:!0,vimeo:!0,twitter:!0,instagram:!0}}},Wr={class:ze,config:{quotePlaceholder:"引用を追加",captionPlaceholder:"キャプションを追加"}},Vr=r=>({class:kr,config:r}),Yr=r=>({class:ut,config:r}),Kr={class:Ur},Xr=r=>({header:$r,link:Vr(r==null?void 0:r.link),list:zr,embed:qr,image:Yr(r==null?void 0:r.image),quote:Wr,payment:Kr}),Gr=({id:r,data:e,onChange:t,config:o})=>{const n=ke.useRef(null);ke.useEffect(()=>{if(!n.current){const s=new nr({holder:r,tools:Xr(o),autofocus:!1,data:e,placeholder:"文字を入力",async onChange(){if(t){const a=await i();console.log(a),a&&t(a)}},i18n:sr,onReady(){new rr(s)}});n.current=s}return()=>{n.current&&n.current.destroy&&n.current.destroy()}},[]);const i=()=>{var s;if((s=n.current)!=null&&s.save)return n.current.save().then(a=>a)};return z.jsx("div",{id:r,className:"w-full"})},Zr=ke.memo(Gr);var Go={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var e={}.hasOwnProperty;function t(){for(var i="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(i=n(i,o(a)))}return i}function o(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return t.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var a in i)e.call(i,a)&&i[a]&&(s=n(s,a));return s}function n(i,s){return s?i?i+" "+s:i+s:i}r.exports?(t.default=t,r.exports=t):window.classNames=t})()})(Go);var Jr=Go.exports;const be=oo(Jr),j={"cdx-block":"_cdx-block_8gufy_2","ce-block":"_ce-block_8gufy_7","ce-paragraph":"_ce-paragraph_8gufy_14","link-tool":"_link-tool_8gufy_21","link-tool__content--rendered":"_link-tool__content--rendered_8gufy_24","link-in":"_link-in_8gufy_1","link-tool__content":"_link-tool__content_8gufy_24","link-tool__image":"_link-tool__image_8gufy_45","link-tool__title":"_link-tool__title_8gufy_55","link-tool__description":"_link-tool__description_8gufy_61","link-tool__anchor":"_link-tool__anchor_8gufy_70","embed-tool":"_embed-tool_8gufy_80","embed-tool__content":"_embed-tool__content_8gufy_84",payment:"_payment_8gufy_89","cdx-quote":"_cdx-quote_8gufy_100","cdx-input":"_cdx-input_8gufy_103","cdx-quote__text":"_cdx-quote__text_8gufy_114","cdx-nested-list":"_cdx-nested-list_8gufy_121","cdx-nested-list--ordered":"_cdx-nested-list--ordered_8gufy_128","cdx-nested-list__item":"_cdx-nested-list__item_8gufy_131","cdx-nested-list--unordered":"_cdx-nested-list--unordered_8gufy_150","cdx-list-settings":"_cdx-list-settings_8gufy_176","cdx-settings-button":"_cdx-settings-button_8gufy_179","payment-button":"_payment-button_8gufy_184"},Qr=({id:r,data:e})=>{if(e)return z.jsx("p",{id:r,className:be(j["ce-paragraph"],j["cdx-block"]),dangerouslySetInnerHTML:{__html:e.text}})},es=({id:r,data:e})=>{if(e)return z.jsx("div",{children:z.jsx("div",{id:r,className:be(e.withBackground&&"bg-[#cdd1e0] p-[15px]"),children:z.jsx("img",{src:e.file.url,alt:e.caption??void 0,className:be(e.withBackground&&"max-w-[60%]","m-auto",e.withBorder&&"border border-[#e8e8eb]",e.stretched&&"w-full")})})})},ts=({id:r,data:e})=>{if(!e)return;const t=new URL(e.link).hostname;return z.jsx("div",{className:j["cdx-block"],children:z.jsx("div",{id:r,className:j["link-tool"],children:z.jsxs("a",{className:be(j["link-tool__content"],j["link-tool__content--rendered"]),target:"_blank",rel:"nofollow noindex noreferrer",href:e.link,children:[z.jsx("div",{className:j["link-tool__image"],style:{backgroundImage:`url(${e.meta.image.url})`}}),z.jsx("div",{className:j["link-tool__title"],children:e.meta.title}),z.jsx("p",{className:j["link-tool__description"],children:e.meta.description}),z.jsx("span",{className:j["link-tool__anchor"],children:t})]})})})},os=({id:r,data:e})=>{if(e)return e.level===2?z.jsx("h2",{id:r,className:j["ce-header"],"data-placeholder":"へッダー",style:{fontSize:"1.25rem",fontWeight:"bold"},children:e.text}):e.level===3?z.jsx("h3",{id:r,className:j["ce-header"],"data-placeholder":"へッダー",style:{fontSize:"1.125rem",fontWeight:"bold"},children:e.text}):z.jsx("h2",{id:r,className:j["ce-header"],"data-placeholder":"へッダー",style:{fontSize:"1rem",fontWeight:"bold"},children:e.text})},ns=({id:r,data:e})=>{if(!e)return;const t=e.style,o=t==="ordered"?"cdx-nested-list--ordered":"cdx-nested-list--unordered",n=i=>i.map((s,a)=>z.jsx("li",{className:j["cdx-nested-list__item"],children:z.jsxs("div",{className:j["cdx-nested-list__item-body"],children:[z.jsx("div",{className:j["cdx-nested-list__item-content"],dangerouslySetInnerHTML:{__html:s.content??""}}),s.items.length!==0&&t==="ordered"&&z.jsx("ol",{className:be(j["cdx-nested-list"],j["cdx-nested-list__item-children"],j[o]),children:n(s.items)}),s.items.length!==0&&t==="unordered"&&z.jsx("ul",{className:be(j["cdx-nested-list"],j["cdx-nested-list__item-children"],j[o]),children:n(s.items)})]})},a));return e.style==="ordered"?z.jsx("ol",{id:r,className:be(j["cdx-nested-list"],j["cdx-block"],j[o]),children:n(e.items)}):z.jsx("ul",{id:r,className:be(j["cdx-nested-list"],j["cdx-block"],j[o]),children:n(e.items)})},is=({id:r,data:e})=>{if(e)return z.jsx("div",{className:j["cdx-block"],children:z.jsx("div",{id:r,className:j["embed-tool"],children:z.jsx("iframe",{frameBorder:"0",src:e.embed,height:"320",className:j["embed-tool__content"]})})})},rs=({id:r,data:e})=>{if(!e)return;const t=e.caption.replace(/<br\s*\/?>/gi,"");return z.jsx("blockquote",{id:r,className:be(j["cdx-block"],j["cdx-quote"]),children:z.jsxs("div",{className:be(j["cdx-input"],j["cdx-quote__text"]),style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[z.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}}),z.jsx("cite",{style:{display:"flex",justifyContent:"flex-end",color:"#707684"},dangerouslySetInnerHTML:{__html:t}})]})})},ss=({id:r})=>z.jsx("div",{id:r,className:j.payment,children:"このラインより先を有料にする"}),as=(r={})=>{const e=Object.assign({},r),t=n=>n.map(o),o=(n,i)=>{if(e[n.type])return z.jsx("div",{className:j["ce-block"],children:z.jsx("div",{className:j["cdx-block"],children:e[n.type](n)})},i);throw new ls(n.type)};return{parse:t}};class ls extends Error{constructor(e){super(`\x1B[31m The Parser function of type "${e}" is not defined. 

    Define your custom parser functions as: \x1B[34mhttps://github.com/pavittarx/editorjs-html#extend-for-custom-blocks \x1B[0m`),this.name="ParseFunctionError"}}const cs=as({paragraph:Qr,header:os,list:ns,payment:ss,image:es,link:ts,embed:is,quote:rs}),ds=({blocks:r})=>{if(!r)return z.jsx("div",{});const e=cs.parse(r);return z.jsx("div",{className:"w-full",children:e})};Se.Preview=ds,Se.default=Zr,Object.defineProperties(Se,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
